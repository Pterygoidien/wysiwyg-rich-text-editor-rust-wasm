(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();const br=!1;var Er=Array.isArray,Es=Array.prototype.indexOf,ir=Array.from,xl=Object.defineProperty,xi=Object.getOwnPropertyDescriptor,Ps=Object.getOwnPropertyDescriptors,Hs=Object.prototype,Os=Array.prototype,kl=Object.getPrototypeOf,il=Object.isExtensible;const Xt=()=>{};function Sl(t){for(var n=0;n<t.length;n++)t[n]()}function Cl(){var t,n,i=new Promise((r,o)=>{t=r,n=o});return{promise:i,resolve:t,reject:n}}const De=2,Pr=4,Hr=8,As=1<<24,Yt=16,Gt=32,Tn=64,rr=128,St=512,Ue=1024,tt=2048,Ot=4096,st=8192,on=16384,Or=32768,Gn=65536,rl=1<<17,Il=1<<18,Jn=1<<19,qs=1<<20,Ut=1<<25,In=32768,yr=1<<21,Ar=1<<22,an=1<<23,Yn=Symbol("$state"),Rs=Symbol(""),jn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Fs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Bs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ds(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $s(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ws(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ns(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Vs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Us(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function js(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ys=1,Gs=2,zl=4,Ks=8,Zs=16,Qs=2,Ve=Symbol(),Js="http://www.w3.org/1999/xhtml";function eo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function to(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ml(t){return t===this.v}function Tl(t,n){return t!=t?n==n:t!==n||t!==null&&typeof t=="object"||typeof t=="function"}function Ll(t){return!Tl(t,this.v)}let Mi=!1,no=!1;function io(){Mi=!0}let Te=null;function Kn(t){Te=t}function lr(t,n=!1,i){Te={p:Te,i:!1,c:null,e:null,s:t,x:null,l:Mi&&!n?{s:null,u:null,$:[]}:null}}function sr(t){var n=Te,i=n.e;if(i!==null){n.e=null;for(var r of i)Xl(r)}return t!==void 0&&(n.x=t),n.i=!0,Te=n.p,t??{}}function Ti(){return!Mi||Te!==null&&Te.l===null}let wn=[];function El(){var t=wn;wn=[],Sl(t)}function ei(t){if(wn.length===0&&!ki){var n=wn;queueMicrotask(()=>{n===wn&&El()})}wn.push(t)}function ro(){for(;wn.length>0;)El()}function Pl(t){var n=oe;if(n===null)return re.f|=an,t;if((n.f&Or)===0){if((n.f&rr)===0)throw t;n.b.error(t)}else Zn(t,n)}function Zn(t,n){for(;n!==null;){if((n.f&rr)!==0)try{n.b.error(t);return}catch(i){t=i}n=n.parent}throw t}const Gi=new Set;let se=null,Zi=null,vt=null,dt=[],or=null,mr=!1,ki=!1;class Et{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#i=0;#n=0;#a=null;#l=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(n){dt=[],Zi=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[]};for(const r of n)this.#s(r,i);this.is_fork||this.#u(),this.is_deferred()?(this.#o(i.effects),this.#o(i.render_effects)):(Zi=this,se=null,ll(i.render_effects),ll(i.effects),Zi=null,this.#a?.resolve()),vt=null}#s(n,i){n.f^=Ue;for(var r=n.first;r!==null;){var o=r.f,a=(o&(Gt|Tn))!==0,p=a&&(o&Ue)!==0,h=p||(o&st)!==0||this.skipped_effects.has(r);if((r.f&rr)!==0&&r.b?.is_pending()&&(i={parent:i,effect:r,effects:[],render_effects:[]}),!h&&r.fn!==null){a?r.f^=Ue:(o&Pr)!==0?i.effects.push(r):Li(r)&&((r.f&Yt)!==0&&this.#l.add(r),zi(r));var c=r.first;if(c!==null){r=c;continue}}var _=r.parent;for(r=r.next;r===null&&_!==null;)_===i.effect&&(this.#o(i.effects),this.#o(i.render_effects),i=i.parent),r=_.next,_=_.parent}}#o(n){for(const i of n)(i.f&tt)!==0?this.#l.add(i):(i.f&Ot)!==0&&this.#r.add(i),this.#c(i.deps),Xe(i,Ue)}#c(n){if(n!==null)for(const i of n)(i.f&De)===0||(i.f&In)===0||(i.f^=In,this.#c(i.deps))}capture(n,i){this.previous.has(n)||this.previous.set(n,i),(n.f&an)===0&&(this.current.set(n,n.v),vt?.set(n,n.v))}activate(){se=this,this.apply()}deactivate(){se===this&&(se=null,vt=null)}flush(){if(this.activate(),dt.length>0){if(Hl(),se!==null&&se!==this)return}else this.#i===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#t)n(this);this.#t.clear()}#u(){if(this.#n===0){for(const n of this.#e)n();this.#e.clear()}this.#i===0&&this.#f()}#f(){if(Gi.size>1){this.previous.clear();var n=vt,i=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const a of Gi){if(a===this){i=!1;continue}const p=[];for(const[c,_]of this.current){if(a.current.has(c))if(i&&_!==a.current.get(c))a.current.set(c,_);else continue;p.push(c)}if(p.length===0)continue;const h=[...a.current.keys()].filter(c=>!this.current.has(c));if(h.length>0){var o=dt;dt=[];const c=new Set,_=new Map;for(const C of p)Ol(C,h,c,_);if(dt.length>0){se=a,a.apply();for(const C of dt)a.#s(C,r);a.deactivate()}dt=o}}se=null,vt=n}this.committed=!0,Gi.delete(this)}increment(n){this.#i+=1,n&&(this.#n+=1)}decrement(n){this.#i-=1,n&&(this.#n-=1),this.revive()}revive(){for(const n of this.#l)this.#r.delete(n),Xe(n,tt),zn(n);for(const n of this.#r)Xe(n,Ot),zn(n);this.flush()}oncommit(n){this.#e.add(n)}ondiscard(n){this.#t.add(n)}settled(){return(this.#a??=Cl()).promise}static ensure(){if(se===null){const n=se=new Et;Gi.add(se),ki||Et.enqueue(()=>{se===n&&n.flush()})}return se}static enqueue(n){ei(n)}apply(){}}function lo(t){var n=ki;ki=!0;try{for(var i;;){if(ro(),dt.length===0&&(se?.flush(),dt.length===0))return or=null,i;Hl()}}finally{ki=n}}function Hl(){var t=Sn;mr=!0;var n=null;try{var i=0;for(tr(!0);dt.length>0;){var r=Et.ensure();if(i++>1e3){var o,a;so()}r.process(dt),cn.clear()}}finally{mr=!1,tr(t),or=null}}function so(){try{Ns()}catch(t){Zn(t,or)}}let Nt=null;function ll(t){var n=t.length;if(n!==0){for(var i=0;i<n;){var r=t[i++];if((r.f&(on|st))===0&&Li(r)&&(Nt=new Set,zi(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Gl(r):r.fn=null),Nt?.size>0)){cn.clear();for(const o of Nt){if((o.f&(on|st))!==0)continue;const a=[o];let p=o.parent;for(;p!==null;)Nt.has(p)&&(Nt.delete(p),a.push(p)),p=p.parent;for(let h=a.length-1;h>=0;h--){const c=a[h];(c.f&(on|st))===0&&zi(c)}}Nt.clear()}}Nt=null}}function Ol(t,n,i,r){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const o of t.reactions){const a=o.f;(a&De)!==0?Ol(o,n,i,r):(a&(Ar|Yt))!==0&&(a&tt)===0&&Al(o,n,r)&&(Xe(o,tt),zn(o))}}function Al(t,n,i){const r=i.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(n.includes(o))return!0;if((o.f&De)!==0&&Al(o,n,i))return i.set(o,!0),!0}return i.set(t,!1),!1}function zn(t){for(var n=or=t;n.parent!==null;){n=n.parent;var i=n.f;if(mr&&n===oe&&(i&Yt)!==0&&(i&Il)===0)return;if((i&(Tn|Gt))!==0){if((i&Ue)===0)return;n.f^=Ue}}dt.push(n)}function oo(t){let n=0,i=Mn(0),r;return()=>{Ci()&&(e(i),Br(()=>(n===0&&(r=Ei(()=>t(()=>Si(i)))),n+=1,()=>{ei(()=>{n-=1,n===0&&(r?.(),r=void 0,Si(i))})})))}}var ao=Gn|Jn|rr;function co(t,n,i){new uo(t,n,i)}class uo{parent;#e=!1;#t;#i=null;#n;#a;#l;#r=null;#s=null;#o=null;#c=null;#u=null;#f=0;#d=0;#v=!1;#h=null;#y=oo(()=>(this.#h=Mn(this.#f),()=>{this.#h=null}));constructor(n,i,r){this.#t=n,this.#n=i,this.#a=r,this.parent=oe.b,this.#e=!!this.#n.pending,this.#l=Dr(()=>{oe.b=this;{var o=this.#_();try{this.#r=ht(()=>r(o))}catch(a){this.error(a)}this.#d>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},ao)}#m(){try{this.#r=ht(()=>this.#a(this.#t))}catch(n){this.error(n)}this.#e=!1}#w(){const n=this.#n.pending;n&&(this.#s=ht(()=>n(this.#t)),Et.enqueue(()=>{var i=this.#_();this.#r=this.#p(()=>(Et.ensure(),ht(()=>this.#a(i)))),this.#d>0?this.#g():(kn(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#_(){var n=this.#t;return this.#e&&(this.#u=xn(),this.#t.before(this.#u),n=this.#u),n}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(n){var i=oe,r=re,o=Te;At(this.#l),Je(this.#l),Kn(this.#l.ctx);try{return n()}catch(a){return Pl(a),null}finally{At(i),Je(r),Kn(o)}}#g(){const n=this.#n.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Ql(this.#r,this.#c)),this.#s===null&&(this.#s=ht(()=>n(this.#t)))}#b(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(n);return}this.#d+=n,this.#d===0&&(this.#e=!1,this.#s&&kn(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(n){this.#b(n),this.#f+=n,this.#h&&Qn(this.#h,this.#f)}get_effect_pending(){return this.#y(),e(this.#h)}error(n){var i=this.#n.onerror;let r=this.#n.failed;if(this.#v||!i&&!r)throw n;this.#r&&(et(this.#r),this.#r=null),this.#s&&(et(this.#s),this.#s=null),this.#o&&(et(this.#o),this.#o=null);var o=!1,a=!1;const p=()=>{if(o){to();return}o=!0,a&&js(),Et.ensure(),this.#f=0,this.#o!==null&&kn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#p(()=>(this.#v=!1,ht(()=>this.#a(this.#t)))),this.#d>0?this.#g():this.#e=!1};var h=re;try{Je(null),a=!0,i?.(n,p),a=!1}catch(c){Zn(c,this.#l&&this.#l.parent)}finally{Je(h)}r&&ei(()=>{this.#o=this.#p(()=>{Et.ensure(),this.#v=!0;try{return ht(()=>{r(this.#t,()=>n,()=>p)})}catch(c){return Zn(c,this.#l.parent),null}finally{this.#v=!1}})})}}function fo(t,n,i,r){const o=Ti()?qr:ql;if(i.length===0&&t.length===0){r(n.map(o));return}var a=se,p=oe,h=ho();function c(){Promise.all(i.map(_=>vo(_))).then(_=>{h();try{r([...n.map(o),..._])}catch(C){(p.f&on)===0&&Zn(C,p)}a?.deactivate(),er()}).catch(_=>{Zn(_,p)})}t.length>0?Promise.all(t).then(()=>{h();try{return c()}finally{a?.deactivate(),er()}}):c()}function ho(){var t=oe,n=re,i=Te,r=se;return function(a=!0){At(t),Je(n),Kn(i),a&&r?.activate()}}function er(){At(null),Je(null),Kn(null)}function qr(t){var n=De|tt,i=re!==null&&(re.f&De)!==0?re:null;return oe!==null&&(oe.f|=Jn),{ctx:Te,deps:null,effects:null,equals:Ml,f:n,fn:t,reactions:null,rv:0,v:Ve,wv:0,parent:i??oe,ac:null}}function vo(t,n){let i=oe;i===null&&Bs();var r=i.b,o=void 0,a=Mn(Ve),p=!re,h=new Map;return Io(()=>{var c=Cl();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{_===se&&_.committed&&_.deactivate(),er()})}catch(T){c.reject(T),er()}var _=se;if(p){var C=!r.is_pending();r.update_pending_count(1),_.increment(C),h.get(_)?.reject(jn),h.delete(_),h.set(_,c)}const R=(T,L=void 0)=>{if(_.activate(),L)L!==jn&&(a.f|=an,Qn(a,L));else{(a.f&an)!==0&&(a.f^=an),Qn(a,T);for(const[B,N]of h){if(h.delete(B),B===_)break;N.reject(jn)}}p&&(r.update_pending_count(-1),_.decrement(C))};c.promise.then(R,T=>R(null,T||"unknown"))}),ur(()=>{for(const c of h.values())c.reject(jn)}),new Promise(c=>{function _(C){function R(){C===o?c(a):_(o)}C.then(R,R)}_(o)})}function be(t){const n=qr(t);return Jl(n),n}function ql(t){const n=qr(t);return n.equals=Ll,n}function Rl(t){var n=t.effects;if(n!==null){t.effects=null;for(var i=0;i<n.length;i+=1)et(n[i])}}function po(t){for(var n=t.parent;n!==null;){if((n.f&De)===0)return(n.f&on)===0?n:null;n=n.parent}return null}function Rr(t){var n,i=oe;At(po(t));try{t.f&=~In,Rl(t),n=is(t)}finally{At(i)}return n}function Fl(t){var n=Rr(t);if(t.equals(n)||(se?.is_fork||(t.v=n),t.wv=ts()),!ti)if(vt!==null)(Ci()||se?.is_fork)&&vt.set(t,n);else{var i=(t.f&St)===0?Ot:Ue;Xe(t,i)}}let wr=new Set;const cn=new Map;let Bl=!1;function Mn(t,n){var i={f:0,v:t,reactions:null,equals:Ml,rv:0,wv:0};return i}function V(t,n){const i=Mn(t);return Jl(i),i}function Fr(t,n=!1,i=!0){const r=Mn(t);return n||(r.equals=Ll),Mi&&i&&Te!==null&&Te.l!==null&&(Te.l.s??=[]).push(r),r}function f(t,n,i=!1){re!==null&&(!Pt||(re.f&rl)!==0)&&Ti()&&(re.f&(De|Yt|Ar|rl))!==0&&!jt?.includes(t)&&Xs();let r=i?lt(n):n;return Qn(t,r)}function Qn(t,n){if(!t.equals(n)){var i=t.v;ti?cn.set(t,n):cn.set(t,i),t.v=n;var r=Et.ensure();r.capture(t,i),(t.f&De)!==0&&((t.f&tt)!==0&&Rr(t),Xe(t,(t.f&St)!==0?Ue:Ot)),t.wv=ts(),Dl(t,tt),Ti()&&oe!==null&&(oe.f&Ue)!==0&&(oe.f&(Gt|Tn))===0&&(ft===null?To([t]):ft.push(t)),!r.is_fork&&wr.size>0&&!Bl&&go()}return n}function go(){Bl=!1;var t=Sn;tr(!0);const n=Array.from(wr);try{for(const i of n)(i.f&Ue)!==0&&Xe(i,Ot),Li(i)&&zi(i)}finally{tr(t)}wr.clear()}function rn(t,n=1){var i=e(t),r=n===1?i++:i--;return f(t,i),r}function Si(t){f(t,t.v+1)}function Dl(t,n){var i=t.reactions;if(i!==null)for(var r=Ti(),o=i.length,a=0;a<o;a++){var p=i[a],h=p.f;if(!(!r&&p===oe)){var c=(h&tt)===0;if(c&&Xe(p,n),(h&De)!==0){var _=p;vt?.delete(_),(h&In)===0&&(h&St&&(p.f|=In),Dl(_,Ot))}else c&&((h&Yt)!==0&&Nt!==null&&Nt.add(p),zn(p))}}}function lt(t){if(typeof t!="object"||t===null||Yn in t)return t;const n=kl(t);if(n!==Hs&&n!==Os)return t;var i=new Map,r=Er(t),o=V(0),a=Cn,p=h=>{if(Cn===a)return h();var c=re,_=Cn;Je(null),ul(a);var C=h();return Je(c),ul(_),C};return r&&i.set("length",V(t.length)),new Proxy(t,{defineProperty(h,c,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Vs();var C=i.get(c);return C===void 0?C=p(()=>{var R=V(_.value);return i.set(c,R),R}):f(C,_.value,!0),!0},deleteProperty(h,c){var _=i.get(c);if(_===void 0){if(c in h){const C=p(()=>V(Ve));i.set(c,C),Si(o)}}else f(_,Ve),Si(o);return!0},get(h,c,_){if(c===Yn)return t;var C=i.get(c),R=c in h;if(C===void 0&&(!R||xi(h,c)?.writable)&&(C=p(()=>{var L=lt(R?h[c]:Ve),B=V(L);return B}),i.set(c,C)),C!==void 0){var T=e(C);return T===Ve?void 0:T}return Reflect.get(h,c,_)},getOwnPropertyDescriptor(h,c){var _=Reflect.getOwnPropertyDescriptor(h,c);if(_&&"value"in _){var C=i.get(c);C&&(_.value=e(C))}else if(_===void 0){var R=i.get(c),T=R?.v;if(R!==void 0&&T!==Ve)return{enumerable:!0,configurable:!0,value:T,writable:!0}}return _},has(h,c){if(c===Yn)return!0;var _=i.get(c),C=_!==void 0&&_.v!==Ve||Reflect.has(h,c);if(_!==void 0||oe!==null&&(!C||xi(h,c)?.writable)){_===void 0&&(_=p(()=>{var T=C?lt(h[c]):Ve,L=V(T);return L}),i.set(c,_));var R=e(_);if(R===Ve)return!1}return C},set(h,c,_,C){var R=i.get(c),T=c in h;if(r&&c==="length")for(var L=_;L<R.v;L+=1){var B=i.get(L+"");B!==void 0?f(B,Ve):L in h&&(B=p(()=>V(Ve)),i.set(L+"",B))}if(R===void 0)(!T||xi(h,c)?.writable)&&(R=p(()=>V(void 0)),f(R,lt(_)),i.set(c,R));else{T=R.v!==Ve;var N=p(()=>lt(_));f(R,N)}var d=Reflect.getOwnPropertyDescriptor(h,c);if(d?.set&&d.set.call(C,_),!T){if(r&&typeof c=="string"){var w=i.get("length"),P=Number(c);Number.isInteger(P)&&P>=w.v&&f(w,P+1)}Si(o)}return!0},ownKeys(h){e(o);var c=Reflect.ownKeys(h).filter(R=>{var T=i.get(R);return T===void 0||T.v!==Ve});for(var[_,C]of i)C.v!==Ve&&!(_ in h)&&c.push(_);return c},setPrototypeOf(){Us()}})}function sl(t){try{if(t!==null&&typeof t=="object"&&Yn in t)return t[Yn]}catch{}return t}function _o(t,n){return Object.is(sl(t),sl(n))}var ol,$l,Wl,Nl;function bo(){if(ol===void 0){ol=window,$l=/Firefox/.test(navigator.userAgent);var t=Element.prototype,n=Node.prototype,i=Text.prototype;Wl=xi(n,"firstChild").get,Nl=xi(n,"nextSibling").get,il(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),il(i)&&(i.__t=void 0)}}function xn(t=""){return document.createTextNode(t)}function Vl(t){return Wl.call(t)}function ar(t){return Nl.call(t)}function A(t,n){return Vl(t)}function x(t,n=1,i=!1){let r=t;for(;n--;)r=ar(r);return r}function yo(t){t.textContent=""}function Ul(){return!1}let al=!1;function mo(){al||(al=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const n of t.target.elements)n.__on_r?.()})},{capture:!0}))}function cr(t){var n=re,i=oe;Je(null),At(null);try{return t()}finally{Je(n),At(i)}}function wo(t,n,i,r=i){t.addEventListener(n,()=>cr(i));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),mo()}function xo(t){oe===null&&(re===null&&Ws(),$s()),ti&&Ds()}function ko(t,n){var i=n.last;i===null?n.last=n.first=t:(i.next=t,t.prev=i,n.last=t)}function Kt(t,n,i){var r=oe;r!==null&&(r.f&st)!==0&&(t|=st);var o={ctx:Te,deps:null,nodes:null,f:t|tt|St,first:null,fn:n,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(i)try{zi(o),o.f|=Or}catch(h){throw et(o),h}else n!==null&&zn(o);var a=o;if(i&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&Jn)===0&&(a=a.first,(t&Yt)!==0&&(t&Gn)!==0&&a!==null&&(a.f|=Gn)),a!==null&&(a.parent=r,r!==null&&ko(a,r),re!==null&&(re.f&De)!==0&&(t&Tn)===0)){var p=re;(p.effects??=[]).push(a)}return o}function Ci(){return re!==null&&!Pt}function ur(t){const n=Kt(Hr,null,!1);return Xe(n,Ue),n.teardown=t,n}function xr(t){xo();var n=oe.f,i=!re&&(n&Gt)!==0&&(n&Or)===0;if(i){var r=Te;(r.e??=[]).push(t)}else return Xl(t)}function Xl(t){return Kt(Pr|qs,t,!1)}function So(t){Et.ensure();const n=Kt(Tn|Jn,t,!0);return(i={})=>new Promise(r=>{i.outro?kn(n,()=>{et(n),r(void 0)}):(et(n),r(void 0))})}function Co(t){return Kt(Pr,t,!1)}function Io(t){return Kt(Ar|Jn,t,!0)}function Br(t,n=0){return Kt(Hr|n,t,!0)}function Ye(t,n=[],i=[],r=[]){fo(r,n,i,o=>{Kt(Hr,()=>t(...o.map(e)),!0)})}function Dr(t,n=0){var i=Kt(Yt|n,t,!0);return i}function ht(t){return Kt(Gt|Jn,t,!0)}function jl(t){var n=t.teardown;if(n!==null){const i=ti,r=re;cl(!0),Je(null);try{n.call(null)}finally{cl(i),Je(r)}}}function Yl(t,n=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const o=i.ac;o!==null&&cr(()=>{o.abort(jn)});var r=i.next;(i.f&Tn)!==0?i.parent=null:et(i,n),i=r}}function zo(t){for(var n=t.first;n!==null;){var i=n.next;(n.f&Gt)===0&&et(n),n=i}}function et(t,n=!0){var i=!1;(n||(t.f&Il)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Mo(t.nodes.start,t.nodes.end),i=!0),Yl(t,n&&!i),nr(t,0),Xe(t,on);var r=t.nodes&&t.nodes.t;if(r!==null)for(const a of r)a.stop();jl(t);var o=t.parent;o!==null&&o.first!==null&&Gl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Mo(t,n){for(;t!==null;){var i=t===n?null:ar(t);t.remove(),t=i}}function Gl(t){var n=t.parent,i=t.prev,r=t.next;i!==null&&(i.next=r),r!==null&&(r.prev=i),n!==null&&(n.first===t&&(n.first=r),n.last===t&&(n.last=i))}function kn(t,n,i=!0){var r=[];Kl(t,r,!0);var o=()=>{i&&et(t),n&&n()},a=r.length;if(a>0){var p=()=>--a||o();for(var h of r)h.out(p)}else o()}function Kl(t,n,i){if((t.f&st)===0){t.f^=st;var r=t.nodes&&t.nodes.t;if(r!==null)for(const h of r)(h.is_global||i)&&n.push(h);for(var o=t.first;o!==null;){var a=o.next,p=(o.f&Gn)!==0||(o.f&Gt)!==0&&(t.f&Yt)!==0;Kl(o,n,p?i:!1),o=a}}}function $r(t){Zl(t,!0)}function Zl(t,n){if((t.f&st)!==0){t.f^=st,(t.f&Ue)===0&&(Xe(t,tt),zn(t));for(var i=t.first;i!==null;){var r=i.next,o=(i.f&Gn)!==0||(i.f&Gt)!==0;Zl(i,o?n:!1),i=r}var a=t.nodes&&t.nodes.t;if(a!==null)for(const p of a)(p.is_global||n)&&p.in()}}function Ql(t,n){if(t.nodes)for(var i=t.nodes.start,r=t.nodes.end;i!==null;){var o=i===r?null:ar(i);n.append(i),i=o}}let Sn=!1;function tr(t){Sn=t}let ti=!1;function cl(t){ti=t}let re=null,Pt=!1;function Je(t){re=t}let oe=null;function At(t){oe=t}let jt=null;function Jl(t){re!==null&&(jt===null?jt=[t]:jt.push(t))}let Ge=null,rt=0,ft=null;function To(t){ft=t}let es=1,Ii=0,Cn=Ii;function ul(t){Cn=t}function ts(){return++es}function Li(t){var n=t.f;if((n&tt)!==0)return!0;if(n&De&&(t.f&=~In),(n&Ot)!==0){var i=t.deps;if(i!==null)for(var r=i.length,o=0;o<r;o++){var a=i[o];if(Li(a)&&Fl(a),a.wv>t.wv)return!0}(n&St)!==0&&vt===null&&Xe(t,Ue)}return!1}function ns(t,n,i=!0){var r=t.reactions;if(r!==null&&!jt?.includes(t))for(var o=0;o<r.length;o++){var a=r[o];(a.f&De)!==0?ns(a,n,!1):n===a&&(i?Xe(a,tt):(a.f&Ue)!==0&&Xe(a,Ot),zn(a))}}function is(t){var n=Ge,i=rt,r=ft,o=re,a=jt,p=Te,h=Pt,c=Cn,_=t.f;Ge=null,rt=0,ft=null,re=(_&(Gt|Tn))===0?t:null,jt=null,Kn(t.ctx),Pt=!1,Cn=++Ii,t.ac!==null&&(cr(()=>{t.ac.abort(jn)}),t.ac=null);try{t.f|=yr;var C=t.fn,R=C(),T=t.deps;if(Ge!==null){var L;if(nr(t,rt),T!==null&&rt>0)for(T.length=rt+Ge.length,L=0;L<Ge.length;L++)T[rt+L]=Ge[L];else t.deps=T=Ge;if(Ci()&&(t.f&St)!==0)for(L=rt;L<T.length;L++)(T[L].reactions??=[]).push(t)}else T!==null&&rt<T.length&&(nr(t,rt),T.length=rt);if(Ti()&&ft!==null&&!Pt&&T!==null&&(t.f&(De|Ot|tt))===0)for(L=0;L<ft.length;L++)ns(ft[L],t);return o!==null&&o!==t&&(Ii++,ft!==null&&(r===null?r=ft:r.push(...ft))),(t.f&an)!==0&&(t.f^=an),R}catch(B){return Pl(B)}finally{t.f^=yr,Ge=n,rt=i,ft=r,re=o,jt=a,Kn(p),Pt=h,Cn=c}}function Lo(t,n){let i=n.reactions;if(i!==null){var r=Es.call(i,t);if(r!==-1){var o=i.length-1;o===0?i=n.reactions=null:(i[r]=i[o],i.pop())}}i===null&&(n.f&De)!==0&&(Ge===null||!Ge.includes(n))&&(Xe(n,Ot),(n.f&St)!==0&&(n.f^=St,n.f&=~In),Rl(n),nr(n,0))}function nr(t,n){var i=t.deps;if(i!==null)for(var r=n;r<i.length;r++)Lo(t,i[r])}function zi(t){var n=t.f;if((n&on)===0){Xe(t,Ue);var i=oe,r=Sn;oe=t,Sn=!0;try{(n&(Yt|As))!==0?zo(t):Yl(t),jl(t);var o=is(t);t.teardown=typeof o=="function"?o:null,t.wv=es;var a;br&&no&&(t.f&tt)!==0&&t.deps}finally{Sn=r,oe=i}}}async function Eo(){await Promise.resolve(),lo()}function e(t){var n=t.f,i=(n&De)!==0;if(re!==null&&!Pt){var r=oe!==null&&(oe.f&on)!==0;if(!r&&!jt?.includes(t)){var o=re.deps;if((re.f&yr)!==0)t.rv<Ii&&(t.rv=Ii,Ge===null&&o!==null&&o[rt]===t?rt++:Ge===null?Ge=[t]:Ge.includes(t)||Ge.push(t));else{(re.deps??=[]).push(t);var a=t.reactions;a===null?t.reactions=[re]:a.includes(re)||a.push(re)}}}if(ti){if(cn.has(t))return cn.get(t);if(i){var p=t,h=p.v;return((p.f&Ue)===0&&p.reactions!==null||ls(p))&&(h=Rr(p)),cn.set(p,h),h}}else i&&(!vt?.has(t)||se?.is_fork&&!Ci())&&(p=t,Li(p)&&Fl(p),Sn&&Ci()&&(p.f&St)===0&&rs(p));if(vt?.has(t))return vt.get(t);if((t.f&an)!==0)throw t.v;return t.v}function rs(t){if(t.deps!==null){t.f^=St;for(const n of t.deps)(n.reactions??=[]).push(t),(n.f&De)!==0&&(n.f&St)===0&&rs(n)}}function ls(t){if(t.v===Ve)return!0;if(t.deps===null)return!1;for(const n of t.deps)if(cn.has(n)||(n.f&De)!==0&&ls(n))return!0;return!1}function Ei(t){var n=Pt;try{return Pt=!0,t()}finally{Pt=n}}const Po=-7169;function Xe(t,n){t.f=t.f&Po|n}const Ho=["touchstart","touchmove"];function Oo(t){return Ho.includes(t)}const ss=new Set,kr=new Set;function Ao(t,n,i,r={}){function o(a){if(r.capture||yi.call(n,a),!a.cancelBubble)return cr(()=>i?.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ei(()=>{n.addEventListener(t,o,r)}):n.addEventListener(t,o,r),o}function Ki(t,n,i,r,o){var a={capture:r,passive:o},p=Ao(t,n,i,a);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&ur(()=>{n.removeEventListener(t,p,a)})}function Wr(t){for(var n=0;n<t.length;n++)ss.add(t[n]);for(var i of kr)i(t)}let fl=null;function yi(t){var n=this,i=n.ownerDocument,r=t.type,o=t.composedPath?.()||[],a=o[0]||t.target;fl=t;var p=0,h=fl===t&&t.__root;if(h){var c=o.indexOf(h);if(c!==-1&&(n===document||n===window)){t.__root=n;return}var _=o.indexOf(n);if(_===-1)return;c<=_&&(p=c)}if(a=o[p]||t.target,a!==n){xl(t,"currentTarget",{configurable:!0,get(){return a||i}});var C=re,R=oe;Je(null),At(null);try{for(var T,L=[];a!==null;){var B=a.assignedSlot||a.parentNode||a.host||null;try{var N=a["__"+r];N!=null&&(!a.disabled||t.target===a)&&N.call(a,t)}catch(d){T?L.push(d):T=d}if(t.cancelBubble||B===n||B===null)break;a=B}if(T){for(let d of L)queueMicrotask(()=>{throw d});throw T}}finally{t.__root=n,delete t.currentTarget,Je(C),At(R)}}}function qo(t){var n=document.createElement("template");return n.innerHTML=t.replaceAll("<!>","<!---->"),n.content}function Ro(t,n){var i=oe;i.nodes===null&&(i.nodes={start:t,end:n,a:null,t:null})}function Se(t,n){var i=(n&Qs)!==0,r,o=!t.startsWith("<!>");return()=>{r===void 0&&(r=qo(o?t:"<!>"+t),r=Vl(r));var a=i||$l?document.importNode(r,!0):r.cloneNode(!0);return Ro(a,a),a}}function ke(t,n){t!==null&&t.before(n)}function Vt(t,n){var i=n==null?"":typeof n=="object"?n+"":n;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function Fo(t,n){return Bo(t,n)}const Wn=new Map;function Bo(t,{target:n,anchor:i,props:r={},events:o,context:a,intro:p=!0}){bo();var h=new Set,c=R=>{for(var T=0;T<R.length;T++){var L=R[T];if(!h.has(L)){h.add(L);var B=Oo(L);n.addEventListener(L,yi,{passive:B});var N=Wn.get(L);N===void 0?(document.addEventListener(L,yi,{passive:B}),Wn.set(L,1)):Wn.set(L,N+1)}}};c(ir(ss)),kr.add(c);var _=void 0,C=So(()=>{var R=i??n.appendChild(xn());return co(R,{pending:()=>{}},T=>{if(a){lr({});var L=Te;L.c=a}o&&(r.$$events=o),_=t(T,r)||{},a&&sr()}),()=>{for(var T of h){n.removeEventListener(T,yi);var L=Wn.get(T);--L===0?(document.removeEventListener(T,yi),Wn.delete(T)):Wn.set(T,L)}kr.delete(c),R!==i&&R.parentNode?.removeChild(R)}});return Do.set(_,C),_}let Do=new WeakMap;class $o{anchor;#e=new Map;#t=new Map;#i=new Map;#n=new Set;#a=!0;constructor(n,i=!0){this.anchor=n,this.#a=i}#l=()=>{var n=se;if(this.#e.has(n)){var i=this.#e.get(n),r=this.#t.get(i);if(r)$r(r),this.#n.delete(i);else{var o=this.#i.get(i);o&&(this.#t.set(i,o.effect),this.#i.delete(i),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[a,p]of this.#e){if(this.#e.delete(a),a===n)break;const h=this.#i.get(p);h&&(et(h.effect),this.#i.delete(p))}for(const[a,p]of this.#t){if(a===i||this.#n.has(a))continue;const h=()=>{if(Array.from(this.#e.values()).includes(a)){var _=document.createDocumentFragment();Ql(p,_),_.append(xn()),this.#i.set(a,{effect:p,fragment:_})}else et(p);this.#n.delete(a),this.#t.delete(a)};this.#a||!r?(this.#n.add(a),kn(p,h,!1)):h()}}};#r=n=>{this.#e.delete(n);const i=Array.from(this.#e.values());for(const[r,o]of this.#i)i.includes(r)||(et(o.effect),this.#i.delete(r))};ensure(n,i){var r=se,o=Ul();if(i&&!this.#t.has(n)&&!this.#i.has(n))if(o){var a=document.createDocumentFragment(),p=xn();a.append(p),this.#i.set(n,{effect:ht(()=>i(p)),fragment:a})}else this.#t.set(n,ht(()=>i(this.anchor)));if(this.#e.set(r,n),o){for(const[h,c]of this.#t)h===n?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[h,c]of this.#i)h===n?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#l),r.ondiscard(this.#r)}else this.#l()}}function Ht(t,n,i=!1){var r=new $o(t),o=i?Gn:0;function a(p,h){r.ensure(p,h)}Dr(()=>{var p=!1;n((h,c=!0)=>{p=!0,a(c,h)}),p||a(!1,null)},o)}function mn(t,n){return n}function Wo(t,n,i){for(var r=[],o=n.length,a,p=n.length,h=0;h<o;h++){let R=n[h];kn(R,()=>{if(a){if(a.pending.delete(R),a.done.add(R),a.pending.size===0){var T=t.outrogroups;Sr(ir(a.done)),T.delete(a),T.size===0&&(t.outrogroups=null)}}else p-=1},!1)}if(p===0){var c=r.length===0&&i!==null;if(c){var _=i,C=_.parentNode;yo(C),C.append(_),t.items.clear()}Sr(n,!c)}else a={pending:new Set(n),done:new Set},(t.outrogroups??=new Set).add(a)}function Sr(t,n=!0){for(var i=0;i<t.length;i++)et(t[i],n)}var dl;function sn(t,n,i,r,o,a=null){var p=t,h=new Map,c=(n&zl)!==0;if(c){var _=t;p=_.appendChild(xn())}var C=null,R=ql(()=>{var w=i();return Er(w)?w:w==null?[]:ir(w)}),T,L=!0;function B(){d.fallback=C,No(d,T,p,n,r),C!==null&&(T.length===0?(C.f&Ut)===0?$r(C):(C.f^=Ut,mi(C,null,p)):kn(C,()=>{C=null}))}var N=Dr(()=>{T=e(R);for(var w=T.length,P=new Set,ae=se,ye=Ul(),fe=0;fe<w;fe+=1){var Ee=T[fe],y=r(Ee,fe),O=L?null:h.get(y);O?(O.v&&Qn(O.v,Ee),O.i&&Qn(O.i,fe),ye&&ae.skipped_effects.delete(O.e)):(O=Vo(h,L?p:dl??=xn(),Ee,y,fe,o,n,i),L||(O.e.f|=Ut),h.set(y,O)),P.add(y)}if(w===0&&a&&!C&&(L?C=ht(()=>a(p)):(C=ht(()=>a(dl??=xn())),C.f|=Ut)),!L)if(ye){for(const[j,Y]of h)P.has(j)||ae.skipped_effects.add(Y.e);ae.oncommit(B),ae.ondiscard(()=>{})}else B();e(R)}),d={effect:N,items:h,outrogroups:null,fallback:C};L=!1}function No(t,n,i,r,o){var a=(r&Ks)!==0,p=n.length,h=t.items,c=t.effect.first,_,C=null,R,T=[],L=[],B,N,d,w;if(a)for(w=0;w<p;w+=1)B=n[w],N=o(B,w),d=h.get(N).e,(d.f&Ut)===0&&(d.nodes?.a?.measure(),(R??=new Set).add(d));for(w=0;w<p;w+=1){if(B=n[w],N=o(B,w),d=h.get(N).e,t.outrogroups!==null)for(const Y of t.outrogroups)Y.pending.delete(d),Y.done.delete(d);if((d.f&Ut)!==0)if(d.f^=Ut,d===c)mi(d,null,i);else{var P=C?C.next:c;d===t.effect.last&&(t.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),ln(t,C,d),ln(t,d,P),mi(d,P,i),C=d,T=[],L=[],c=C.next;continue}if((d.f&st)!==0&&($r(d),a&&(d.nodes?.a?.unfix(),(R??=new Set).delete(d))),d!==c){if(_!==void 0&&_.has(d)){if(T.length<L.length){var ae=L[0],ye;C=ae.prev;var fe=T[0],Ee=T[T.length-1];for(ye=0;ye<T.length;ye+=1)mi(T[ye],ae,i);for(ye=0;ye<L.length;ye+=1)_.delete(L[ye]);ln(t,fe.prev,Ee.next),ln(t,C,fe),ln(t,Ee,ae),c=ae,C=Ee,w-=1,T=[],L=[]}else _.delete(d),mi(d,c,i),ln(t,d.prev,d.next),ln(t,d,C===null?t.effect.first:C.next),ln(t,C,d),C=d;continue}for(T=[],L=[];c!==null&&c!==d;)(_??=new Set).add(c),L.push(c),c=c.next;if(c===null)continue}(d.f&Ut)===0&&T.push(d),C=d,c=d.next}if(t.outrogroups!==null){for(const Y of t.outrogroups)Y.pending.size===0&&(Sr(ir(Y.done)),t.outrogroups?.delete(Y));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||_!==void 0){var y=[];if(_!==void 0)for(d of _)(d.f&st)===0&&y.push(d);for(;c!==null;)(c.f&st)===0&&c!==t.fallback&&y.push(c),c=c.next;var O=y.length;if(O>0){var j=(r&zl)!==0&&p===0?i:null;if(a){for(w=0;w<O;w+=1)y[w].nodes?.a?.measure();for(w=0;w<O;w+=1)y[w].nodes?.a?.fix()}Wo(t,y,j)}}a&&ei(()=>{if(R!==void 0)for(d of R)d.nodes?.a?.apply()})}function Vo(t,n,i,r,o,a,p,h){var c=(p&Ys)!==0?(p&Zs)===0?Fr(i,!1,!1):Mn(i):null,_=(p&Gs)!==0?Mn(o):null;return{v:c,i:_,e:ht(()=>(a(n,c??i,_??o,h),()=>{t.delete(r)}))}}function mi(t,n,i){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,a=n&&(n.f&Ut)===0?n.nodes.start:i;r!==null;){var p=ar(r);if(a.before(r),r===o)return;r=p}}function ln(t,n,i){n===null?t.effect.first=i:n.next=i,i===null?t.effect.last=n:i.prev=n}const hl=[...` 	
\r\fÂ \v\uFEFF`];function Uo(t,n,i){var r=t==null?"":""+t;if(n&&(r=r?r+" "+n:n),i){for(var o in i)if(i[o])r=r?r+" "+o:o;else if(r.length)for(var a=o.length,p=0;(p=r.indexOf(o,p))>=0;){var h=p+a;(p===0||hl.includes(r[p-1]))&&(h===r.length||hl.includes(r[h]))?r=(p===0?"":r.substring(0,p))+r.substring(h+1):p=h}}return r===""?null:r}function Xo(t,n){return t==null?null:String(t)}function Q(t,n,i,r,o,a){var p=t.__className;if(p!==i||p===void 0){var h=Uo(i,r,a);h==null?t.removeAttribute("class"):t.className=h,t.__className=i}else if(a&&o!==a)for(var c in a){var _=!!a[c];(o==null||_!==!!o[c])&&t.classList.toggle(c,_)}return a}function os(t,n,i,r){var o=t.__style;if(o!==n){var a=Xo(n);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=n}return r}function Qi(t,n,i=!1){if(t.multiple){if(n==null)return;if(!Er(n))return eo();for(var r of t.options)r.selected=n.includes(vl(r));return}for(r of t.options){var o=vl(r);if(_o(o,n)){r.selected=!0;return}}(!i||n!==void 0)&&(t.selectedIndex=-1)}function vr(t){var n=new MutationObserver(()=>{Qi(t,t.__value)});n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ur(()=>{n.disconnect()})}function vl(t){return"__value"in t?t.__value:t.value}const jo=Symbol("is custom element"),Yo=Symbol("is html");function pl(t,n){var i=cs(t);i.checked!==(i.checked=n??void 0)&&(t.checked=n)}function as(t,n,i,r){var o=cs(t);o[n]!==(o[n]=i)&&(n==="loading"&&(t[Rs]=i),i==null?t.removeAttribute(n):typeof i!="string"&&Go(t).includes(n)?t[n]=i:t.setAttribute(n,i))}function cs(t){return t.__attributes??={[jo]:t.nodeName.includes("-"),[Yo]:t.namespaceURI===Js}}var gl=new Map;function Go(t){var n=t.getAttribute("is")||t.nodeName,i=gl.get(n);if(i)return i;gl.set(n,i=[]);for(var r,o=t,a=Element.prototype;a!==o;){r=Ps(o);for(var p in r)r[p].set&&i.push(p);o=kl(o)}return i}function Ko(t,n,i=n){var r=new WeakSet;wo(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=pr(t)?gr(a):a,i(a),se!==null&&r.add(se),await Eo(),a!==(a=n())){var p=t.selectionStart,h=t.selectionEnd,c=t.value.length;if(t.value=a??"",h!==null){var _=t.value.length;p===h&&h===c&&_>c?(t.selectionStart=_,t.selectionEnd=_):(t.selectionStart=p,t.selectionEnd=Math.min(h,_))}}}),Ei(n)==null&&t.value&&(i(pr(t)?gr(t.value):t.value),se!==null&&r.add(se)),Br(()=>{var o=n();if(t===document.activeElement){var a=Zi??se;if(r.has(a))return}pr(t)&&o===gr(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function pr(t){var n=t.type;return n==="number"||n==="range"}function gr(t){return t===""?null:+t}function _l(t,n){return t===n||t?.[Yn]===n}function Xn(t={},n,i,r){return Co(()=>{var o,a;return Br(()=>{o=a,a=r?.()||[],Ei(()=>{t!==i(...a)&&(n(t,...a),o&&_l(i(...o),t)&&n(null,...o))})}),()=>{ei(()=>{a&&_l(i(...a),t)&&n(null,...a)})}}),t}function Nr(t,n,i){if(t==null)return n(void 0),i&&i(void 0),Xt;const r=Ei(()=>t.subscribe(n,i));return r.unsubscribe?()=>r.unsubscribe():r}const Nn=[];function Zo(t,n){return{subscribe:Ct(t,n).subscribe}}function Ct(t,n=Xt){let i=null;const r=new Set;function o(h){if(Tl(t,h)&&(t=h,i)){const c=!Nn.length;for(const _ of r)_[1](),Nn.push(_,t);if(c){for(let _=0;_<Nn.length;_+=2)Nn[_][0](Nn[_+1]);Nn.length=0}}}function a(h){o(h(t))}function p(h,c=Xt){const _=[h,c];return r.add(_),r.size===1&&(i=n(o,a)||Xt),h(t),()=>{r.delete(_),r.size===0&&i&&(i(),i=null)}}return{set:o,update:a,subscribe:p}}function Vr(t,n,i){const r=!Array.isArray(t),o=r?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=n.length<2;return Zo(i,(p,h)=>{let c=!1;const _=[];let C=0,R=Xt;const T=()=>{if(C)return;R();const B=n(r?_[0]:_,p,h);a?p(B):R=typeof B=="function"?B:Xt},L=o.map((B,N)=>Nr(B,d=>{_[N]=d,C&=~(1<<N),c&&T()},()=>{C|=1<<N}));return c=!0,T(),function(){Sl(L),R(),c=!1}})}function Qo(t){let n;return Nr(t,i=>n=i)(),n}let Cr=Symbol();function qe(t,n,i){const r=i[n]??={store:null,source:Fr(void 0),unsubscribe:Xt};if(r.store!==t&&!(Cr in i))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Xt;else{var o=!0;r.unsubscribe=Nr(t,a=>{o?r.source.v=a:f(r.source,a)}),o=!1}return t&&Cr in i?Qo(t):e(r.source)}function Ur(){const t={};function n(){ur(()=>{for(var i in t)t[i].unsubscribe();xl(t,Cr,{enumerable:!1,value:!0})})}return[t,n]}function bl(t,n,i,r){var o=r,a=!0,p=()=>(a&&(a=!1,o=r),o),h;h=t[n],h===void 0&&r!==void 0&&(h=p());var c;return c=()=>{var _=t[n];return _===void 0?p():(a=!0,_)},c}function us(t){Te===null&&Fs(),Mi&&Te.l!==null?Jo(Te).m.push(t):xr(()=>{const n=Ei(t);if(typeof n=="function")return n})}function Jo(t){var n=t.l;return n.u??={a:[],b:[],m:[]}}const ea="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ea);io();const fs={A4:{name:"A4",width:210,height:297},A5:{name:"A5",width:148,height:210},LETTER:{name:"Letter",width:215.9,height:279.4},LEGAL:{name:"Legal",width:215.9,height:355.6},TEXTBOOK:{name:"US Textbook",width:236.2,height:279.4}},Ir={top:25.4,right:25.4,bottom:25.4,left:25.4},yl={top:12.7,right:12.7,bottom:12.7,left:12.7},ml={top:25.4,right:50.8,bottom:25.4,left:50.8};function pt(t){return t/25.4*96}function Xr(t){const{format:n,orientation:i}=t;return i==="landscape"?{width:pt(n.height),height:pt(n.width)}:{width:pt(n.width),height:pt(n.height)}}function jr(t){const n=Xr(t),{margins:i}=t;return{width:n.width-pt(i.left)-pt(i.right),height:n.height-pt(i.top)-pt(i.bottom)}}function ds(t){const n=jr(t),i=t.columns||1,r=pt(t.columnGap||0);return i===1?n.width:(n.width-r)/2}const hs=Ct([]),wi=Ct(1),vs=Ct(1),Lt=Ct({format:fs.A4,margins:Ir,orientation:"portrait",columns:1,columnGap:10}),Ji=Ct(100);Vr(Lt,t=>Xr(t));Vr(Lt,t=>jr(t));Vr(Lt,t=>ds(t));const ps=Ct(16),zr=Ct("Arial"),Mr=Ct(1.5),Tr=Ct(0),Lr=Ct(12),Vn=[8,9,10,11,12,14,16,18,20,24,28,32,36,48,72],ta=["Arial","Times New Roman","Georgia","Verdana","Courier New","Trebuchet MS","Comic Sans MS","Impact","Palatino Linotype","Garamond"],na=[{value:1,label:"Single"},{value:1.15,label:"1.15"},{value:1.5,label:"1.5"},{value:2,label:"Double"},{value:2.5,label:"2.5"},{value:3,label:"Triple"}],ia=[{value:-1,label:"Tight"},{value:0,label:"Normal"},{value:.5,label:"Wide"},{value:1,label:"Wider"},{value:2,label:"Widest"}],ra=[{value:0,label:"None"},{value:6,label:"Small"},{value:12,label:"Medium"},{value:18,label:"Large"},{value:24,label:"Extra Large"}];var la=Se('<div class="dropdown-menu heading-dropdown-menu svelte-1dqac8y"><button>Normal text</button> <button>Heading 1</button> <button>Heading 2</button> <button>Heading 3</button> <button>Heading 4</button> <div class="heading-divider svelte-1dqac8y"></div> <button>Quote</button></div>'),sa=Se("<option> </option>"),oa=Se("<option> </option>"),aa=Se("<button> </button>"),ca=Se("<button> </button>"),ua=Se("<button> </button>"),fa=Se('<div class="dropdown-menu spacing-menu svelte-1dqac8y"><div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Line Height</label> <div class="dropdown-options spacing-options svelte-1dqac8y"></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Letter Spacing</label> <div class="dropdown-options spacing-options svelte-1dqac8y"></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Paragraph Spacing</label> <div class="dropdown-options spacing-options svelte-1dqac8y"></div></div></div>'),da=Se('<div class="dropdown-menu page-settings-menu svelte-1dqac8y"><div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Page Size</label> <div class="dropdown-options svelte-1dqac8y"><button>A4</button> <button>A5</button> <button>Letter</button> <button>Legal</button> <button>US Textbook</button></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Orientation</label> <div class="dropdown-options svelte-1dqac8y"><button><svg width="16" height="20" viewBox="0 0 16 20" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="14" height="18" rx="1"></rect></svg> Portrait</button> <button><svg width="20" height="16" viewBox="0 0 20 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="18" height="14" rx="1"></rect></svg> Landscape</button></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Margins</label> <div class="dropdown-options margins-options svelte-1dqac8y"><button><svg width="24" height="30" viewBox="0 0 24 30" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="22" height="28" rx="1"></rect><rect x="4" y="4" width="16" height="22" fill="#e0e0e0" stroke="none"></rect></svg> Normal</button> <button><svg width="24" height="30" viewBox="0 0 24 30" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="22" height="28" rx="1"></rect><rect x="2" y="2" width="20" height="26" fill="#e0e0e0" stroke="none"></rect></svg> Narrow</button> <button><svg width="24" height="30" viewBox="0 0 24 30" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="22" height="28" rx="1"></rect><rect x="6" y="6" width="12" height="18" fill="#e0e0e0" stroke="none"></rect></svg> Wide</button></div></div></div>'),ha=Se('<div class="dropdown-menu columns-menu svelte-1dqac8y"><div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Columns</label> <div class="dropdown-options columns-options svelte-1dqac8y"><button><svg width="32" height="40" viewBox="0 0 32 40" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="30" height="38" rx="1"></rect><rect x="4" y="4" width="24" height="32" fill="#e0e0e0" stroke="none"></rect></svg> One</button> <button><svg width="32" height="40" viewBox="0 0 32 40" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="30" height="38" rx="1"></rect><rect x="4" y="4" width="11" height="32" fill="#e0e0e0" stroke="none"></rect><rect x="17" y="4" width="11" height="32" fill="#e0e0e0" stroke="none"></rect></svg> Two</button></div></div></div>'),va=Se('<div class="toolbar svelte-1dqac8y"><div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Undo (Ctrl+Z)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Redo (Ctrl+Y)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><div class="dropdown-wrapper svelte-1dqac8y"><button title="Text style"><span class="heading-btn-label svelte-1dqac8y"> </span> <svg class="dropdown-arrow svelte-1dqac8y" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"></path></svg></button> <!></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><select class="toolbar-select font-family-select svelte-1dqac8y" title="Font family"></select> <button class="toolbar-btn font-size-btn svelte-1dqac8y" title="Decrease font size"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M5.12 14L7.5 7.67 9.87 14H5.12zM6.5 5L1 19h2.25l1.12-3h6.25l1.12 3H14L8.5 5h-2z"></path><path d="M18 7h-4v2h4v-2z"></path></svg></button> <select class="toolbar-select font-size-select svelte-1dqac8y" title="Font size"></select> <button class="toolbar-btn font-size-btn svelte-1dqac8y" title="Increase font size"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M5.12 14L7.5 7.67 9.87 14H5.12zM6.5 5L1 19h2.25l1.12-3h6.25l1.12 3H14L8.5 5h-2z"></path><path d="M20 9h-2v2h-2v2h2v2h2v-2h2v-2h-2V9z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Bold (Ctrl+B)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Italic (Ctrl+I)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Underline (Ctrl+U)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Strikethrough"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"></path></svg></button> <div class="color-picker-wrapper svelte-1dqac8y"><input type="color" class="color-input svelte-1dqac8y" value="#000000" title="Text color"/> <svg class="color-icon svelte-1dqac8y" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11 2L5.5 16h2.25l1.12-3h6.25l1.12 3h2.25L13 2h-2zm-1.38 9L12 4.67 14.38 11H9.62z"></path><rect x="5" y="18" width="14" height="3" fill="currentColor"></rect></svg></div> <div class="color-picker-wrapper svelte-1dqac8y"><input type="color" class="color-input svelte-1dqac8y" value="#FFFF00" title="Highlight color"/> <svg class="color-icon svelte-1dqac8y" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z"></path><rect x="4" y="18" width="14" height="3" fill="#FFFF00"></rect></svg></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Align left"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Align center"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Align right"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Justify"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zM3 3v2h18V3H3z"></path></svg></button> <div class="dropdown-wrapper svelte-1dqac8y"><button title="Line and paragraph spacing"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M6 7h2.5L5 3.5 1.5 7H4v10H1.5L5 20.5 8.5 17H6V7zm4-2v2h12V5H10zm0 14h12v-2H10v2zm0-6h12v-2H10v2z"></path></svg></button> <!></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Bulleted list"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Numbered list"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Insert image"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group page-controls svelte-1dqac8y"><div class="dropdown-wrapper svelte-1dqac8y"><button title="Page settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"></path></svg></button> <!></div> <div class="dropdown-wrapper svelte-1dqac8y"><button title="Columns"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="7" height="16" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><rect x="13" y="4" width="7" height="16" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button> <!></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group zoom-controls svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Zoom out"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"></path></svg></button> <select class="toolbar-select zoom-select svelte-1dqac8y"><option>50%</option><option>75%</option><option>100%</option><option>125%</option><option>150%</option><option>200%</option></select> <button class="toolbar-btn svelte-1dqac8y" title="Zoom in"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm.5-7H9v2H7v1h2v2h1v-2h2V9h-2z"></path></svg></button></div> <div class="toolbar-spacer svelte-1dqac8y"></div> <div class="toolbar-group page-info svelte-1dqac8y"><span class="page-indicator svelte-1dqac8y"> </span></div></div>');function pa(t,n){lr(n,!0);const i=()=>qe(ps,"$fontSize",R),r=()=>qe(zr,"$fontFamily",R),o=()=>qe(Mr,"$lineHeight",R),a=()=>qe(Tr,"$letterSpacing",R),p=()=>qe(Lr,"$paragraphSpacing",R),h=()=>qe(Lt,"$pageConfig",R),c=()=>qe(Ji,"$zoomLevel",R),_=()=>qe(wi,"$currentPage",R),C=()=>qe(vs,"$totalPages",R),[R,T]=Ur();let L=bl(n,"canUndo",3,!1),B=bl(n,"canRedo",3,!1),N=V(!1),d=V(!1),w=V(!1),P=V(!1),ae=V("p");us(()=>{const W=Z=>{Z.target.closest(".dropdown-wrapper")||(f(N,!1),f(d,!1),f(w,!1),f(P,!1))};return document.addEventListener("click",W),()=>document.removeEventListener("click",W)});const ye={p:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",blockquote:"Quote"};function fe(W){f(ae,W,!0),he("formatBlock",W),f(w,!1)}function Ee(W){Ji.update(Z=>Math.min(200,Math.max(25,Z+W)))}function y(W){Ji.set(W)}function O(W){Lt.update(Z=>({...Z,format:fs[W]}))}function j(W){const Z={default:Ir,narrow:yl,wide:ml};Lt.update(ue=>({...ue,margins:Z[W]}))}function Y(W){Lt.update(Z=>({...Z,columns:W}))}function he(W,Z){n.onFormat(W,Z)}function ni(W){he("fontSize",W.toString())}function Pi(){const W=Vn.indexOf(i());W<Vn.length-1&&ni(Vn[W+1])}function fr(){const W=Vn.indexOf(i());W>0&&ni(Vn[W-1])}function Hi(W){zr.set(W)}var ii=va(),Ln=A(ii),En=A(Ln);En.__click=()=>he("undo");var nt=x(En,2);nt.__click=()=>he("redo");var Oi=x(Ln,4),un=A(Oi),fn=A(un);let Pn;fn.__click=()=>{f(w,!e(w)),f(N,!1),f(d,!1)};var Ai=A(fn),qt=A(Ai),qi=x(fn,2);{var Ri=W=>{var Z=la();Z.__click=_n=>_n.stopPropagation();var ue=A(Z);let ze;ue.__click=()=>fe("p");var me=x(ue,2);let at;me.__click=()=>fe("h1");var Ze=x(me,2);let ct;Ze.__click=()=>fe("h2");var Le=x(Ze,2);let Me;Le.__click=()=>fe("h3");var pe=x(Le,2);let We;pe.__click=()=>fe("h4");var it=x(pe,4);let $t;it.__click=()=>fe("blockquote"),Ye(()=>{ze=Q(ue,1,"heading-option style-p svelte-1dqac8y",null,ze,{selected:e(ae)==="p"}),at=Q(me,1,"heading-option style-h1 svelte-1dqac8y",null,at,{selected:e(ae)==="h1"}),ct=Q(Ze,1,"heading-option style-h2 svelte-1dqac8y",null,ct,{selected:e(ae)==="h2"}),Me=Q(Le,1,"heading-option style-h3 svelte-1dqac8y",null,Me,{selected:e(ae)==="h3"}),We=Q(pe,1,"heading-option style-h4 svelte-1dqac8y",null,We,{selected:e(ae)==="h4"}),$t=Q(it,1,"heading-option style-blockquote svelte-1dqac8y",null,$t,{selected:e(ae)==="blockquote"})}),ke(W,Z)};Ht(qi,W=>{e(w)&&W(Ri)})}var ri=x(Oi,4),Re=A(ri);Re.__change=W=>Hi(W.currentTarget.value),sn(Re,21,()=>ta,mn,(W,Z)=>{var ue=sa(),ze=A(ue),me={};Ye(()=>{os(ue,`font-family: ${e(Z)??""}`),Vt(ze,e(Z)),me!==(me=e(Z))&&(ue.value=(ue.__value=e(Z))??"")}),ke(W,ue)});var ot;vr(Re);var Hn=x(Re,2);Hn.__click=fr;var gt=x(Hn,2);gt.__change=W=>ni(parseInt(W.currentTarget.value)),sn(gt,21,()=>Vn,mn,(W,Z)=>{var ue=oa(),ze=A(ue),me={};Ye(()=>{Vt(ze,e(Z)),me!==(me=e(Z))&&(ue.value=(ue.__value=e(Z))??"")}),ke(W,ue)});var li;vr(gt);var je=x(gt,2);je.__click=Pi;var dn=x(ri,4),hn=A(dn);hn.__click=()=>he("bold");var si=x(hn,2);si.__click=()=>he("italic");var Zt=x(si,2);Zt.__click=()=>he("underline");var $e=x(Zt,2);$e.__click=()=>he("strikeThrough");var le=x($e,2),Rt=A(le);Rt.__change=W=>he("foreColor",W.currentTarget.value);var _t=x(le,2),we=A(_t);we.__change=W=>he("hiliteColor",W.currentTarget.value);var Ce=x(dn,4),Ie=A(Ce);Ie.__click=()=>he("justifyLeft");var On=x(Ie,2);On.__click=()=>he("justifyCenter");var bt=x(On,2);bt.__click=()=>he("justifyRight");var U=x(bt,2);U.__click=()=>he("justifyFull");var It=x(U,2),vn=A(It);let Qt;vn.__click=()=>{f(P,!e(P)),f(N,!1),f(d,!1),f(w,!1)};var pn=x(vn,2);{var Fi=W=>{var Z=fa();Z.__click=Le=>Le.stopPropagation();var ue=A(Z),ze=x(A(ue),2);sn(ze,21,()=>na,mn,(Le,Me)=>{var pe=aa();let We;pe.__click=()=>Mr.set(e(Me).value);var it=A(pe);Ye(()=>{We=Q(pe,1,"dropdown-option spacing-option svelte-1dqac8y",null,We,{selected:o()===e(Me).value}),Vt(it,e(Me).label)}),ke(Le,pe)});var me=x(ue,2),at=x(A(me),2);sn(at,21,()=>ia,mn,(Le,Me)=>{var pe=ca();let We;pe.__click=()=>Tr.set(e(Me).value);var it=A(pe);Ye(()=>{We=Q(pe,1,"dropdown-option spacing-option svelte-1dqac8y",null,We,{selected:a()===e(Me).value}),Vt(it,e(Me).label)}),ke(Le,pe)});var Ze=x(me,2),ct=x(A(Ze),2);sn(ct,21,()=>ra,mn,(Le,Me)=>{var pe=ua();let We;pe.__click=()=>Lr.set(e(Me).value);var it=A(pe);Ye(()=>{We=Q(pe,1,"dropdown-option spacing-option svelte-1dqac8y",null,We,{selected:p()===e(Me).value}),Vt(it,e(Me).label)}),ke(Le,pe)}),ke(W,Z)};Ht(pn,W=>{e(P)&&W(Fi)})}var oi=x(Ce,4),yt=A(oi);yt.__click=()=>he("insertUnorderedList");var ai=x(yt,2);ai.__click=()=>he("insertOrderedList");var Ke=x(oi,4),Ft=A(Ke);Ft.__click=()=>he("insertImage");var ci=x(Ke,4),ui=A(ci),Pe=A(ui);let Jt;Pe.__click=()=>{f(N,!e(N)),f(d,!1)};var zt=x(Pe,2);{var Bi=W=>{var Z=da();Z.__click=Wt=>Wt.stopPropagation();var ue=A(Z),ze=x(A(ue),2),me=A(ze);let at;me.__click=()=>O("A4");var Ze=x(me,2);let ct;Ze.__click=()=>O("A5");var Le=x(Ze,2);let Me;Le.__click=()=>O("LETTER");var pe=x(Le,2);let We;pe.__click=()=>O("LEGAL");var it=x(pe,2);let $t;it.__click=()=>O("TEXTBOOK");var _n=x(ue,2),Wi=x(A(_n),2),Bn=A(Wi);let Mt;Bn.__click=()=>Lt.update(Wt=>({...Wt,orientation:"portrait"}));var pi=x(Bn,2);let Dn;pi.__click=()=>Lt.update(Wt=>({...Wt,orientation:"landscape"}));var Ni=x(_n,2),Vi=x(A(Ni),2),tn=A(Vi);let gi;tn.__click=()=>j("default");var _i=x(tn,2);let Ui;_i.__click=()=>j("narrow");var Xi=x(_i,2);let ji;Xi.__click=()=>j("wide"),Ye(()=>{at=Q(me,1,"dropdown-option svelte-1dqac8y",null,at,{selected:h().format.name==="A4"}),ct=Q(Ze,1,"dropdown-option svelte-1dqac8y",null,ct,{selected:h().format.name==="A5"}),Me=Q(Le,1,"dropdown-option svelte-1dqac8y",null,Me,{selected:h().format.name==="Letter"}),We=Q(pe,1,"dropdown-option svelte-1dqac8y",null,We,{selected:h().format.name==="Legal"}),$t=Q(it,1,"dropdown-option svelte-1dqac8y",null,$t,{selected:h().format.name==="US Textbook"}),Mt=Q(Bn,1,"dropdown-option orientation-option svelte-1dqac8y",null,Mt,{selected:h().orientation==="portrait"}),Dn=Q(pi,1,"dropdown-option orientation-option svelte-1dqac8y",null,Dn,{selected:h().orientation==="landscape"}),gi=Q(tn,1,"dropdown-option margin-option svelte-1dqac8y",null,gi,{selected:h().margins===Ir}),Ui=Q(_i,1,"dropdown-option margin-option svelte-1dqac8y",null,Ui,{selected:h().margins===yl}),ji=Q(Xi,1,"dropdown-option margin-option svelte-1dqac8y",null,ji,{selected:h().margins===ml})}),ke(W,Z)};Ht(zt,W=>{e(N)&&W(Bi)})}var Di=x(ui,2),en=A(Di);let gn;en.__click=()=>{f(d,!e(d)),f(N,!1)};var An=x(en,2);{var ee=W=>{var Z=ha();Z.__click=Le=>Le.stopPropagation();var ue=A(Z),ze=x(A(ue),2),me=A(ze);let at;me.__click=()=>{Y(1),f(d,!1)};var Ze=x(me,2);let ct;Ze.__click=()=>{Y(2),f(d,!1)},Ye(()=>{at=Q(me,1,"dropdown-option column-option svelte-1dqac8y",null,at,{selected:h().columns===1}),ct=Q(Ze,1,"dropdown-option column-option svelte-1dqac8y",null,ct,{selected:h().columns===2})}),ke(W,Z)};Ht(An,W=>{e(d)&&W(ee)})}var qn=x(ci,4),Bt=A(qn);Bt.__click=()=>Ee(-10);var Dt=x(Bt,2);Dt.__change=W=>y(parseInt(W.currentTarget.value));var Rn=A(Dt);Rn.value=Rn.__value="50";var fi=x(Rn);fi.value=fi.__value="75";var ve=x(fi);ve.value=ve.__value="100";var di=x(ve);di.value=di.__value="125";var mt=x(di);mt.value=mt.__value="150";var hi=x(mt);hi.value=hi.__value="200";var $i;vr(Dt);var Fn=x(Dt,2);Fn.__click=()=>Ee(10);var vi=x(qn,4),de=A(vi),dr=A(de);Ye(()=>{En.disabled=!L(),nt.disabled=!B(),Pn=Q(fn,1,"toolbar-btn heading-dropdown-btn svelte-1dqac8y",null,Pn,{active:e(w)}),Vt(qt,ye[e(ae)]),ot!==(ot=r())&&(Re.value=(Re.__value=r())??"",Qi(Re,r())),li!==(li=i())&&(gt.value=(gt.__value=i())??"",Qi(gt,i())),Qt=Q(vn,1,"toolbar-btn svelte-1dqac8y",null,Qt,{active:e(P)}),Jt=Q(Pe,1,"toolbar-btn svelte-1dqac8y",null,Jt,{active:e(N)}),gn=Q(en,1,"toolbar-btn svelte-1dqac8y",null,gn,{active:e(d)}),$i!==($i=c())&&(Dt.value=(Dt.__value=c())??"",Qi(Dt,c())),Vt(dr,`Page ${_()??""} of ${C()??""}`)}),ke(t,ii),sr(),T()}Wr(["click","change"]);const Un="ï¿¼",wl="ï¿½";function kt(){return{align:"left",listType:"none",blockType:"p",indent:0}}function _r(t){return{paragraphs:[...t.paragraphs],paragraphMeta:t.paragraphMeta.map(n=>({...n})),images:t.images.map(n=>({...n})),cursorPara:t.cursorPara,cursorOffset:t.cursorOffset,selectionStart:t.selectionStart?{...t.selectionStart}:null,selectionEnd:t.selectionEnd?{...t.selectionEnd}:null}}function ga(t,n){if(t.paragraphs.length!==n.paragraphs.length||t.images.length!==n.images.length)return!1;for(let i=0;i<t.paragraphs.length;i++)if(t.paragraphs[i]!==n.paragraphs[i])return!1;for(let i=0;i<t.paragraphMeta.length;i++){const r=t.paragraphMeta[i],o=n.paragraphMeta[i];if(r.align!==o.align||r.listType!==o.listType||r.blockType!==o.blockType||r.indent!==o.indent||r.fontSize!==o.fontSize||r.textColor!==o.textColor)return!1}for(let i=0;i<t.images.length;i++){const r=t.images[i],o=n.images[i];if(r.id!==o.id||r.width!==o.width||r.height!==o.height||r.wrapStyle!==o.wrapStyle||r.x!==o.x||r.y!==o.y)return!1}return!0}function _a(t=100){let n=[],i=[];return{push(r){const o=_r(r);n.length>0&&ga(n[n.length-1],o)||(n.push(o),i=[],n.length>t&&n.shift())},undo(){if(n.length<2)return null;const r=n.pop();i.push(r);const o=n[n.length-1];return _r(o)},redo(){if(i.length===0)return null;const r=i.pop();return n.push(r),_r(r)},canUndo(){return n.length>=2},canRedo(){return i.length>0},clear(){n=[],i=[]},size(){return n.length}}}function ba(t,n=300){let i=null,r=null;return{schedulePush(o){r=o,i!==null&&clearTimeout(i),i=setTimeout(()=>{r&&(t.push(r),r=null),i=null},n)},cancelPush(){i!==null&&(clearTimeout(i),i=null),r=null},flushPush(){i!==null&&(clearTimeout(i),i=null),r&&(t.push(r),r=null)}}}var ya=Se("<canvas></canvas>"),ma=Se('<div class="popup-overlay svelte-1h8xysy"><div class="popup-dialog svelte-1h8xysy"><div class="popup-header svelte-1h8xysy"><h3 class="svelte-1h8xysy">Insert Image</h3> <button class="popup-close svelte-1h8xysy">&times;</button></div> <div class="popup-content svelte-1h8xysy"><div class="input-section svelte-1h8xysy"><label for="image-url" class="svelte-1h8xysy">Image URL</label> <div class="url-input-row svelte-1h8xysy"><input id="image-url" type="text" placeholder="https://example.com/image.jpg" class="svelte-1h8xysy"/> <button class="svelte-1h8xysy">Insert</button></div></div> <div class="divider svelte-1h8xysy"><span class="svelte-1h8xysy">or</span></div>  <div><svg width="48" height="48" viewBox="0 0 24 24" fill="#9aa0a6"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg> <p class="svelte-1h8xysy">Drag and drop an image here</p> <p class="small svelte-1h8xysy">or click to select from your computer</p></div> <input id="file-input" type="file" accept="image/*" class="file-input svelte-1h8xysy"/> <p class="tip svelte-1h8xysy">Tip: You can also paste an image directly in the editor (Ctrl+V)</p></div></div></div>'),wa=Se('<div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">Horizontal Position</div> <div class="image-options-buttons svelte-1h8xysy"><button title="Align left"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="2" y="6" width="10" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button> <button title="Center"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="7" y="6" width="10" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button> <button title="Align right"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="12" y="6" width="10" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button></div></div>'),xa=Se('<div class="image-options-overlay svelte-1h8xysy"><div class="image-options-popup svelte-1h8xysy"><div class="image-options-header svelte-1h8xysy"><span>Layout Options</span> <button class="popup-close svelte-1h8xysy">&times;</button></div> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">In Line with Text</div> <div class="image-options-buttons svelte-1h8xysy"><button title="In line with text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><line x1="2" y1="8" x2="8" y2="8" stroke="currentColor" stroke-width="1.5"></line><rect x="9" y="5" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="16" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="14" x2="22" y2="14" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="18" x2="22" y2="18" stroke="currentColor" stroke-width="1.5"></line></svg> <span>In Line</span></button></div></div> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">With Text Wrapping</div> <div class="image-options-buttons wrap-buttons svelte-1h8xysy"><button title="Square - text wraps in a square around the image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="2" y="4" width="8" height="8" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="12" y1="5" x2="22" y2="5" stroke="currentColor" stroke-width="1.5"></line><line x1="12" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="12" y1="11" x2="22" y2="11" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="15" x2="22" y2="15" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="19" x2="22" y2="19" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Square</span></button> <button title="Tight - text wraps tightly around the image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M3 5 L9 5 L9 11 L3 11 Z" stroke="currentColor" stroke-width="1.5" fill="none"></path><line x1="11" y1="5" x2="21" y2="5" stroke="currentColor" stroke-width="1.5"></line><line x1="11" y1="8" x2="21" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="11" y1="11" x2="21" y2="11" stroke="currentColor" stroke-width="1.5"></line><line x1="3" y1="14" x2="21" y2="14" stroke="currentColor" stroke-width="1.5"></line><line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Tight</span></button> <button title="Through - text flows through the image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M4 4 L10 4 L10 10 L4 10 Z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-dasharray="2,1"></path><line x1="12" y1="5" x2="20" y2="5" stroke="currentColor" stroke-width="1.5"></line><line x1="12" y1="9" x2="20" y2="9" stroke="currentColor" stroke-width="1.5"></line><line x1="4" y1="14" x2="20" y2="14" stroke="currentColor" stroke-width="1.5"></line><line x1="4" y1="18" x2="20" y2="18" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Through</span></button> <button title="Top and Bottom - text above and below only"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><line x1="2" y1="4" x2="22" y2="4" stroke="currentColor" stroke-width="1.5"></line><rect x="6" y="8" width="12" height="8" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="2" y1="20" x2="22" y2="20" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Top/Bottom</span></button> <button title="Behind Text - image appears behind text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="6" y="6" width="12" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none" opacity="0.5"></rect><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Behind</span></button> <button title="In Front of Text - image appears in front of text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5" opacity="0.5"></line><line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5" opacity="0.5"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor" stroke-width="1.5" opacity="0.5"></line><rect x="6" y="6" width="12" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="white"></rect></svg> <span>In Front</span></button></div></div> <!> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">Position</div> <div class="position-radio-group svelte-1h8xysy"><label class="radio-option svelte-1h8xysy"><input type="radio" name="positionMode" class="svelte-1h8xysy"/> <span>Move with text</span></label> <label class="radio-option svelte-1h8xysy"><input type="radio" name="positionMode" class="svelte-1h8xysy"/> <span>Fix position on page</span></label></div></div> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">Edit</div> <div class="image-options-buttons svelte-1h8xysy"><button class="layout-btn svelte-1h8xysy" title="Crop image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"></path></svg> <span>Crop</span></button> <button class="layout-btn svelte-1h8xysy" title="Reset crop"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></svg> <span>Reset</span></button></div></div> <button class="delete-image-btn svelte-1h8xysy"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg> Delete Image</button></div></div>'),ka=Se('<div class="crop-mode-bar svelte-1h8xysy"><span>Crop Mode - Drag handles to adjust crop area</span> <div class="crop-mode-buttons svelte-1h8xysy"><button class="crop-btn done svelte-1h8xysy">Done</button> <button class="crop-btn reset svelte-1h8xysy">Reset</button> <button class="crop-btn cancel svelte-1h8xysy">Cancel</button></div></div>'),Sa=Se('<div class="editor-wrapper svelte-1h8xysy"><!> <canvas class="measure-canvas svelte-1h8xysy"></canvas>  <textarea class="hidden-input svelte-1h8xysy" autocomplete="off"></textarea> <div class="editor-container svelte-1h8xysy"><div class="canvas-container svelte-1h8xysy"></div></div> <div class="page-indicator svelte-1h8xysy"> </div> <!> <!> <!></div>');function Ca(t,n){lr(n,!0);const i=()=>qe(ps,"$fontSizeStore",C),r=()=>qe(zr,"$fontFamilyStore",C),o=()=>qe(Mr,"$lineHeightStore",C),a=()=>qe(Tr,"$letterSpacingStore",C),p=()=>qe(Lr,"$paragraphSpacingStore",C),h=()=>qe(Lt,"$pageConfig",C),c=()=>qe(Ji,"$zoomLevel",C),_=()=>qe(wi,"$currentPage",C),[C,R]=Ur();let T,L,B,N,d=V(lt([""])),w=V(lt([kt()])),P=V(lt([])),ae=new Map,ye=V(!1),fe=V(""),Ee=V(!1),y=V(0),O=V(0),j=V(null),Y=V(null);const he=_a(100),{schedulePush:ni,cancelPush:Pi,flushPush:fr}=ba(he,500);let Hi=V(!1),ii=V(!1);function Ln(){return{paragraphs:[...e(d)],paragraphMeta:e(w).map(l=>({...l})),images:e(P).map(l=>({...l})),cursorPara:e(y),cursorOffset:e(O),selectionStart:e(j)?{...e(j)}:null,selectionEnd:e(Y)?{...e(Y)}:null}}function En(l){f(d,[...l.paragraphs],!0),f(w,l.paragraphMeta.map(s=>({...s})),!0),f(P,l.images.map(s=>({...s})),!0),f(y,l.cursorPara,!0),f(O,l.cursorOffset,!0),f(j,l.selectionStart?{...l.selectionStart}:null,!0),f(Y,l.selectionEnd?{...l.selectionEnd}:null,!0),ve(),de()}function nt(){fr(),he.push(Ln()),un()}function Oi(){ni(Ln()),un()}function un(){f(Hi,he.canUndo(),!0),f(ii,he.canRedo(),!0)}function fn(){Pi();const l=he.undo();l&&(En(l),un())}function Pn(){Pi();const l=he.redo();l&&(En(l),un())}let Ai=be(i),qt=be(r),qi=be(o),Ri=be(a),ri=be(p),Re=V(!1),ot=V(!1),Hn=V(!1),gt=V(!1),li=be(()=>Xr(h())),je=be(()=>jr(h())),dn=be(()=>e(li).height*c()/100),hn=be(()=>e(li).width*c()/100),si=be(()=>e(je).height*c()/100),Zt=be(()=>e(je).width*c()/100),$e=be(()=>pt(h().margins.top)*c()/100),le=be(()=>pt(h().margins.left)*c()/100),Rt=be(()=>h().columns||1),_t=be(()=>pt(h().columnGap||10)*c()/100),we=be(()=>ds(h())*c()/100),Ce=be(()=>e(Ai)*c()/100),Ie=be(()=>e(Ce)*e(qi)),On=be(()=>Math.floor(e(si)/e(Ie))),bt=be(()=>e(On)*e(Rt)),U=V(null),It=V(!1),vn=V(lt({x:0,y:0})),Qt=V(!1),pn=V(null),Fi=V(0),oi=V(0),yt=V(0),ai=V(0),Ke=V(!1),Ft=V(null),ci=V(0),ui=V(0),Pe=V(lt({top:0,right:0,bottom:0,left:0})),Jt=V(lt({top:0,right:0,bottom:0,left:0})),zt=V(!1),Bi=V(0),Di=V(0),en=V(0),gn=V(0),An=V(lt([])),ee=V(lt([])),qn=be(()=>Math.max(1,Math.ceil(e(ee).length/e(bt)))),Bt=[];function Dt(){return`${e(ot)?"italic ":""}${e(Re)?"bold ":""}${e(Ce)}px ${e(qt)}`}function Rn(l,s){if(!N)return l.length*e(Ce)*.5;const g=N.getContext("2d");if(!g)return l.length*e(Ce)*.5;let u=e(Ce),b=e(Re)?"bold ":"",v=e(ot)?"italic ":"";if(s){const D=s.fontSize?s.fontSize*c()/100:e(Ce);switch(s.blockType){case"h1":u=D*2,b="bold ";break;case"h2":u=D*1.5,b="bold ";break;case"h3":u=D*1.17,b="bold ";break;case"h4":u=D,b="bold ";break;case"blockquote":u=D,v="italic ";break;default:u=D}}g.font=`${v}${b}${u}px ${e(qt)}`;const q=g.measureText(l).width,k=e(Ri)*c()/100;return q+(l.length>0?(l.length-1)*k:0)}function fi(l,s,g,u){const b=e(w)[l]||kt(),v=b.fontSize?b.fontSize*c()/100:e(Ce);let q=v;switch(b.blockType){case"h1":q=v*2;break;case"h2":q=v*1.5;break;case"h3":q=v*1.17;break}const k=b.listType!=="none"?q*1.5:0,D=u?u.width+10:0,m=(e(we)>0?e(we):e(Zt)>0?e(Zt):500)-k-D;if(!s)return[{paraIndex:l,startOffset:0,endOffset:0,text:"",meta:b,listNumber:g,floatReduction:u}];const F=[];let H=0;for(;H<s.length;){const $=s.substring(H);if(Rn($,b)<=m){F.push({paraIndex:l,startOffset:H,endOffset:s.length,text:$,meta:b,listNumber:F.length===0?g:void 0,floatReduction:u});break}let X=H,z=H;for(let M=H+1;M<=s.length;M++){const E=s.substring(H,M),S=Rn(E,b);if(M>H&&s[M-1]===" "&&(z=M),S>m){z>H?X=z:X=Math.max(H+1,M-1);break}X=M}for(X<=H&&(X=H+1),F.push({paraIndex:l,startOffset:H,endOffset:X,text:s.substring(H,X),meta:b,listNumber:F.length===0?g:void 0,floatReduction:u}),H=X;H<s.length&&s[H]===" ";)H++}return F}function ve(){const l=[],s=[];let g=0;const u=m=>m==="square"||m==="tight"||m==="through";for(let m=0;m<e(d).length;m++){const F=e(d)[m];if(F.startsWith(Un)){const H=F.substring(1),$=e(P).find(X=>X.id===H);if($&&u($.wrapStyle)){const X=$.width*c()/100,z=$.height*c()/100,M=Math.ceil(z/e(Ie));if($.y!==void 0){const E=e(Ai)*e(qi),S=Math.floor($.y/E);let ie;if($.horizontalAlign==="right")ie="right";else if($.horizontalAlign==="center"){const G=e(je).width/2;ie=($.x??0)+$.width/2<G?"left":"right"}else ie="left";s.push({id:H,startLine:S,endLine:S+M,width:X,side:ie})}}}}for(let m=0;m<e(d).length;m++){const F=e(w)[m]||kt(),H=e(d)[m];if(H===wl){const S=l.length%e(bt),ie=S===0?0:e(bt)-S;l.push({paraIndex:m,startOffset:0,endOffset:1,text:"",meta:F,isPageBreak:!0});for(let G=1;G<ie;G++)l.push({paraIndex:m,startOffset:0,endOffset:1,text:"",meta:F,isPageBreak:!0});continue}if(H.startsWith(Un)){const E=H.substring(1),S=e(P).find(ie=>ie.id===E);if(S){const ie=S.width*c()/100,G=S.height*c()/100,J=Math.ceil(G/e(Ie));if(u(S.wrapStyle)){if(S.y===void 0){const K=l.length;if(!s.find(ce=>ce.id===E)){let ce;if(S.horizontalAlign==="right")ce="right";else if(S.horizontalAlign==="center"){const Ne=e(je).width/2;ce=(S.x??0)+S.width/2<Ne?"left":"right"}else ce="left";s.push({id:E,startLine:K,endLine:K+J,width:ie,side:ce})}}l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:J})}else if(S.wrapStyle==="inline"){l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:J});for(let K=1;K<J;K++)l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:0})}else if(S.wrapStyle==="top-bottom"){l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:J});for(let K=1;K<J;K++)l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:0})}else if(S.wrapStyle==="behind"||S.wrapStyle==="in-front")l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:0});else{l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E,imageHeight:J});for(let K=1;K<J;K++)l.push({paraIndex:m,startOffset:0,endOffset:H.length,text:"",meta:F,isImage:!0,imageId:E})}}continue}let $;F.listType==="numbered"?(g++,$=g):(F.listType==="bullet"&&($=void 0),g=0);const X=l.length;let z;for(const E of s)if(X>=E.startLine&&X<E.endLine){z={side:E.side,width:E.width};break}const M=fi(m,H,$,z);for(let E=0;E<M.length;E++){const S=l.length;let ie;for(const G of s)if(S>=G.startLine&&S<G.endLine){ie={side:G.side,width:G.width};break}M[E].floatReduction=ie,E===M.length-1&&(M[E].isLastLineOfParagraph=!0),l.push(M[E])}}const b=e(ri)*c()/100;let v=0,q=0,k=0;const D=e(si);for(let m=0;m<l.length;m++){const F=l[m];let H=e(Ie);F.isImage&&F.imageHeight&&(H=F.imageHeight*e(Ie));const $=F.isLastLineOfParagraph?b:0;v+H>D&&!F.isPageBreak&&(e(Rt)>1&&k<e(Rt)-1?(k++,v=0):(q++,k=0,v=0)),F.pageIndex=q,F.yPosition=v,F.columnIndex=k,v+=H+$,F.isPageBreak&&(q++,k=0,v=0)}f(An,s,!0),f(ee,l,!0);const I=l.reduce((m,F)=>Math.max(m,F.pageIndex??0),0);vs.set(I+1),di()}function di(){const l=[];for(let s=0;s<e(d).length;s++){const u=(e(w)[s]||kt()).blockType;if(u.startsWith("h")){const b=parseInt(u[1]);b>=1&&b<=4&&l.push({id:`heading-${s}`,text:e(d)[s],level:b,paraIndex:s})}}hs.set(l)}function mt(l,s){for(let u=0;u<e(ee).length;u++){const b=e(ee)[u];if(b.paraIndex===l&&s>=b.startOffset&&s<=b.endOffset)return{line:u,col:s-b.startOffset}}const g=e(ee).length-1;return{line:g,col:e(ee)[g]?.text.length||0}}function hi(l,s){if(l<0||l>=e(ee).length)return{para:e(d).length-1,offset:e(d)[e(d).length-1].length};const g=e(ee)[l];return{para:g.paraIndex,offset:g.startOffset+Math.min(s,g.text.length)}}function $i(l){if(l<0||l>=e(d).length)return;f(y,l,!0),f(O,0),f(j,null),f(Y,null);const s=mt(e(y),e(O)),g=Math.floor(s.line/e(bt))+1;wi.set(g),me(),B?.focus(),de()}us(()=>{B?.focus(),requestAnimationFrame(()=>{ve(),de(),he.push(Ln()),un()});const l=u=>{!T?.contains(document.activeElement)&&document.activeElement!==B||_n(u)},s=u=>{e(Qt)?Ui(u.clientX,u.clientY):e(Ke)&&e(Ft)?bs(u.clientX,u.clientY):e(zt)&&ws(u.clientX,u.clientY)},g=()=>{e(Qt)&&Xi(),e(Ft)&&ys(),e(zt)&&xs()};return document.addEventListener("paste",l),document.addEventListener("mousemove",s),document.addEventListener("mouseup",g),()=>{document.removeEventListener("paste",l),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",g)}}),xr(()=>{e(d)&&c()&&h()&&e(Zt)>0&&ve()}),xr(()=>{e(ee).length>0&&e(y)!==void 0&&de()});function Fn(l,s,g,u,b,v){const q=s.width*c()/100,k=s.cropTop||0,D=s.cropRight||0,I=s.cropBottom||0,m=s.cropLeft||0,F=m/100*g.naturalWidth,H=k/100*g.naturalHeight,$=(100-m-D)/100*g.naturalWidth,X=(100-k-I)/100*g.naturalHeight,z=$/X,M=q,E=q/z;if(s.wrapStyle==="behind"&&(l.globalAlpha=.5),l.drawImage(g,F,H,$,X,u,b,M,E),l.globalAlpha=1,e(U)===s.id){l.strokeStyle=e(zt)?"#4caf50":"#1a73e8",l.lineWidth=2,l.setLineDash([]),l.strokeRect(u-2,b-2,M+4,E+4);const S=8;l.fillStyle=e(Ke)?"#ff9800":e(zt)?"#4caf50":"#1a73e8",l.fillRect(u-S/2,b-S/2,S,S),l.fillRect(u+M-S/2,b-S/2,S,S),l.fillRect(u-S/2,b+E-S/2,S,S),l.fillRect(u+M-S/2,b+E-S/2,S,S),l.fillRect(u+M/2-S/2,b-S/2,S,S),l.fillRect(u+M/2-S/2,b+E-S/2,S,S),l.fillRect(u-S/2,b+E/2-S/2,S,S),l.fillRect(u+M-S/2,b+E/2-S/2,S,S),e(zt)&&(l.fillStyle="rgba(76, 175, 80, 0.2)",l.fillRect(u,b,M,E)),e(Ke)&&(l.strokeStyle="#ff9800",l.lineWidth=2,l.setLineDash([5,5]),l.strokeRect(u,b,M,E),l.setLineDash([]))}else l.strokeStyle="#e0e0e0",l.lineWidth=1,l.setLineDash([]),l.strokeRect(u,b,M,E)}function vi(l,s,g){const u=l.width*c()/100,b=l.wrapStyle==="inline";if(s.pageIndex!==g)return{x:0,y:0,visible:!1};if(!b&&l.x!==void 0&&l.y!==void 0){const m=e(je).height,F=Math.floor(l.y/m);if(F===g){const H=l.y-F*m,$=e(le)+l.x*c()/100,X=e($e)+H*c()/100;return{x:$,y:X,visible:!0}}return{x:0,y:0,visible:!1}}const v=e($e)+(s.yPosition??0),k=(s.columnIndex??0)*(e(we)+e(_t));let D;if(b&&s.meta){const m=s.meta.align;D=m==="center"?"center":m==="right"?"right":"left"}else D=l.horizontalAlign||"left";let I;return D==="center"?I=e(le)+k+(e(we)-u)/2:D==="right"?I=e(le)+k+e(we)-u:I=e(le)+k,{x:I,y:v,visible:!0}}function de(){const l=e(qn);for(let s=0;s<l;s++){const g=Bt[s];if(!g)continue;const u=g.getContext("2d");if(!u)continue;const b=window.devicePixelRatio||1;g.width=e(hn)*b,g.height=e(dn)*b,g.style.width=`${e(hn)}px`,g.style.height=`${e(dn)}px`,u.scale(b,b),u.fillStyle="white",u.fillRect(0,0,e(hn),e(dn)),u.font=Dt(),u.fillStyle="#202124",u.textBaseline="top";const v=e(ee).filter(I=>I.pageIndex===s),q=mt(e(y),e(O));let k=null,D=null;if(e(j)&&e(Y)){const I=mt(e(j).para,e(j).offset),m=mt(e(Y).para,e(Y).offset);I.line<m.line||I.line===m.line&&I.col<=m.col?(k=I,D=m):(k=m,D=I)}for(const I of v){if(!I.isImage||!I.imageId||!I.imageHeight)continue;const m=e(P).find($=>$.id===I.imageId);if(!m||m.wrapStyle!=="behind")continue;const F=ae.get(m.id);if(!F)continue;e(ee).indexOf(I);const H=vi(m,I,s);H.visible&&Fn(u,m,F,H.x,H.y)}for(const I of e(An)){const m=e(P).find(M=>M.id===I.id);if(!m)continue;const F=ae.get(m.id);if(!F)continue;const H=m.width*c()/100;let $,X,z=!1;if(m.x!==void 0&&m.y!==void 0){const M=e(je).height,E=Math.floor(m.y/M);if(E===s){const S=m.y-E*M;$=e(le)+m.x*c()/100,X=e($e)+S*c()/100,z=!0}}else{const M=e(ee)[I.startLine];if(M&&M.pageIndex===s){X=e($e)+(M.yPosition??0);const S=(M.columnIndex??0)*(e(we)+e(_t));$=I.side==="left"?e(le)+S:e(le)+S+e(we)-H,z=!0}}z&&Fn(u,m,F,$,X)}for(const I of v){if(!I.isImage||!I.imageId||!I.imageHeight)continue;const m=e(P).find($=>$.id===I.imageId);if(!m||m.wrapStyle!=="inline"&&m.wrapStyle!=="top-bottom")continue;const F=ae.get(m.id);if(!F)continue;const H=vi(m,I,s);H.visible&&Fn(u,m,F,H.x,H.y)}for(const I of v){if(I.isImage||I.isPageBreak)continue;const m=e($e)+(I.yPosition??0),H=(I.columnIndex??0)*(e(we)+e(_t)),$=I.text,X=I.meta,z=e(ee).indexOf(I),M=X.listType!=="none"?e(Ce)*1.5:0,E=I.floatReduction&&I.floatReduction.side==="left"?I.floatReduction.width+10:0,S=e(le)+H+M+E,ie=X.fontSize?X.fontSize*c()/100:e(Ce);let G=ie,J=e(Re)?"bold ":"",K=e(ot)?"italic ":"";switch(X.blockType){case"h1":G=ie*2,J="bold ";break;case"h2":G=ie*1.5,J="bold ";break;case"h3":G=ie*1.17,J="bold ";break;case"h4":J="bold ";break;case"blockquote":K="italic ";break}const He=`${K}${J}${G}px ${e(qt)}`;u.font=He;const ce=u.measureText($).width,Ne=I.floatReduction?I.floatReduction.width+10:0,Oe=e(we)-M-Ne;let xe=S,Fe=0;const te=$.split(" "),ge=I.endOffset>=e(d)[I.paraIndex].length;switch(X.align){case"center":xe=S+(Oe-ce)/2;break;case"right":xe=S+Oe-ce;break;case"justify":!ge&&te.length>1&&$.trim().length>0&&(Fe=(Oe-ce)/(te.length-1));break}if(k&&D&&z>=k.line&&z<=D.line){u.fillStyle="#b4d7ff";const ne=z===k.line?k.col:0,_e=z===D.line?D.col:$.length,Be=xe+u.measureText($.substring(0,ne)).width,Ae=u.measureText($.substring(ne,_e)).width||5;u.fillRect(Be,m,Ae,e(Ie))}if(I.startOffset===0&&X.listType!=="none")if(u.fillStyle="#202124",X.listType==="bullet"){const ne=e(le)+H+e(Ce)*.5,_e=m+e(Ie)/2;u.beginPath(),u.arc(ne,_e,e(Ce)*.15,0,Math.PI*2),u.fill()}else X.listType==="numbered"&&I.listNumber&&(u.font=`${e(Ce)}px ${e(qt)}`,u.textAlign="right",u.fillText(`${I.listNumber}.`,e(le)+H+e(Ce)*1.2,m+(e(Ie)-e(Ce))/2),u.textAlign="left",u.font=He);X.blockType==="blockquote"&&I.startOffset===0&&(u.fillStyle="#ccc",u.fillRect(e(le)+H,m,3,e(Ie))),u.fillStyle=X.textColor||"#202124",u.font=He;const Qe=m+(e(Ie)-G)/2,Tt=e(Ri)*c()/100,wt=(ne,_e)=>{if(Tt===0)return u.fillText(ne,_e,Qe),u.measureText(ne).width;{let Be=_e;for(let Ae=0;Ae<ne.length;Ae++)u.fillText(ne[Ae],Be,Qe),Be+=u.measureText(ne[Ae]).width+Tt;return Be-_e-Tt}};if(Fe>0&&X.align==="justify"){let ne=xe;for(let _e=0;_e<te.length;_e++)wt(te[_e],ne),ne+=u.measureText(te[_e]).width+te[_e].length*Tt,_e<te.length-1&&(ne+=u.measureText(" ").width+Fe)}else wt($,xe);const ut=Fe>0?Oe:ce;if(e(Hn)&&$.length>0){const ne=m+e(Ie)-4;u.strokeStyle="#202124",u.lineWidth=1,u.beginPath(),u.moveTo(xe,ne),u.lineTo(xe+ut,ne),u.stroke()}if(e(gt)&&$.length>0){const ne=m+e(Ie)/2;u.strokeStyle="#202124",u.lineWidth=1,u.beginPath(),u.moveTo(xe,ne),u.lineTo(xe+ut,ne),u.stroke()}if(z===q.line&&!e(j)){let ne=xe;if(Fe>0&&X.align==="justify"){const _e=$.substring(0,q.col),Ae=_e.split(" ").length-1;ne=xe+u.measureText(_e).width+Ae*Fe}else ne=xe+u.measureText($.substring(0,q.col)).width;u.fillStyle="#000",u.fillRect(ne,m+2,2,e(Ie)-4)}}for(const I of v){if(!I.isImage||!I.imageId||!I.imageHeight)continue;const m=e(P).find($=>$.id===I.imageId);if(!m||m.wrapStyle!=="in-front")continue;const F=ae.get(m.id);if(!F)continue;const H=vi(m,I,s);H.visible&&Fn(u,m,F,H.x,H.y)}u.fillStyle="#999",u.font=`10px ${e(qt)}`,u.textAlign="center",u.fillText(`${s+1}`,e(hn)/2,e(dn)-20),u.textAlign="left"}}function dr(l){const s=l.key;if(e(U)&&(s==="Delete"||s==="Backspace")){l.preventDefault(),Bn();return}if(e(U)&&s!=="Delete"&&s!=="Backspace"&&(f(U,null),de()),l.altKey&&s==="Enter"){l.preventDefault(),Z();return}if(l.ctrlKey||l.metaKey)switch(s.toLowerCase()){case"b":l.preventDefault(),f(Re,!e(Re)),ve();return;case"i":l.preventDefault(),f(ot,!e(ot)),ve();return;case"a":l.preventDefault(),f(j,{para:0,offset:0},!0),f(Y,{para:e(d).length-1,offset:e(d)[e(d).length-1].length},!0);return;case"c":case"x":if(e(j)&&e(Y)){const v=ue();navigator.clipboard.writeText(v),s.toLowerCase()==="x"&&(nt(),ze())}l.preventDefault();return;case"v":l.preventDefault(),nt(),navigator.clipboard.readText().then(v=>{e(j)&&ze(),W(v)});return;case"z":l.preventDefault(),l.shiftKey?Pn():fn();return;case"y":l.preventDefault(),Pn();return}const g=mt(e(y),e(O));switch(l.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(s)?e(j)||f(j,{para:e(y),offset:e(O)},!0):!l.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(s)&&(f(j,null),f(Y,null)),s){case"ArrowLeft":l.preventDefault(),e(O)>0?rn(O,-1):e(y)>0&&(rn(y,-1),f(O,e(d)[e(y)].length,!0));break;case"ArrowRight":l.preventDefault(),e(O)<e(d)[e(y)].length?rn(O):e(y)<e(d).length-1&&(rn(y),f(O,0));break;case"ArrowUp":if(l.preventDefault(),g.line>0){const v=hi(g.line-1,g.col);f(y,v.para,!0),f(O,v.offset,!0)}break;case"ArrowDown":if(l.preventDefault(),g.line<e(ee).length-1){const v=hi(g.line+1,g.col);f(y,v.para,!0),f(O,v.offset,!0)}break;case"Home":l.preventDefault();{const v=e(ee)[g.line];f(O,v.startOffset,!0)}break;case"End":l.preventDefault();{const v=e(ee)[g.line];f(O,v.endOffset,!0)}break;case"Backspace":if(l.preventDefault(),nt(),e(j)&&e(Y))ze();else if(e(O)>0)e(d)[e(y)]=e(d)[e(y)].substring(0,e(O)-1)+e(d)[e(y)].substring(e(O)),rn(O,-1),ve();else if(e(y)>0)if(e(d)[e(y)-1].startsWith(Un)){const v=e(d)[e(y)-1].substring(1);f(U,v,!0),de()}else{const v=e(d)[e(y)-1].length;e(d)[e(y)-1]+=e(d)[e(y)],f(d,[...e(d).slice(0,e(y)),...e(d).slice(e(y)+1)],!0),f(w,[...e(w).slice(0,e(y)),...e(w).slice(e(y)+1)],!0),rn(y,-1),f(O,v,!0),ve()}break;case"Delete":if(l.preventDefault(),nt(),e(j)&&e(Y))ze();else if(e(O)<e(d)[e(y)].length)e(d)[e(y)]=e(d)[e(y)].substring(0,e(O))+e(d)[e(y)].substring(e(O)+1),ve();else if(e(y)<e(d).length-1)if(e(d)[e(y)+1].startsWith(Un)){const v=e(d)[e(y)+1].substring(1);f(U,v,!0),de()}else e(d)[e(y)]+=e(d)[e(y)+1],f(d,[...e(d).slice(0,e(y)+1),...e(d).slice(e(y)+2)],!0),f(w,[...e(w).slice(0,e(y)+1),...e(w).slice(e(y)+2)],!0),ve();break;case"Enter":l.preventDefault(),nt(),e(j)&&e(Y)&&ze();{const v=e(d)[e(y)].substring(0,e(O)),q=e(d)[e(y)].substring(e(O));e(d)[e(y)]=v,f(d,[...e(d).slice(0,e(y)+1),q,...e(d).slice(e(y)+1)],!0);const k=e(w)[e(y)]||kt(),D=k.blockType.startsWith("h")?"p":k.blockType;f(w,[...e(w).slice(0,e(y)+1),{...k,blockType:D},...e(w).slice(e(y)+1)],!0),rn(y),f(O,0),ve()}break;default:s.length===1&&(l.preventDefault(),e(j)&&e(Y)&&(nt(),ze()),W(s),Oi())}l.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(s)&&f(Y,{para:e(y),offset:e(O)},!0);const u=mt(e(y),e(O)),b=Math.floor(u.line/e(bt))+1;wi.set(b),me()}function W(l){const s=l.split(/\r?\n/);if(s.length===1)e(d)[e(y)]=e(d)[e(y)].substring(0,e(O))+l+e(d)[e(y)].substring(e(O)),f(O,e(O)+l.length);else{const g=e(d)[e(y)].substring(0,e(O)),u=e(d)[e(y)].substring(e(O)),b=e(w)[e(y)]||kt();e(d)[e(y)]=g+s[0];const v=s.slice(1,-1),q=s[s.length-1]+u;f(d,[...e(d).slice(0,e(y)+1),...v,q,...e(d).slice(e(y)+1)],!0);const k=s.slice(1).map(()=>({...b}));f(w,[...e(w).slice(0,e(y)+1),...k,...e(w).slice(e(y)+1)],!0),f(y,e(y)+(s.length-1)),f(O,s[s.length-1].length,!0)}ve()}function Z(){nt(),e(j)&&e(Y)&&ze();const l=e(d)[e(y)].substring(0,e(O)),s=e(d)[e(y)].substring(e(O));e(d)[e(y)]=l,f(d,[...e(d).slice(0,e(y)+1),wl,s,...e(d).slice(e(y)+1)],!0);const g=e(w)[e(y)]||kt();f(w,[...e(w).slice(0,e(y)+1),{...kt()},{...g},...e(w).slice(e(y)+1)],!0),f(y,e(y)+2),f(O,0),ve(),de()}function ue(){if(!e(j)||!e(Y))return"";let l=e(j),s=e(Y);if((l.para>s.para||l.para===s.para&&l.offset>s.offset)&&([l,s]=[s,l]),l.para===s.para)return e(d)[l.para].substring(l.offset,s.offset);let g=e(d)[l.para].substring(l.offset);for(let u=l.para+1;u<s.para;u++)g+=`
`+e(d)[u];return g+=`
`+e(d)[s.para].substring(0,s.offset),g}function ze(){if(!e(j)||!e(Y))return;let l=e(j),s=e(Y);if((l.para>s.para||l.para===s.para&&l.offset>s.offset)&&([l,s]=[s,l]),l.para===s.para)e(d)[l.para]=e(d)[l.para].substring(0,l.offset)+e(d)[l.para].substring(s.offset);else{const g=e(d)[l.para].substring(0,l.offset)+e(d)[s.para].substring(s.offset);f(d,[...e(d).slice(0,l.para),g,...e(d).slice(s.para+1)],!0),f(w,[...e(w).slice(0,l.para+1),...e(w).slice(s.para+1)],!0)}f(y,l.para,!0),f(O,l.offset,!0),f(j,null),f(Y,null),ve()}function me(){const l=mt(e(y),e(O)),s=Math.floor(l.line/e(bt));L?.children[s]?.scrollIntoView({behavior:"smooth",block:"nearest"})}function at(l,s){const g=Bt[s];if(!g)return;const u=g.getBoundingClientRect(),b=l.clientX-u.left,v=l.clientY-u.top;if(e(U)&&!e(Ke)){const z=tn();if(z&&z.pageIndex===s){const M=gi(b,v,z);if(M){l.preventDefault(),_i(M,l.clientX,l.clientY);return}if(b>=z.x&&b<=z.x+z.width&&v>=z.y&&v<=z.y+z.height){l.preventDefault(),ms(l.clientX,l.clientY);return}}}if(e(U)&&e(Ke)){const z=tn();if(z&&z.pageIndex===s){const M=gi(b,v,z);if(M){l.preventDefault(),_s(M,l.clientX,l.clientY);return}}}let q=0;e(Rt)>1&&b-e(le)>=e(we)+e(_t)&&(q=1);const k=v-e($e),D=e(ee).filter(z=>z.pageIndex===s);let I=-1;for(const z of D){if(z.yPosition===void 0)continue;let M=e(Ie);z.isImage&&z.imageHeight&&(M=z.imageHeight*e(Ie));const E=z.yPosition,S=E+M;if(k>=E&&k<S){I=e(ee).indexOf(z);break}}I===-1&&k>=0&&D.length>0&&(I=e(ee).indexOf(D[D.length-1]));for(const z of e(An)){const M=e(P).find(E=>E.id===z.id);if(M){const E=M.width*c()/100,S=M.height*c()/100;let ie,G,J=!1;if(M.x!==void 0&&M.y!==void 0){const K=e(je).height,He=Math.floor(M.y/K);if(He===s){const ce=M.y-He*K;ie=e(le)+M.x*c()/100,G=e($e)+ce*c()/100,J=!0}}else{const K=e(ee)[z.startLine];if(K&&K.pageIndex===s){G=e($e)+(K.yPosition??0);const ce=(K.columnIndex??0)*(e(we)+e(_t));ie=z.side==="left"?e(le)+ce:e(le)+ce+e(we)-E,J=!0}}if(J&&b>=ie&&b<=ie+E&&v>=G&&v<=G+S){f(U,M.id,!0),f(j,null),f(Y,null),Ni(l.clientX,l.clientY),B?.focus(),de();return}}}if(I>=0&&I<e(ee).length){const z=e(ee)[I];if(z.isImage&&z.imageId){const M=e(P).find(S=>S.id===z.imageId);if(M&&(M.wrapStyle==="inline"||M.wrapStyle==="top-bottom"||M.wrapStyle==="behind"||M.wrapStyle==="in-front")){const S=M.width*c()/100,ie=M.height*c()/100;let G;const J=q*(e(we)+e(_t));M.horizontalAlign==="center"?G=e(le)+J+(e(we)-S)/2:M.horizontalAlign==="right"?G=e(le)+J+e(we)-S:G=e(le)+J;let K=I;for(;K>0&&e(ee)[K-1].imageId===z.imageId;)K--;const He=e(ee)[K],ce=e($e)+(He.yPosition??0);if(b>=G&&b<=G+S&&v>=ce&&v<=ce+ie){f(U,M.id,!0),f(j,null),f(Y,null),Ni(l.clientX,l.clientY),B?.focus(),de();return}}}}if(e(Ke)&&Wt(),f(U,null),f(It,!1),I>=0&&I<e(ee).length){const z=e(ee)[I];if(z.isImage)f(y,z.paraIndex+1),f(O,0),e(y)>=e(d).length&&(f(y,e(d).length-1),f(O,e(d)[e(y)].length,!0));else{const M=q*(e(we)+e(_t)),E=z.meta,S=E.listType!=="none"?e(Ce)*1.5:0,ie=z.floatReduction&&z.floatReduction.side==="left"?z.floatReduction.width+10:0,G=e(le)+M+S+ie,J=E.fontSize?E.fontSize*c()/100:e(Ce);let K=J;switch(E.blockType){case"h1":K=J*2;break;case"h2":K=J*1.5;break;case"h3":K=J*1.17;break}const He=z.floatReduction?z.floatReduction.width+10:0,ce=e(we)-S-He,Ne=N?.getContext("2d");if(Ne){const ge=["h1","h2","h3","h4"].includes(E.blockType)||e(Re)?"bold ":"",Qe=E.blockType==="blockquote"||e(ot)?"italic ":"";Ne.font=`${Qe}${ge}${K}px ${e(qt)}`}const Oe=Ne?Ne.measureText(z.text).width:z.text.length*K*.5;let xe=G;E.align==="center"?xe=G+(ce-Oe)/2:E.align==="right"&&(xe=G+ce-Oe);let Fe=0,te=xe;for(let ge=0;ge<=z.text.length;ge++){const Qe=ge<z.text.length&&Ne?Ne.measureText(z.text[ge]).width:0;if(te+Qe/2>=b){Fe=ge;break}te+=Qe,Fe=ge+1}Fe=Math.min(Fe,z.text.length),f(y,z.paraIndex,!0),f(O,z.startOffset+Fe)}}else if(I<0){const z=D[0];z&&(f(y,z.paraIndex,!0),f(O,z.startOffset,!0))}else{const z=e(ee).length-1;if(z>=0){const M=e(ee)[z];f(y,M.paraIndex,!0),f(O,M.endOffset,!0)}}f(j,null),f(Y,null);let m=!1;const F=e(y),H=e(O),$=z=>{m=!0,e(j)||f(j,{para:F,offset:H},!0);for(let M=0;M<Bt.length;M++){const E=Bt[M];if(!E)continue;const S=E.getBoundingClientRect();if(z.clientY>=S.top&&z.clientY<=S.bottom){const ie=z.clientX-S.left,G=z.clientY-S.top;let J=0;e(Rt)>1&&ie-e(le)>=e(we)+e(_t)&&(J=1);const K=M*e(bt),He=Math.min(K+e(bt),e(ee).length),ce=e(ri)*c()/100,Ne=G-e($e);let Oe=-1,xe=0;for(let te=K;te<He;te++){const ge=te-K;if((e(Rt)>1?Math.floor(ge/e(On)):0)!==J){const _e=e(ee)[te];_e&&_e.isLastLineOfParagraph&&(xe+=ce);continue}const wt=(e(Rt)>1?ge%e(On):ge)*e(Ie)+xe,ut=wt+e(Ie);if(Ne>=wt&&Ne<ut){Oe=te;break}const ne=e(ee)[te];ne&&ne.isLastLineOfParagraph&&(xe+=ce)}Oe===-1&&Ne>=0&&(Oe=He-1);const Fe=J*(e(we)+e(_t));if(Oe>=0&&Oe<e(ee).length){const te=e(ee)[Oe],ge=te.meta,Qe=ge.listType!=="none"?e(Ce)*1.5:0,Tt=te.floatReduction&&te.floatReduction.side==="left"?te.floatReduction.width+10:0,wt=e(le)+Fe+Qe+Tt,ut=ge.fontSize?ge.fontSize*c()/100:e(Ce);let ne=ut;switch(ge.blockType){case"h1":ne=ut*2;break;case"h2":ne=ut*1.5;break;case"h3":ne=ut*1.17;break}const _e=te.floatReduction?te.floatReduction.width+10:0,Be=e(we)-Qe-_e,Ae=N?.getContext("2d");if(Ae){const xt=["h1","h2","h3","h4"].includes(ge.blockType)||e(Re)?"bold ":"",yn=ge.blockType==="blockquote"||e(ot)?"italic ":"";Ae.font=`${yn}${xt}${ne}px ${e(qt)}`}const Yi=Ae?Ae.measureText(te.text).width:te.text.length*ne*.5;let bn=wt;ge.align==="center"?bn=wt+(Be-Yi)/2:ge.align==="right"&&(bn=wt+Be-Yi);let nn=0,$n=bn;for(let xt=0;xt<=te.text.length;xt++){const yn=xt<te.text.length&&Ae?Ae.measureText(te.text[xt]).width:0;if($n+yn/2>=ie){nn=xt;break}$n+=yn,nn=xt+1}nn=Math.min(nn,te.text.length),f(y,te.paraIndex,!0),f(O,te.startOffset+nn),f(Y,{para:e(y),offset:e(O)},!0)}break}}},X=()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",X),(!m||e(j)&&e(Y)&&e(j).para===e(Y).para&&e(j).offset===e(Y).offset)&&(f(j,null),f(Y,null)),B?.focus(),de()};window.addEventListener("mousemove",$),window.addEventListener("mouseup",X),wi.set(s+1),B?.focus(),de()}function Ze(l,s){let g=e(y),u=e(y);switch(e(j)&&e(Y)&&(g=Math.min(e(j).para,e(Y).para),u=Math.max(e(j).para,e(Y).para)),["justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","formatBlock","fontSize","foreColor"].includes(l)&&nt(),l){case"bold":f(Re,!e(Re));break;case"italic":f(ot,!e(ot));break;case"underline":f(Hn,!e(Hn));break;case"strikeThrough":f(gt,!e(gt));break;case"justifyLeft":for(let v=g;v<=u;v++)e(w)[v]={...e(w)[v],align:"left"};break;case"justifyCenter":for(let v=g;v<=u;v++)e(w)[v]={...e(w)[v],align:"center"};break;case"justifyRight":for(let v=g;v<=u;v++)e(w)[v]={...e(w)[v],align:"right"};break;case"justifyFull":for(let v=g;v<=u;v++)e(w)[v]={...e(w)[v],align:"justify"};break;case"insertUnorderedList":for(let v=g;v<=u;v++){const q=e(w)[v].listType;e(w)[v]={...e(w)[v],listType:q==="bullet"?"none":"bullet"}}break;case"insertOrderedList":for(let v=g;v<=u;v++){const q=e(w)[v].listType;e(w)[v]={...e(w)[v],listType:q==="numbered"?"none":"numbered"}}break;case"formatBlock":if(s){const v=s;for(let q=g;q<=u;q++)e(w)[q]={...e(w)[q],blockType:v}}break;case"fontSize":if(s){const v=parseInt(s);for(let q=g;q<=u;q++)e(w)[q]={...e(w)[q],fontSize:v}}break;case"foreColor":if(s)for(let v=g;v<=u;v++)e(w)[v]={...e(w)[v],textColor:s};break;case"undo":fn();return;case"redo":Pn();return;case"insertImage":f(ye,!0);return}f(w,[...e(w)],!0),ve(),de(),B?.focus()}function ct(){return"img-"+Date.now()+"-"+Math.random().toString(36).substring(2,11)}function Le(l){return new Promise((s,g)=>{const u=new Image;u.crossOrigin="anonymous",u.onload=()=>s(u),u.onerror=g,u.src=l})}async function Me(l,s="inline"){try{nt();const g=await Le(l),u=ct(),b=e(je).width*.8*c()/100;let v=g.naturalWidth,q=g.naturalHeight;if(v>b){const H=b/v;v=b,q=q*H}const k={id:u,src:l,width:v,height:q,naturalWidth:g.naturalWidth,naturalHeight:g.naturalHeight,wrapStyle:s,positionMode:"move-with-text",horizontalAlign:"left",cropTop:0,cropRight:0,cropBottom:0,cropLeft:0};f(P,[...e(P),k],!0),ae.set(u,g);const D=e(d)[e(y)].substring(0,e(O)),I=e(d)[e(y)].substring(e(O));e(d)[e(y)]=D;const m=Un+u;f(d,[...e(d).slice(0,e(y)+1),m,I,...e(d).slice(e(y)+1)],!0);const F=e(w)[e(y)]||kt();f(w,[...e(w).slice(0,e(y)+1),{...kt(),align:"center"},{...F},...e(w).slice(e(y)+1)],!0),f(y,e(y)+2),f(O,0),ve(),de()}catch(g){console.error("Failed to load image:",g),alert("Failed to load image. Please check the URL.")}}function pe(){e(fe).trim()&&(Me(e(fe).trim()),f(fe,""),f(ye,!1),B?.focus())}function We(l){l.preventDefault(),f(Ee,!1);const s=l.dataTransfer?.files;s&&s.length>0&&$t(s[0])}function it(l){const s=l.target;s.files&&s.files.length>0&&$t(s.files[0])}function $t(l){if(!l.type.startsWith("image/")){alert("Please select an image file");return}const s=new FileReader;s.onload=g=>{const u=g.target?.result;Me(u),f(ye,!1),B?.focus()},s.readAsDataURL(l)}function _n(l){const s=l.clipboardData?.items;if(s){for(const g of s)if(g.type.startsWith("image/")){l.preventDefault();const u=g.getAsFile();u&&$t(u);return}}}function Wi(){f(ye,!1),f(fe,""),f(Ee,!1),B?.focus()}function Bn(){if(!e(U))return;nt();const l=e(d).findIndex(s=>s===Un+e(U));l!==-1&&(f(P,e(P).filter(s=>s.id!==e(U)),!0),ae.delete(e(U)),f(d,[...e(d).slice(0,l),...e(d).slice(l+1)],!0),f(w,[...e(w).slice(0,l),...e(w).slice(l+1)],!0),e(d).length===0&&(f(d,[""],!0),f(w,[kt()],!0)),e(y)>=e(d).length?(f(y,e(d).length-1),f(O,e(d)[e(y)].length,!0)):e(y)>l&&rn(y,-1),f(U,null),f(It,!1),ve(),de())}function Mt(l){if(!e(U))return;const s=e(P).findIndex(u=>u.id===e(U));if(s===-1)return;const g={...e(P)[s],wrapStyle:l};(g.positionMode==="move-with-text"||l==="inline")&&(g.x=void 0,g.y=void 0,g.pageIndex=void 0),e(P)[s]=g,f(P,[...e(P)],!0),ve(),de()}function pi(l){if(!e(U))return;const s=e(P).findIndex(u=>u.id===e(U));if(s===-1)return;const g={...e(P)[s],positionMode:l};l==="move-with-text"&&(g.x=void 0,g.y=void 0,g.pageIndex=void 0),e(P)[s]=g,f(P,[...e(P)],!0),ve(),de()}function Dn(l){if(!e(U))return;const s=e(P).findIndex(g=>g.id===e(U));s!==-1&&(e(P)[s]={...e(P)[s],horizontalAlign:l},f(P,[...e(P)],!0),ve(),de())}function Ni(l,s){f(vn,{x:l,y:s},!0),f(It,!0)}function Vi(){f(It,!1)}function tn(){if(!e(U))return null;const l=e(P).find(E=>E.id===e(U));if(!l)return null;const s=ae.get(l.id);if(!s)return null;const g=l.width*c()/100,u=l.cropTop||0,b=l.cropRight||0,v=l.cropBottom||0,k=(100-(l.cropLeft||0)-b)/100*s.naturalWidth,D=(100-u-v)/100*s.naturalHeight,I=k/D,m=g,F=g/I;if(l.x!==void 0&&l.y!==void 0){const E=e(je).height,S=Math.floor(l.y/E),ie=l.y-S*E,G=e(le)+l.x*c()/100,J=e($e)+ie*c()/100;return{x:G,y:J,width:m,height:F,pageIndex:S}}const H=e(ee).find(E=>E.imageId===e(U)&&E.isImage);if(!H||H.pageIndex===void 0)return null;const $=H.pageIndex,X=e(An).find(E=>E.id===e(U));let z;X?z=X.side==="left"?e(le):e(le)+e(Zt)-m:z=e(le)+(e(Zt)-m)/2;const M=e($e)+(H.yPosition??0);return{x:z,y:M,width:m,height:F,pageIndex:$}}function gi(l,s,g){const{x:b,y:v,width:q,height:k}=g;if(l>=b-10&&l<=b+10&&s>=v-10&&s<=v+10)return"nw";if(l>=b+q-10&&l<=b+q+10&&s>=v-10&&s<=v+10)return"ne";if(l>=b-10&&l<=b+10&&s>=v+k-10&&s<=v+k+10)return"sw";if(l>=b+q-10&&l<=b+q+10&&s>=v+k-10&&s<=v+k+10)return"se";const D=b+q/2,I=v+k/2;return l>=D-10&&l<=D+10&&s>=v-10&&s<=v+10?"n":l>=D-10&&l<=D+10&&s>=v+k-10&&s<=v+k+10?"s":l>=b-10&&l<=b+10&&s>=I-10&&s<=I+10?"w":l>=b+q-10&&l<=b+q+10&&s>=I-10&&s<=I+10?"e":null}function _i(l,s,g){if(!e(U)||!l)return;const u=e(P).find(b=>b.id===e(U));u&&(f(Qt,!0),f(pn,l,!0),f(Fi,s,!0),f(oi,g,!0),f(yt,u.width,!0),f(ai,u.height,!0),f(It,!1))}function Ui(l,s){if(!e(Qt)||!e(U)||!e(pn))return;const g=e(P).findIndex(m=>m.id===e(U));if(g===-1)return;const u=e(P)[g],b=u.naturalWidth/u.naturalHeight,v=(l-e(Fi))*(100/c()),q=(s-e(oi))*(100/c());let k=e(yt),D=e(ai);switch(e(pn)){case"se":k=Math.max(50,e(yt)+v),D=k/b;break;case"sw":k=Math.max(50,e(yt)-v),D=k/b;break;case"ne":k=Math.max(50,e(yt)+v),D=k/b;break;case"nw":k=Math.max(50,e(yt)-v),D=k/b;break;case"e":k=Math.max(50,e(yt)+v),D=k/b;break;case"w":k=Math.max(50,e(yt)-v),D=k/b;break;case"n":case"s":D=Math.max(50,e(ai)+(e(pn)==="s"?q:-q)),k=D*b;break}const I=e(je).width*.95;k>I&&(k=I,D=k/b),e(P)[g]={...u,width:k,height:D},f(P,[...e(P)],!0),ve(),de()}function Xi(){f(Qt,!1),f(pn,null)}function ji(){if(!e(U))return;const l=e(P).find(s=>s.id===e(U));l&&f(Jt,{top:l.cropTop||0,right:l.cropRight||0,bottom:l.cropBottom||0,left:l.cropLeft||0},!0),f(Ke,!0),f(It,!1),de()}function Wt(){f(Ke,!1),f(Ft,null),de()}function gs(){if(!e(U))return;const l=e(P).findIndex(s=>s.id===e(U));l!==-1&&(e(P)[l]={...e(P)[l],cropTop:e(Jt).top,cropRight:e(Jt).right,cropBottom:e(Jt).bottom,cropLeft:e(Jt).left},f(P,[...e(P)],!0)),Wt()}function _s(l,s,g){if(!e(U)||!l)return;const u=e(P).find(b=>b.id===e(U));u&&(f(Ft,l,!0),f(ci,s,!0),f(ui,g,!0),f(Pe,{top:u.cropTop||0,right:u.cropRight||0,bottom:u.cropBottom||0,left:u.cropLeft||0},!0))}function bs(l,s){if(!e(Ke)||!e(U)||!e(Ft))return;const g=e(P).findIndex(D=>D.id===e(U));if(g===-1)return;const u=e(P)[g],b=tn();if(!b)return;const v=(l-e(ci))/b.width*100,q=(s-e(ui))/b.height*100;let k={...e(Pe)};switch(e(Ft)){case"n":k.top=Math.max(0,Math.min(100-k.bottom-10,e(Pe).top+q));break;case"s":k.bottom=Math.max(0,Math.min(100-k.top-10,e(Pe).bottom-q));break;case"w":k.left=Math.max(0,Math.min(100-k.right-10,e(Pe).left+v));break;case"e":k.right=Math.max(0,Math.min(100-k.left-10,e(Pe).right-v));break;case"nw":k.top=Math.max(0,Math.min(100-k.bottom-10,e(Pe).top+q)),k.left=Math.max(0,Math.min(100-k.right-10,e(Pe).left+v));break;case"ne":k.top=Math.max(0,Math.min(100-k.bottom-10,e(Pe).top+q)),k.right=Math.max(0,Math.min(100-k.left-10,e(Pe).right-v));break;case"sw":k.bottom=Math.max(0,Math.min(100-k.top-10,e(Pe).bottom-q)),k.left=Math.max(0,Math.min(100-k.right-10,e(Pe).left+v));break;case"se":k.bottom=Math.max(0,Math.min(100-k.top-10,e(Pe).bottom-q)),k.right=Math.max(0,Math.min(100-k.left-10,e(Pe).right-v));break}e(P)[g]={...u,cropTop:k.top,cropRight:k.right,cropBottom:k.bottom,cropLeft:k.left},f(P,[...e(P)],!0),de()}function ys(){f(Ft,null)}function Yr(){if(!e(U))return;const l=e(P).findIndex(s=>s.id===e(U));l!==-1&&(e(P)[l]={...e(P)[l],cropTop:0,cropRight:0,cropBottom:0,cropLeft:0},f(P,[...e(P)],!0),de())}function ms(l,s,g){if(!e(U))return;const u=e(P).find(b=>b.id===e(U));if(u&&u.wrapStyle!=="inline"){if(f(zt,!0),f(Bi,l,!0),f(Di,s,!0),u.x===void 0||u.y===void 0){const b=tn();b?(f(en,(b.x-e(le))*(100/c())),f(gn,b.pageIndex*e(je).height+(b.y-e($e))*(100/c()))):(f(en,0),f(gn,0))}else f(en,u.x,!0),f(gn,u.y,!0);f(It,!1)}}function ws(l,s){if(!e(zt)||!e(U))return;const g=e(P).findIndex(H=>H.id===e(U));if(g===-1)return;const u=e(P)[g],b=(l-e(Bi))*(100/c()),v=(s-e(Di))*(100/c());let q=e(en)+b,k=e(gn)+v;const D=e(je).width-u.width;q=Math.max(0,Math.min(D,q));const I=e(je).height,m=Math.max(0,k),F=Math.floor(m/I);e(P)[g]={...u,x:q,y:m,pageIndex:F},f(P,[...e(P)],!0),ve(),de()}function xs(){f(zt,!1)}let ks=be(()=>Array.from({length:e(qn)},(l,s)=>s));var Ss={navigateToParagraph:$i},Gr=Sa(),Kr=A(Gr);pa(Kr,{onFormat:Ze,get canUndo(){return e(Hi)},get canRedo(){return e(ii)}});var Zr=x(Kr,2);Xn(Zr,l=>N=l,()=>N);var bi=x(Zr,2);bi.__keydown=dr,as(bi,"spellcheck",!1),Xn(bi,l=>B=l,()=>B);var hr=x(bi,2),Qr=A(hr);sn(Qr,20,()=>e(ks),l=>l,(l,s)=>{var g=ya();let u;g.__mousedown=b=>at(b,s),Xn(g,(b,v)=>Bt[v]=b,b=>Bt?.[b],()=>[s]),Ye(()=>u=Q(g,1,"page-canvas svelte-1h8xysy",null,u,{active:_()===s+1})),ke(l,g)}),Xn(Qr,l=>L=l,()=>L),Xn(hr,l=>T=l,()=>T);var Jr=x(hr,2),Cs=A(Jr),el=x(Jr,2);{var Is=l=>{var s=ma();s.__click=Wi;var g=A(s);g.__click=$=>$.stopPropagation();var u=A(g),b=x(A(u),2);b.__click=Wi;var v=x(u,2),q=A(v),k=x(A(q),2),D=A(k);D.__keydown=$=>$.key==="Enter"&&pe();var I=x(D,2);I.__click=pe;var m=x(q,4);let F;m.__click=()=>document.getElementById("file-input")?.click();var H=x(m,2);H.__change=it,Ye(()=>F=Q(m,1,"drop-zone svelte-1h8xysy",null,F,{"drag-over":e(Ee)})),Ko(D,()=>e(fe),$=>f(fe,$)),Ki("dragover",m,$=>{$.preventDefault(),f(Ee,!0)}),Ki("dragleave",m,()=>f(Ee,!1)),Ki("drop",m,We),ke(l,s)};Ht(el,l=>{e(ye)&&l(Is)})}var tl=x(el,2);{var zs=l=>{const s=be(()=>e(P).find(Be=>Be.id===e(U)));var g=xa();g.__click=Vi;var u=A(g);u.__click=Be=>Be.stopPropagation();var b=A(u),v=x(A(b),2);v.__click=Vi;var q=x(b,2),k=x(A(q),2),D=A(k);let I;D.__click=()=>Mt("inline");var m=x(q,2),F=x(A(m),2),H=A(F);let $;H.__click=()=>Mt("square");var X=x(H,2);let z;X.__click=()=>Mt("tight");var M=x(X,2);let E;M.__click=()=>Mt("through");var S=x(M,2);let ie;S.__click=()=>Mt("top-bottom");var G=x(S,2);let J;G.__click=()=>Mt("behind");var K=x(G,2);let He;K.__click=()=>Mt("in-front");var ce=x(m,2);{var Ne=Be=>{var Ae=wa(),Yi=x(A(Ae),2),bn=A(Yi);let nn;bn.__click=()=>Dn("left");var $n=x(bn,2);let xt;$n.__click=()=>Dn("center");var yn=x($n,2);let nl;yn.__click=()=>Dn("right"),Ye(()=>{nn=Q(bn,1,"layout-btn small svelte-1h8xysy",null,nn,{active:e(s)?.horizontalAlign==="left"}),xt=Q($n,1,"layout-btn small svelte-1h8xysy",null,xt,{active:e(s)?.horizontalAlign==="center"}),nl=Q(yn,1,"layout-btn small svelte-1h8xysy",null,nl,{active:e(s)?.horizontalAlign==="right"})}),ke(Be,Ae)};Ht(ce,Be=>{e(s)?.wrapStyle!=="inline"&&Be(Ne)})}var Oe=x(ce,2),xe=x(A(Oe),2),Fe=A(xe),te=A(Fe);te.__change=()=>pi("move-with-text");var ge=x(Fe,2),Qe=A(ge);Qe.__change=()=>pi("fixed-position");var Tt=x(Oe,2),wt=x(A(Tt),2),ut=A(wt);ut.__click=ji;var ne=x(ut,2);ne.__click=Yr;var _e=x(Tt,2);_e.__click=Bn,Ye(()=>{os(u,`left: ${e(vn).x??""}px; top: ${e(vn).y??""}px;`),I=Q(D,1,"layout-btn svelte-1h8xysy",null,I,{active:e(s)?.wrapStyle==="inline"}),$=Q(H,1,"layout-btn svelte-1h8xysy",null,$,{active:e(s)?.wrapStyle==="square"}),z=Q(X,1,"layout-btn svelte-1h8xysy",null,z,{active:e(s)?.wrapStyle==="tight"}),E=Q(M,1,"layout-btn svelte-1h8xysy",null,E,{active:e(s)?.wrapStyle==="through"}),ie=Q(S,1,"layout-btn svelte-1h8xysy",null,ie,{active:e(s)?.wrapStyle==="top-bottom"}),J=Q(G,1,"layout-btn svelte-1h8xysy",null,J,{active:e(s)?.wrapStyle==="behind"}),He=Q(K,1,"layout-btn svelte-1h8xysy",null,He,{active:e(s)?.wrapStyle==="in-front"}),pl(te,e(s)?.positionMode==="move-with-text"),pl(Qe,e(s)?.positionMode==="fixed-position")}),ke(l,g)};Ht(tl,l=>{e(It)&&e(U)&&!e(Ke)&&l(zs)})}var Ms=x(tl,2);{var Ts=l=>{var s=ka(),g=x(A(s),2),u=A(g);u.__click=Wt;var b=x(u,2);b.__click=Yr;var v=x(b,2);v.__click=gs,ke(l,s)};Ht(Ms,l=>{e(Ke)&&e(U)&&l(Ts)})}Ye(()=>Vt(Cs,`Page ${_()??""} of ${e(qn)??""}`)),Ki("paste",bi,_n),ke(t,Gr);var Ls=sr(Ss);return R(),Ls}Wr(["keydown","mousedown","click","change"]);var Ia=Se('<ul class="heading-list nested svelte-1nhzsi7"></ul>'),za=Se('<li><button class="heading-link svelte-1nhzsi7"> </button> <!></li>'),Ma=Se('<p class="empty-message svelte-1nhzsi7">No headings yet</p>'),Ta=Se('<ul class="heading-list svelte-1nhzsi7"></ul>'),La=Se('<aside class="sidebar svelte-1nhzsi7"><div class="sidebar-header svelte-1nhzsi7"><h3 class="svelte-1nhzsi7">Document Outline</h3></div> <nav class="sidebar-nav svelte-1nhzsi7"><!></nav></aside>');function Ea(t,n){lr(n,!0);const i=()=>qe(hs,"$headings",r),[r,o]=Ur(),a=(L,B=Xt)=>{var N=za(),d=A(N);d.__click=()=>n.onNavigate(B().paraIndex);var w=A(d),P=x(d,2);{var ae=ye=>{var fe=Ia();sn(fe,21,()=>B().children,mn,(Ee,y)=>{a(Ee,()=>e(y))}),ke(ye,fe)};Ht(P,ye=>{B().children.length>0&&ye(ae)})}Ye(()=>{Q(N,1,`heading-item level-${B().level??""}`,"svelte-1nhzsi7"),as(d,"title",B().text),Vt(w,B().text||"(Empty heading)")}),ke(L,N)};function p(L){const B=[],N=[];for(const d of L){const w={...d,children:[]};for(;N.length>0&&N[N.length-1].level>=d.level;)N.pop();N.length===0?B.push(w):N[N.length-1].children.push(w),N.push(w)}return B}let h=be(()=>p(i()));var c=La(),_=x(A(c),2),C=A(_);{var R=L=>{var B=Ma();ke(L,B)},T=L=>{var B=Ta();sn(B,21,()=>e(h),mn,(N,d)=>{a(N,()=>e(d))}),ke(L,B)};Ht(C,L=>{e(h).length===0?L(R):L(T,!1)})}ke(t,c),sr(),o()}Wr(["click"]);var Pa=Se('<main class="svelte-1n46o8q"><div class="app-layout svelte-1n46o8q"><!> <div class="editor-wrapper svelte-1n46o8q"><!></div></div></main>');function Ha(t){let n=Fr();function i(c){e(n)?.navigateToParagraph(c)}var r=Pa(),o=A(r),a=A(o);Ea(a,{onNavigate:i});var p=x(a,2),h=A(p);Xn(Ca(h,{$$legacy:!0}),c=>f(n,c),()=>e(n)),ke(t,r)}Fo(Ha,{target:document.getElementById("app")});
