(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();const br=!1;var Er=Array.isArray,bs=Array.prototype.indexOf,Zi=Array.from,bl=Object.defineProperty,gi=Object.getOwnPropertyDescriptor,ys=Object.getOwnPropertyDescriptors,ms=Object.prototype,ws=Array.prototype,yl=Object.getPrototypeOf,el=Object.isExtensible;const Xt=()=>{};function ml(t){for(var n=0;n<t.length;n++)t[n]()}function wl(){var t,n,i=new Promise((r,a)=>{t=r,n=a});return{promise:i,resolve:t,reject:n}}const We=2,Or=4,Pr=8,xs=1<<24,Yt=16,jt=32,Sn=64,Qi=128,zt=512,Ye=1024,st=2048,qt=4096,dt=8192,ln=16384,Hr=32768,Yn=65536,tl=1<<17,xl=1<<18,Zn=1<<19,ks=1<<20,Vt=1<<25,wn=32768,yr=1<<21,Ar=1<<22,sn=1<<23,Un=Symbol("$state"),Ss=Symbol(""),Xn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Cs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Is(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ms(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ts(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ls(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Es(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Os(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ps(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Hs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const As=1,qs=2,kl=4,Rs=8,Fs=16,$s=2,Ue=Symbol(),Ds="http://www.w3.org/1999/xhtml";function Bs(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ws(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Sl(t){return t===this.v}function Cl(t,n){return t!=t?n==n:t!==n||t!==null&&typeof t=="object"||typeof t=="function"}function Il(t){return!Cl(t,this.v)}let xi=!1,Ns=!1;function Vs(){xi=!0}let He=null;function jn(t){He=t}function Ji(t,n=!1,i){He={p:He,i:!1,c:null,e:null,s:t,x:null,l:xi&&!n?{s:null,u:null,$:[]}:null}}function er(t){var n=He,i=n.e;if(i!==null){n.e=null;for(var r of i)Wl(r)}return t!==void 0&&(n.x=t),n.i=!0,He=n.p,t??{}}function ki(){return!xi||He!==null&&He.l===null}let gn=[];function Ml(){var t=gn;gn=[],ml(t)}function Qn(t){if(gn.length===0&&!_i){var n=gn;queueMicrotask(()=>{n===gn&&Ml()})}gn.push(t)}function Xs(){for(;gn.length>0;)Ml()}function zl(t){var n=ae;if(n===null)return ie.f|=sn,t;if((n.f&Hr)===0){if((n.f&Qi)===0)throw t;n.b.error(t)}else Gn(t,n)}function Gn(t,n){for(;n!==null;){if((n.f&Qi)!==0)try{n.b.error(t);return}catch(i){t=i}n=n.parent}throw t}const Ni=new Set;let oe=null,Xi=null,bt=null,gt=[],tr=null,mr=!1,_i=!1;class Pt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#i=0;#n=0;#a=null;#l=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(n){gt=[],Xi=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[]};for(const r of n)this.#s(r,i);this.is_fork||this.#u(),this.is_deferred()?(this.#o(i.effects),this.#o(i.render_effects)):(Xi=this,oe=null,nl(i.render_effects),nl(i.effects),Xi=null,this.#a?.resolve()),bt=null}#s(n,i){n.f^=Ye;for(var r=n.first;r!==null;){var a=r.f,o=(a&(jt|Sn))!==0,g=o&&(a&Ye)!==0,v=g||(a&dt)!==0||this.skipped_effects.has(r);if((r.f&Qi)!==0&&r.b?.is_pending()&&(i={parent:i,effect:r,effects:[],render_effects:[]}),!v&&r.fn!==null){o?r.f^=Ye:(a&Or)!==0?i.effects.push(r):Si(r)&&((r.f&Yt)!==0&&this.#l.add(r),wi(r));var c=r.first;if(c!==null){r=c;continue}}var _=r.parent;for(r=r.next;r===null&&_!==null;)_===i.effect&&(this.#o(i.effects),this.#o(i.render_effects),i=i.parent),r=_.next,_=_.parent}}#o(n){for(const i of n)(i.f&st)!==0?this.#l.add(i):(i.f&qt)!==0&&this.#r.add(i),this.#c(i.deps),je(i,Ye)}#c(n){if(n!==null)for(const i of n)(i.f&We)===0||(i.f&wn)===0||(i.f^=wn,this.#c(i.deps))}capture(n,i){this.previous.has(n)||this.previous.set(n,i),(n.f&sn)===0&&(this.current.set(n,n.v),bt?.set(n,n.v))}activate(){oe=this,this.apply()}deactivate(){oe===this&&(oe=null,bt=null)}flush(){if(this.activate(),gt.length>0){if(Tl(),oe!==null&&oe!==this)return}else this.#i===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#t)n(this);this.#t.clear()}#u(){if(this.#n===0){for(const n of this.#e)n();this.#e.clear()}this.#i===0&&this.#f()}#f(){if(Ni.size>1){this.previous.clear();var n=bt,i=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const o of Ni){if(o===this){i=!1;continue}const g=[];for(const[c,_]of this.current){if(o.current.has(c))if(i&&_!==o.current.get(c))o.current.set(c,_);else continue;g.push(c)}if(g.length===0)continue;const v=[...o.current.keys()].filter(c=>!this.current.has(c));if(v.length>0){var a=gt;gt=[];const c=new Set,_=new Map;for(const C of g)Ll(C,v,c,_);if(gt.length>0){oe=o,o.apply();for(const C of gt)o.#s(C,r);o.deactivate()}gt=a}}oe=null,bt=n}this.committed=!0,Ni.delete(this)}increment(n){this.#i+=1,n&&(this.#n+=1)}decrement(n){this.#i-=1,n&&(this.#n-=1),this.revive()}revive(){for(const n of this.#l)this.#r.delete(n),je(n,st),xn(n);for(const n of this.#r)je(n,qt),xn(n);this.flush()}oncommit(n){this.#e.add(n)}ondiscard(n){this.#t.add(n)}settled(){return(this.#a??=wl()).promise}static ensure(){if(oe===null){const n=oe=new Pt;Ni.add(oe),_i||Pt.enqueue(()=>{oe===n&&n.flush()})}return oe}static enqueue(n){Qn(n)}apply(){}}function Us(t){var n=_i;_i=!0;try{for(var i;;){if(Xs(),gt.length===0&&(oe?.flush(),gt.length===0))return tr=null,i;Tl()}}finally{_i=n}}function Tl(){var t=yn;mr=!0;var n=null;try{var i=0;for(Gi(!0);gt.length>0;){var r=Pt.ensure();if(i++>1e3){var a,o;Ys()}r.process(gt),on.clear()}}finally{mr=!1,Gi(t),tr=null}}function Ys(){try{Ls()}catch(t){Gn(t,tr)}}let Wt=null;function nl(t){var n=t.length;if(n!==0){for(var i=0;i<n;){var r=t[i++];if((r.f&(ln|dt))===0&&Si(r)&&(Wt=new Set,wi(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Xl(r):r.fn=null),Wt?.size>0)){on.clear();for(const a of Wt){if((a.f&(ln|dt))!==0)continue;const o=[a];let g=a.parent;for(;g!==null;)Wt.has(g)&&(Wt.delete(g),o.push(g)),g=g.parent;for(let v=o.length-1;v>=0;v--){const c=o[v];(c.f&(ln|dt))===0&&wi(c)}}Wt.clear()}}Wt=null}}function Ll(t,n,i,r){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const a of t.reactions){const o=a.f;(o&We)!==0?Ll(a,n,i,r):(o&(Ar|Yt))!==0&&(o&st)===0&&El(a,n,r)&&(je(a,st),xn(a))}}function El(t,n,i){const r=i.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const a of t.deps){if(n.includes(a))return!0;if((a.f&We)!==0&&El(a,n,i))return i.set(a,!0),!0}return i.set(t,!1),!1}function xn(t){for(var n=tr=t;n.parent!==null;){n=n.parent;var i=n.f;if(mr&&n===ae&&(i&Yt)!==0&&(i&xl)===0)return;if((i&(Sn|jt))!==0){if((i&Ye)===0)return;n.f^=Ye}}gt.push(n)}function js(t){let n=0,i=kn(0),r;return()=>{yi()&&(e(i),$r(()=>(n===0&&(r=Ci(()=>t(()=>bi(i)))),n+=1,()=>{Qn(()=>{n-=1,n===0&&(r?.(),r=void 0,bi(i))})})))}}var Gs=Yn|Zn|Qi;function Ks(t,n,i){new Zs(t,n,i)}class Zs{parent;#e=!1;#t;#i=null;#n;#a;#l;#r=null;#s=null;#o=null;#c=null;#u=null;#f=0;#d=0;#v=!1;#h=null;#y=js(()=>(this.#h=kn(this.#f),()=>{this.#h=null}));constructor(n,i,r){this.#t=n,this.#n=i,this.#a=r,this.parent=ae.b,this.#e=!!this.#n.pending,this.#l=Dr(()=>{ae.b=this;{var a=this.#_();try{this.#r=_t(()=>r(a))}catch(o){this.error(o)}this.#d>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},Gs)}#m(){try{this.#r=_t(()=>this.#a(this.#t))}catch(n){this.error(n)}this.#e=!1}#w(){const n=this.#n.pending;n&&(this.#s=_t(()=>n(this.#t)),Pt.enqueue(()=>{var i=this.#_();this.#r=this.#p(()=>(Pt.ensure(),_t(()=>this.#a(i)))),this.#d>0?this.#g():(bn(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#_(){var n=this.#t;return this.#e&&(this.#u=_n(),this.#t.before(this.#u),n=this.#u),n}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(n){var i=ae,r=ie,a=He;Rt(this.#l),rt(this.#l),jn(this.#l.ctx);try{return n()}catch(o){return zl(o),null}finally{Rt(i),rt(r),jn(a)}}#g(){const n=this.#n.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),jl(this.#r,this.#c)),this.#s===null&&(this.#s=_t(()=>n(this.#t)))}#b(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(n);return}this.#d+=n,this.#d===0&&(this.#e=!1,this.#s&&bn(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(n){this.#b(n),this.#f+=n,this.#h&&Kn(this.#h,this.#f)}get_effect_pending(){return this.#y(),e(this.#h)}error(n){var i=this.#n.onerror;let r=this.#n.failed;if(this.#v||!i&&!r)throw n;this.#r&&(lt(this.#r),this.#r=null),this.#s&&(lt(this.#s),this.#s=null),this.#o&&(lt(this.#o),this.#o=null);var a=!1,o=!1;const g=()=>{if(a){Ws();return}a=!0,o&&Hs(),Pt.ensure(),this.#f=0,this.#o!==null&&bn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#p(()=>(this.#v=!1,_t(()=>this.#a(this.#t)))),this.#d>0?this.#g():this.#e=!1};var v=ie;try{rt(null),o=!0,i?.(n,g),o=!1}catch(c){Gn(c,this.#l&&this.#l.parent)}finally{rt(v)}r&&Qn(()=>{this.#o=this.#p(()=>{Pt.ensure(),this.#v=!0;try{return _t(()=>{r(this.#t,()=>n,()=>g)})}catch(c){return Gn(c,this.#l.parent),null}finally{this.#v=!1}})})}}function Qs(t,n,i,r){const a=ki()?qr:Ol;if(i.length===0&&t.length===0){r(n.map(a));return}var o=oe,g=ae,v=Js();function c(){Promise.all(i.map(_=>eo(_))).then(_=>{v();try{r([...n.map(a),..._])}catch(C){(g.f&ln)===0&&Gn(C,g)}o?.deactivate(),ji()}).catch(_=>{Gn(_,g)})}t.length>0?Promise.all(t).then(()=>{v();try{return c()}finally{o?.deactivate(),ji()}}):c()}function Js(){var t=ae,n=ie,i=He,r=oe;return function(o=!0){Rt(t),rt(n),jn(i),o&&r?.activate()}}function ji(){Rt(null),rt(null),jn(null)}function qr(t){var n=We|st,i=ie!==null&&(ie.f&We)!==0?ie:null;return ae!==null&&(ae.f|=Zn),{ctx:He,deps:null,effects:null,equals:Sl,f:n,fn:t,reactions:null,rv:0,v:Ue,wv:0,parent:i??ae,ac:null}}function eo(t,n){let i=ae;i===null&&Is();var r=i.b,a=void 0,o=kn(Ue),g=!ie,v=new Map;return ho(()=>{var c=wl();a=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{_===oe&&_.committed&&_.deactivate(),ji()})}catch(z){c.reject(z),ji()}var _=oe;if(g){var C=!r.is_pending();r.update_pending_count(1),_.increment(C),v.get(_)?.reject(Xn),v.delete(_),v.set(_,c)}const A=(z,I=void 0)=>{if(_.activate(),I)I!==Xn&&(o.f|=sn,Kn(o,I));else{(o.f&sn)!==0&&(o.f^=sn),Kn(o,z);for(const[E,W]of v){if(v.delete(E),E===_)break;W.reject(Xn)}}g&&(r.update_pending_count(-1),_.decrement(C))};c.promise.then(A,z=>A(null,z||"unknown"))}),rr(()=>{for(const c of v.values())c.reject(Xn)}),new Promise(c=>{function _(C){function A(){C===a?c(o):_(a)}C.then(A,A)}_(a)})}function ye(t){const n=qr(t);return Gl(n),n}function Ol(t){const n=qr(t);return n.equals=Il,n}function Pl(t){var n=t.effects;if(n!==null){t.effects=null;for(var i=0;i<n.length;i+=1)lt(n[i])}}function to(t){for(var n=t.parent;n!==null;){if((n.f&We)===0)return(n.f&ln)===0?n:null;n=n.parent}return null}function Rr(t){var n,i=ae;Rt(to(t));try{t.f&=~wn,Pl(t),n=Jl(t)}finally{Rt(i)}return n}function Hl(t){var n=Rr(t);if(t.equals(n)||(oe?.is_fork||(t.v=n),t.wv=Zl()),!Jn)if(bt!==null)(yi()||oe?.is_fork)&&bt.set(t,n);else{var i=(t.f&zt)===0?qt:Ye;je(t,i)}}let wr=new Set;const on=new Map;let Al=!1;function kn(t,n){var i={f:0,v:t,reactions:null,equals:Sl,rv:0,wv:0};return i}function X(t,n){const i=kn(t);return Gl(i),i}function Fr(t,n=!1,i=!0){const r=kn(t);return n||(r.equals=Il),xi&&i&&He!==null&&He.l!==null&&(He.l.s??=[]).push(r),r}function d(t,n,i=!1){ie!==null&&(!Ht||(ie.f&tl)!==0)&&ki()&&(ie.f&(We|Yt|Ar|tl))!==0&&!Ut?.includes(t)&&Ps();let r=i?ft(n):n;return Kn(t,r)}function Kn(t,n){if(!t.equals(n)){var i=t.v;Jn?on.set(t,n):on.set(t,i),t.v=n;var r=Pt.ensure();r.capture(t,i),(t.f&We)!==0&&((t.f&st)!==0&&Rr(t),je(t,(t.f&zt)!==0?Ye:qt)),t.wv=Zl(),ql(t,st),ki()&&ae!==null&&(ae.f&Ye)!==0&&(ae.f&(jt|Sn))===0&&(pt===null?go([t]):pt.push(t)),!r.is_fork&&wr.size>0&&!Al&&no()}return n}function no(){Al=!1;var t=yn;Gi(!0);const n=Array.from(wr);try{for(const i of n)(i.f&Ye)!==0&&je(i,qt),Si(i)&&wi(i)}finally{Gi(t)}wr.clear()}function tn(t,n=1){var i=e(t),r=n===1?i++:i--;return d(t,i),r}function bi(t){d(t,t.v+1)}function ql(t,n){var i=t.reactions;if(i!==null)for(var r=ki(),a=i.length,o=0;o<a;o++){var g=i[o],v=g.f;if(!(!r&&g===ae)){var c=(v&st)===0;if(c&&je(g,n),(v&We)!==0){var _=g;bt?.delete(_),(v&wn)===0&&(v&zt&&(g.f|=wn),ql(_,qt))}else c&&((v&Yt)!==0&&Wt!==null&&Wt.add(g),xn(g))}}}function ft(t){if(typeof t!="object"||t===null||Un in t)return t;const n=yl(t);if(n!==ms&&n!==ws)return t;var i=new Map,r=Er(t),a=X(0),o=mn,g=v=>{if(mn===o)return v();var c=ie,_=mn;rt(null),ol(o);var C=v();return rt(c),ol(_),C};return r&&i.set("length",X(t.length)),new Proxy(t,{defineProperty(v,c,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Es();var C=i.get(c);return C===void 0?C=g(()=>{var A=X(_.value);return i.set(c,A),A}):d(C,_.value,!0),!0},deleteProperty(v,c){var _=i.get(c);if(_===void 0){if(c in v){const C=g(()=>X(Ue));i.set(c,C),bi(a)}}else d(_,Ue),bi(a);return!0},get(v,c,_){if(c===Un)return t;var C=i.get(c),A=c in v;if(C===void 0&&(!A||gi(v,c)?.writable)&&(C=g(()=>{var I=ft(A?v[c]:Ue),E=X(I);return E}),i.set(c,C)),C!==void 0){var z=e(C);return z===Ue?void 0:z}return Reflect.get(v,c,_)},getOwnPropertyDescriptor(v,c){var _=Reflect.getOwnPropertyDescriptor(v,c);if(_&&"value"in _){var C=i.get(c);C&&(_.value=e(C))}else if(_===void 0){var A=i.get(c),z=A?.v;if(A!==void 0&&z!==Ue)return{enumerable:!0,configurable:!0,value:z,writable:!0}}return _},has(v,c){if(c===Un)return!0;var _=i.get(c),C=_!==void 0&&_.v!==Ue||Reflect.has(v,c);if(_!==void 0||ae!==null&&(!C||gi(v,c)?.writable)){_===void 0&&(_=g(()=>{var z=C?ft(v[c]):Ue,I=X(z);return I}),i.set(c,_));var A=e(_);if(A===Ue)return!1}return C},set(v,c,_,C){var A=i.get(c),z=c in v;if(r&&c==="length")for(var I=_;I<A.v;I+=1){var E=i.get(I+"");E!==void 0?d(E,Ue):I in v&&(E=g(()=>X(Ue)),i.set(I+"",E))}if(A===void 0)(!z||gi(v,c)?.writable)&&(A=g(()=>X(void 0)),d(A,ft(_)),i.set(c,A));else{z=A.v!==Ue;var W=g(()=>ft(_));d(A,W)}var h=Reflect.getOwnPropertyDescriptor(v,c);if(h?.set&&h.set.call(C,_),!z){if(r&&typeof c=="string"){var k=i.get("length"),P=Number(c);Number.isInteger(P)&&P>=k.v&&d(k,P+1)}bi(a)}return!0},ownKeys(v){e(a);var c=Reflect.ownKeys(v).filter(A=>{var z=i.get(A);return z===void 0||z.v!==Ue});for(var[_,C]of i)C.v!==Ue&&!(_ in v)&&c.push(_);return c},setPrototypeOf(){Os()}})}function il(t){try{if(t!==null&&typeof t=="object"&&Un in t)return t[Un]}catch{}return t}function io(t,n){return Object.is(il(t),il(n))}var rl,Rl,Fl,$l;function ro(){if(rl===void 0){rl=window,Rl=/Firefox/.test(navigator.userAgent);var t=Element.prototype,n=Node.prototype,i=Text.prototype;Fl=gi(n,"firstChild").get,$l=gi(n,"nextSibling").get,el(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),el(i)&&(i.__t=void 0)}}function _n(t=""){return document.createTextNode(t)}function Dl(t){return Fl.call(t)}function nr(t){return $l.call(t)}function L(t,n){return Dl(t)}function S(t,n=1,i=!1){let r=t;for(;n--;)r=nr(r);return r}function lo(t){t.textContent=""}function Bl(){return!1}let ll=!1;function so(){ll||(ll=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const n of t.target.elements)n.__on_r?.()})},{capture:!0}))}function ir(t){var n=ie,i=ae;rt(null),Rt(null);try{return t()}finally{rt(n),Rt(i)}}function oo(t,n,i,r=i){t.addEventListener(n,()=>ir(i));const a=t.__on_r;a?t.__on_r=()=>{a(),r(!0)}:t.__on_r=()=>r(!0),so()}function ao(t){ae===null&&(ie===null&&Ts(),zs()),Jn&&Ms()}function co(t,n){var i=n.last;i===null?n.last=n.first=t:(i.next=t,t.prev=i,n.last=t)}function Gt(t,n,i){var r=ae;r!==null&&(r.f&dt)!==0&&(t|=dt);var a={ctx:He,deps:null,nodes:null,f:t|st|zt,first:null,fn:n,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(i)try{wi(a),a.f|=Hr}catch(v){throw lt(a),v}else n!==null&&xn(a);var o=a;if(i&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&Zn)===0&&(o=o.first,(t&Yt)!==0&&(t&Yn)!==0&&o!==null&&(o.f|=Yn)),o!==null&&(o.parent=r,r!==null&&co(o,r),ie!==null&&(ie.f&We)!==0&&(t&Sn)===0)){var g=ie;(g.effects??=[]).push(o)}return a}function yi(){return ie!==null&&!Ht}function rr(t){const n=Gt(Pr,null,!1);return je(n,Ye),n.teardown=t,n}function xr(t){ao();var n=ae.f,i=!ie&&(n&jt)!==0&&(n&Hr)===0;if(i){var r=He;(r.e??=[]).push(t)}else return Wl(t)}function Wl(t){return Gt(Or|ks,t,!1)}function uo(t){Pt.ensure();const n=Gt(Sn|Zn,t,!0);return(i={})=>new Promise(r=>{i.outro?bn(n,()=>{lt(n),r(void 0)}):(lt(n),r(void 0))})}function fo(t){return Gt(Or,t,!1)}function ho(t){return Gt(Ar|Zn,t,!0)}function $r(t,n=0){return Gt(Pr|n,t,!0)}function Qe(t,n=[],i=[],r=[]){Qs(r,n,i,a=>{Gt(Pr,()=>t(...a.map(e)),!0)})}function Dr(t,n=0){var i=Gt(Yt|n,t,!0);return i}function _t(t){return Gt(jt|Zn,t,!0)}function Nl(t){var n=t.teardown;if(n!==null){const i=Jn,r=ie;sl(!0),rt(null);try{n.call(null)}finally{sl(i),rt(r)}}}function Vl(t,n=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const a=i.ac;a!==null&&ir(()=>{a.abort(Xn)});var r=i.next;(i.f&Sn)!==0?i.parent=null:lt(i,n),i=r}}function vo(t){for(var n=t.first;n!==null;){var i=n.next;(n.f&jt)===0&&lt(n),n=i}}function lt(t,n=!0){var i=!1;(n||(t.f&xl)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(po(t.nodes.start,t.nodes.end),i=!0),Vl(t,n&&!i),Ki(t,0),je(t,ln);var r=t.nodes&&t.nodes.t;if(r!==null)for(const o of r)o.stop();Nl(t);var a=t.parent;a!==null&&a.first!==null&&Xl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function po(t,n){for(;t!==null;){var i=t===n?null:nr(t);t.remove(),t=i}}function Xl(t){var n=t.parent,i=t.prev,r=t.next;i!==null&&(i.next=r),r!==null&&(r.prev=i),n!==null&&(n.first===t&&(n.first=r),n.last===t&&(n.last=i))}function bn(t,n,i=!0){var r=[];Ul(t,r,!0);var a=()=>{i&&lt(t),n&&n()},o=r.length;if(o>0){var g=()=>--o||a();for(var v of r)v.out(g)}else a()}function Ul(t,n,i){if((t.f&dt)===0){t.f^=dt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const v of r)(v.is_global||i)&&n.push(v);for(var a=t.first;a!==null;){var o=a.next,g=(a.f&Yn)!==0||(a.f&jt)!==0&&(t.f&Yt)!==0;Ul(a,n,g?i:!1),a=o}}}function Br(t){Yl(t,!0)}function Yl(t,n){if((t.f&dt)!==0){t.f^=dt,(t.f&Ye)===0&&(je(t,st),xn(t));for(var i=t.first;i!==null;){var r=i.next,a=(i.f&Yn)!==0||(i.f&jt)!==0;Yl(i,a?n:!1),i=r}var o=t.nodes&&t.nodes.t;if(o!==null)for(const g of o)(g.is_global||n)&&g.in()}}function jl(t,n){if(t.nodes)for(var i=t.nodes.start,r=t.nodes.end;i!==null;){var a=i===r?null:nr(i);n.append(i),i=a}}let yn=!1;function Gi(t){yn=t}let Jn=!1;function sl(t){Jn=t}let ie=null,Ht=!1;function rt(t){ie=t}let ae=null;function Rt(t){ae=t}let Ut=null;function Gl(t){ie!==null&&(Ut===null?Ut=[t]:Ut.push(t))}let Je=null,ut=0,pt=null;function go(t){pt=t}let Kl=1,mi=0,mn=mi;function ol(t){mn=t}function Zl(){return++Kl}function Si(t){var n=t.f;if((n&st)!==0)return!0;if(n&We&&(t.f&=~wn),(n&qt)!==0){var i=t.deps;if(i!==null)for(var r=i.length,a=0;a<r;a++){var o=i[a];if(Si(o)&&Hl(o),o.wv>t.wv)return!0}(n&zt)!==0&&bt===null&&je(t,Ye)}return!1}function Ql(t,n,i=!0){var r=t.reactions;if(r!==null&&!Ut?.includes(t))for(var a=0;a<r.length;a++){var o=r[a];(o.f&We)!==0?Ql(o,n,!1):n===o&&(i?je(o,st):(o.f&Ye)!==0&&je(o,qt),xn(o))}}function Jl(t){var n=Je,i=ut,r=pt,a=ie,o=Ut,g=He,v=Ht,c=mn,_=t.f;Je=null,ut=0,pt=null,ie=(_&(jt|Sn))===0?t:null,Ut=null,jn(t.ctx),Ht=!1,mn=++mi,t.ac!==null&&(ir(()=>{t.ac.abort(Xn)}),t.ac=null);try{t.f|=yr;var C=t.fn,A=C(),z=t.deps;if(Je!==null){var I;if(Ki(t,ut),z!==null&&ut>0)for(z.length=ut+Je.length,I=0;I<Je.length;I++)z[ut+I]=Je[I];else t.deps=z=Je;if(yi()&&(t.f&zt)!==0)for(I=ut;I<z.length;I++)(z[I].reactions??=[]).push(t)}else z!==null&&ut<z.length&&(Ki(t,ut),z.length=ut);if(ki()&&pt!==null&&!Ht&&z!==null&&(t.f&(We|qt|st))===0)for(I=0;I<pt.length;I++)Ql(pt[I],t);return a!==null&&a!==t&&(mi++,pt!==null&&(r===null?r=pt:r.push(...pt))),(t.f&sn)!==0&&(t.f^=sn),A}catch(E){return zl(E)}finally{t.f^=yr,Je=n,ut=i,pt=r,ie=a,Ut=o,jn(g),Ht=v,mn=c}}function _o(t,n){let i=n.reactions;if(i!==null){var r=bs.call(i,t);if(r!==-1){var a=i.length-1;a===0?i=n.reactions=null:(i[r]=i[a],i.pop())}}i===null&&(n.f&We)!==0&&(Je===null||!Je.includes(n))&&(je(n,qt),(n.f&zt)!==0&&(n.f^=zt,n.f&=~wn),Pl(n),Ki(n,0))}function Ki(t,n){var i=t.deps;if(i!==null)for(var r=n;r<i.length;r++)_o(t,i[r])}function wi(t){var n=t.f;if((n&ln)===0){je(t,Ye);var i=ae,r=yn;ae=t,yn=!0;try{(n&(Yt|xs))!==0?vo(t):Vl(t),Nl(t);var a=Jl(t);t.teardown=typeof a=="function"?a:null,t.wv=Kl;var o;br&&Ns&&(t.f&st)!==0&&t.deps}finally{yn=r,ae=i}}}async function bo(){await Promise.resolve(),Us()}function e(t){var n=t.f,i=(n&We)!==0;if(ie!==null&&!Ht){var r=ae!==null&&(ae.f&ln)!==0;if(!r&&!Ut?.includes(t)){var a=ie.deps;if((ie.f&yr)!==0)t.rv<mi&&(t.rv=mi,Je===null&&a!==null&&a[ut]===t?ut++:Je===null?Je=[t]:Je.includes(t)||Je.push(t));else{(ie.deps??=[]).push(t);var o=t.reactions;o===null?t.reactions=[ie]:o.includes(ie)||o.push(ie)}}}if(Jn){if(on.has(t))return on.get(t);if(i){var g=t,v=g.v;return((g.f&Ye)===0&&g.reactions!==null||ts(g))&&(v=Rr(g)),on.set(g,v),v}}else i&&(!bt?.has(t)||oe?.is_fork&&!yi())&&(g=t,Si(g)&&Hl(g),yn&&yi()&&(g.f&zt)===0&&es(g));if(bt?.has(t))return bt.get(t);if((t.f&sn)!==0)throw t.v;return t.v}function es(t){if(t.deps!==null){t.f^=zt;for(const n of t.deps)(n.reactions??=[]).push(t),(n.f&We)!==0&&(n.f&zt)===0&&es(n)}}function ts(t){if(t.v===Ue)return!0;if(t.deps===null)return!1;for(const n of t.deps)if(on.has(n)||(n.f&We)!==0&&ts(n))return!0;return!1}function Ci(t){var n=Ht;try{return Ht=!0,t()}finally{Ht=n}}const yo=-7169;function je(t,n){t.f=t.f&yo|n}const mo=["touchstart","touchmove"];function wo(t){return mo.includes(t)}const ns=new Set,kr=new Set;function xo(t,n,i,r={}){function a(o){if(r.capture||hi.call(n,o),!o.cancelBubble)return ir(()=>i?.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Qn(()=>{n.addEventListener(t,a,r)}):n.addEventListener(t,a,r),a}function Vi(t,n,i,r,a){var o={capture:r,passive:a},g=xo(t,n,i,o);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&rr(()=>{n.removeEventListener(t,g,o)})}function Wr(t){for(var n=0;n<t.length;n++)ns.add(t[n]);for(var i of kr)i(t)}let al=null;function hi(t){var n=this,i=n.ownerDocument,r=t.type,a=t.composedPath?.()||[],o=a[0]||t.target;al=t;var g=0,v=al===t&&t.__root;if(v){var c=a.indexOf(v);if(c!==-1&&(n===document||n===window)){t.__root=n;return}var _=a.indexOf(n);if(_===-1)return;c<=_&&(g=c)}if(o=a[g]||t.target,o!==n){bl(t,"currentTarget",{configurable:!0,get(){return o||i}});var C=ie,A=ae;rt(null),Rt(null);try{for(var z,I=[];o!==null;){var E=o.assignedSlot||o.parentNode||o.host||null;try{var W=o["__"+r];W!=null&&(!o.disabled||t.target===o)&&W.call(o,t)}catch(h){z?I.push(h):z=h}if(t.cancelBubble||E===n||E===null)break;o=E}if(z){for(let h of I)queueMicrotask(()=>{throw h});throw z}}finally{t.__root=n,delete t.currentTarget,rt(C),Rt(A)}}}function ko(t){var n=document.createElement("template");return n.innerHTML=t.replaceAll("<!>","<!---->"),n.content}function So(t,n){var i=ae;i.nodes===null&&(i.nodes={start:t,end:n,a:null,t:null})}function Ce(t,n){var i=(n&$s)!==0,r,a=!t.startsWith("<!>");return()=>{r===void 0&&(r=ko(a?t:"<!>"+t),r=Dl(r));var o=i||Rl?document.importNode(r,!0):r.cloneNode(!0);return So(o,o),o}}function Se(t,n){t!==null&&t.before(n)}function Nt(t,n){var i=n==null?"":typeof n=="object"?n+"":n;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function Co(t,n){return Io(t,n)}const Dn=new Map;function Io(t,{target:n,anchor:i,props:r={},events:a,context:o,intro:g=!0}){ro();var v=new Set,c=A=>{for(var z=0;z<A.length;z++){var I=A[z];if(!v.has(I)){v.add(I);var E=wo(I);n.addEventListener(I,hi,{passive:E});var W=Dn.get(I);W===void 0?(document.addEventListener(I,hi,{passive:E}),Dn.set(I,1)):Dn.set(I,W+1)}}};c(Zi(ns)),kr.add(c);var _=void 0,C=uo(()=>{var A=i??n.appendChild(_n());return Ks(A,{pending:()=>{}},z=>{if(o){Ji({});var I=He;I.c=o}a&&(r.$$events=a),_=t(z,r)||{},o&&er()}),()=>{for(var z of v){n.removeEventListener(z,hi);var I=Dn.get(z);--I===0?(document.removeEventListener(z,hi),Dn.delete(z)):Dn.set(z,I)}kr.delete(c),A!==i&&A.parentNode?.removeChild(A)}});return Mo.set(_,C),_}let Mo=new WeakMap;class zo{anchor;#e=new Map;#t=new Map;#i=new Map;#n=new Set;#a=!0;constructor(n,i=!0){this.anchor=n,this.#a=i}#l=()=>{var n=oe;if(this.#e.has(n)){var i=this.#e.get(n),r=this.#t.get(i);if(r)Br(r),this.#n.delete(i);else{var a=this.#i.get(i);a&&(this.#t.set(i,a.effect),this.#i.delete(i),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[o,g]of this.#e){if(this.#e.delete(o),o===n)break;const v=this.#i.get(g);v&&(lt(v.effect),this.#i.delete(g))}for(const[o,g]of this.#t){if(o===i||this.#n.has(o))continue;const v=()=>{if(Array.from(this.#e.values()).includes(o)){var _=document.createDocumentFragment();jl(g,_),_.append(_n()),this.#i.set(o,{effect:g,fragment:_})}else lt(g);this.#n.delete(o),this.#t.delete(o)};this.#a||!r?(this.#n.add(o),bn(g,v,!1)):v()}}};#r=n=>{this.#e.delete(n);const i=Array.from(this.#e.values());for(const[r,a]of this.#i)i.includes(r)||(lt(a.effect),this.#i.delete(r))};ensure(n,i){var r=oe,a=Bl();if(i&&!this.#t.has(n)&&!this.#i.has(n))if(a){var o=document.createDocumentFragment(),g=_n();o.append(g),this.#i.set(n,{effect:_t(()=>i(g)),fragment:o})}else this.#t.set(n,_t(()=>i(this.anchor)));if(this.#e.set(r,n),a){for(const[v,c]of this.#t)v===n?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[v,c]of this.#i)v===n?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#l),r.ondiscard(this.#r)}else this.#l()}}function At(t,n,i=!1){var r=new zo(t),a=i?Yn:0;function o(g,v){r.ensure(g,v)}Dr(()=>{var g=!1;n((v,c=!0)=>{g=!0,o(c,v)}),g||o(!1,null)},a)}function pn(t,n){return n}function To(t,n,i){for(var r=[],a=n.length,o,g=n.length,v=0;v<a;v++){let A=n[v];bn(A,()=>{if(o){if(o.pending.delete(A),o.done.add(A),o.pending.size===0){var z=t.outrogroups;Sr(Zi(o.done)),z.delete(o),z.size===0&&(t.outrogroups=null)}}else g-=1},!1)}if(g===0){var c=r.length===0&&i!==null;if(c){var _=i,C=_.parentNode;lo(C),C.append(_),t.items.clear()}Sr(n,!c)}else o={pending:new Set(n),done:new Set},(t.outrogroups??=new Set).add(o)}function Sr(t,n=!0){for(var i=0;i<t.length;i++)lt(t[i],n)}var cl;function rn(t,n,i,r,a,o=null){var g=t,v=new Map,c=(n&kl)!==0;if(c){var _=t;g=_.appendChild(_n())}var C=null,A=Ol(()=>{var k=i();return Er(k)?k:k==null?[]:Zi(k)}),z,I=!0;function E(){h.fallback=C,Lo(h,z,g,n,r),C!==null&&(z.length===0?(C.f&Vt)===0?Br(C):(C.f^=Vt,vi(C,null,g)):bn(C,()=>{C=null}))}var W=Dr(()=>{z=e(A);for(var k=z.length,P=new Set,he=oe,_e=Bl(),Ie=0;Ie<k;Ie+=1){var Me=z[Ie],m=r(Me,Ie),H=I?null:v.get(m);H?(H.v&&Kn(H.v,Me),H.i&&Kn(H.i,Ie),_e&&he.skipped_effects.delete(H.e)):(H=Eo(v,I?g:cl??=_n(),Me,m,Ie,a,n,i),I||(H.e.f|=Vt),v.set(m,H)),P.add(m)}if(k===0&&o&&!C&&(I?C=_t(()=>o(g)):(C=_t(()=>o(cl??=_n())),C.f|=Vt)),!I)if(_e){for(const[D,j]of v)P.has(D)||he.skipped_effects.add(j.e);he.oncommit(E),he.ondiscard(()=>{})}else E();e(A)}),h={effect:W,items:v,outrogroups:null,fallback:C};I=!1}function Lo(t,n,i,r,a){var o=(r&Rs)!==0,g=n.length,v=t.items,c=t.effect.first,_,C=null,A,z=[],I=[],E,W,h,k;if(o)for(k=0;k<g;k+=1)E=n[k],W=a(E,k),h=v.get(W).e,(h.f&Vt)===0&&(h.nodes?.a?.measure(),(A??=new Set).add(h));for(k=0;k<g;k+=1){if(E=n[k],W=a(E,k),h=v.get(W).e,t.outrogroups!==null)for(const j of t.outrogroups)j.pending.delete(h),j.done.delete(h);if((h.f&Vt)!==0)if(h.f^=Vt,h===c)vi(h,null,i);else{var P=C?C.next:c;h===t.effect.last&&(t.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),nn(t,C,h),nn(t,h,P),vi(h,P,i),C=h,z=[],I=[],c=C.next;continue}if((h.f&dt)!==0&&(Br(h),o&&(h.nodes?.a?.unfix(),(A??=new Set).delete(h))),h!==c){if(_!==void 0&&_.has(h)){if(z.length<I.length){var he=I[0],_e;C=he.prev;var Ie=z[0],Me=z[z.length-1];for(_e=0;_e<z.length;_e+=1)vi(z[_e],he,i);for(_e=0;_e<I.length;_e+=1)_.delete(I[_e]);nn(t,Ie.prev,Me.next),nn(t,C,Ie),nn(t,Me,he),c=he,C=Me,k-=1,z=[],I=[]}else _.delete(h),vi(h,c,i),nn(t,h.prev,h.next),nn(t,h,C===null?t.effect.first:C.next),nn(t,C,h),C=h;continue}for(z=[],I=[];c!==null&&c!==h;)(_??=new Set).add(c),I.push(c),c=c.next;if(c===null)continue}(h.f&Vt)===0&&z.push(h),C=h,c=h.next}if(t.outrogroups!==null){for(const j of t.outrogroups)j.pending.size===0&&(Sr(Zi(j.done)),t.outrogroups?.delete(j));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||_!==void 0){var m=[];if(_!==void 0)for(h of _)(h.f&dt)===0&&m.push(h);for(;c!==null;)(c.f&dt)===0&&c!==t.fallback&&m.push(c),c=c.next;var H=m.length;if(H>0){var D=(r&kl)!==0&&g===0?i:null;if(o){for(k=0;k<H;k+=1)m[k].nodes?.a?.measure();for(k=0;k<H;k+=1)m[k].nodes?.a?.fix()}To(t,m,D)}}o&&Qn(()=>{if(A!==void 0)for(h of A)h.nodes?.a?.apply()})}function Eo(t,n,i,r,a,o,g,v){var c=(g&As)!==0?(g&Fs)===0?Fr(i,!1,!1):kn(i):null,_=(g&qs)!==0?kn(a):null;return{v:c,i:_,e:_t(()=>(o(n,c??i,_??a,v),()=>{t.delete(r)}))}}function vi(t,n,i){if(t.nodes)for(var r=t.nodes.start,a=t.nodes.end,o=n&&(n.f&Vt)===0?n.nodes.start:i;r!==null;){var g=nr(r);if(o.before(r),r===a)return;r=g}}function nn(t,n,i){n===null?t.effect.first=i:n.next=i,i===null?t.effect.last=n:i.prev=n}const ul=[...` 	
\r\fÂ \v\uFEFF`];function Oo(t,n,i){var r=t==null?"":""+t;if(n&&(r=r?r+" "+n:n),i){for(var a in i)if(i[a])r=r?r+" "+a:a;else if(r.length)for(var o=a.length,g=0;(g=r.indexOf(a,g))>=0;){var v=g+o;(g===0||ul.includes(r[g-1]))&&(v===r.length||ul.includes(r[v]))?r=(g===0?"":r.substring(0,g))+r.substring(v+1):g=v}}return r===""?null:r}function Po(t,n){return t==null?null:String(t)}function J(t,n,i,r,a,o){var g=t.__className;if(g!==i||g===void 0){var v=Oo(i,r,o);v==null?t.removeAttribute("class"):t.className=v,t.__className=i}else if(o&&a!==o)for(var c in o){var _=!!o[c];(a==null||_!==!!a[c])&&t.classList.toggle(c,_)}return o}function is(t,n,i,r){var a=t.__style;if(a!==n){var o=Po(n);o==null?t.removeAttribute("style"):t.style.cssText=o,t.__style=n}return r}function Ui(t,n,i=!1){if(t.multiple){if(n==null)return;if(!Er(n))return Bs();for(var r of t.options)r.selected=n.includes(fl(r));return}for(r of t.options){var a=fl(r);if(io(a,n)){r.selected=!0;return}}(!i||n!==void 0)&&(t.selectedIndex=-1)}function pr(t){var n=new MutationObserver(()=>{Ui(t,t.__value)});n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rr(()=>{n.disconnect()})}function fl(t){return"__value"in t?t.__value:t.value}const Ho=Symbol("is custom element"),Ao=Symbol("is html");function dl(t,n){var i=ls(t);i.checked!==(i.checked=n??void 0)&&(t.checked=n)}function rs(t,n,i,r){var a=ls(t);a[n]!==(a[n]=i)&&(n==="loading"&&(t[Ss]=i),i==null?t.removeAttribute(n):typeof i!="string"&&qo(t).includes(n)?t[n]=i:t.setAttribute(n,i))}function ls(t){return t.__attributes??={[Ho]:t.nodeName.includes("-"),[Ao]:t.namespaceURI===Ds}}var hl=new Map;function qo(t){var n=t.getAttribute("is")||t.nodeName,i=hl.get(n);if(i)return i;hl.set(n,i=[]);for(var r,a=t,o=Element.prototype;o!==a;){r=ys(a);for(var g in r)r[g].set&&i.push(g);a=yl(a)}return i}function Ro(t,n,i=n){var r=new WeakSet;oo(t,"input",async a=>{var o=a?t.defaultValue:t.value;if(o=gr(t)?_r(o):o,i(o),oe!==null&&r.add(oe),await bo(),o!==(o=n())){var g=t.selectionStart,v=t.selectionEnd,c=t.value.length;if(t.value=o??"",v!==null){var _=t.value.length;g===v&&v===c&&_>c?(t.selectionStart=_,t.selectionEnd=_):(t.selectionStart=g,t.selectionEnd=Math.min(v,_))}}}),Ci(n)==null&&t.value&&(i(gr(t)?_r(t.value):t.value),oe!==null&&r.add(oe)),$r(()=>{var a=n();if(t===document.activeElement){var o=Xi??oe;if(r.has(o))return}gr(t)&&a===_r(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function gr(t){var n=t.type;return n==="number"||n==="range"}function _r(t){return t===""?null:+t}function vl(t,n){return t===n||t?.[Un]===n}function Vn(t={},n,i,r){return fo(()=>{var a,o;return $r(()=>{a=o,o=r?.()||[],Ci(()=>{t!==i(...o)&&(n(t,...o),a&&vl(i(...a),t)&&n(null,...a))})}),()=>{Qn(()=>{o&&vl(i(...o),t)&&n(null,...o)})}}),t}function Nr(t,n,i){if(t==null)return n(void 0),i&&i(void 0),Xt;const r=Ci(()=>t.subscribe(n,i));return r.unsubscribe?()=>r.unsubscribe():r}const Bn=[];function Fo(t,n){return{subscribe:Tt(t,n).subscribe}}function Tt(t,n=Xt){let i=null;const r=new Set;function a(v){if(Cl(t,v)&&(t=v,i)){const c=!Bn.length;for(const _ of r)_[1](),Bn.push(_,t);if(c){for(let _=0;_<Bn.length;_+=2)Bn[_][0](Bn[_+1]);Bn.length=0}}}function o(v){a(v(t))}function g(v,c=Xt){const _=[v,c];return r.add(_),r.size===1&&(i=n(a,o)||Xt),v(t),()=>{r.delete(_),r.size===0&&i&&(i(),i=null)}}return{set:a,update:o,subscribe:g}}function Vr(t,n,i){const r=!Array.isArray(t),a=r?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=n.length<2;return Fo(i,(g,v)=>{let c=!1;const _=[];let C=0,A=Xt;const z=()=>{if(C)return;A();const E=n(r?_[0]:_,g,v);o?g(E):A=typeof E=="function"?E:Xt},I=a.map((E,W)=>Nr(E,h=>{_[W]=h,C&=~(1<<W),c&&z()},()=>{C|=1<<W}));return c=!0,z(),function(){ml(I),A(),c=!1}})}function $o(t){let n;return Nr(t,i=>n=i)(),n}let Cr=Symbol();function De(t,n,i){const r=i[n]??={store:null,source:Fr(void 0),unsubscribe:Xt};if(r.store!==t&&!(Cr in i))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Xt;else{var a=!0;r.unsubscribe=Nr(t,o=>{a?r.source.v=o:d(r.source,o)}),a=!1}return t&&Cr in i?$o(t):e(r.source)}function Xr(){const t={};function n(){rr(()=>{for(var i in t)t[i].unsubscribe();bl(t,Cr,{enumerable:!1,value:!0})})}return[t,n]}function ss(t){He===null&&Cs(),xi&&He.l!==null?Do(He).m.push(t):xr(()=>{const n=Ci(t);if(typeof n=="function")return n})}function Do(t){var n=t.l;return n.u??={a:[],b:[],m:[]}}const Bo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Bo);Vs();const os={A4:{name:"A4",width:210,height:297},A5:{name:"A5",width:148,height:210},LETTER:{name:"Letter",width:215.9,height:279.4},LEGAL:{name:"Legal",width:215.9,height:355.6},TEXTBOOK:{name:"US Textbook",width:236.2,height:279.4}},Ir={top:25.4,right:25.4,bottom:25.4,left:25.4},pl={top:12.7,right:12.7,bottom:12.7,left:12.7},gl={top:25.4,right:50.8,bottom:25.4,left:50.8};function yt(t){return t/25.4*96}function Ur(t){const{format:n,orientation:i}=t;return i==="landscape"?{width:yt(n.height),height:yt(n.width)}:{width:yt(n.width),height:yt(n.height)}}function Yr(t){const n=Ur(t),{margins:i}=t;return{width:n.width-yt(i.left)-yt(i.right),height:n.height-yt(i.top)-yt(i.bottom)}}function as(t){const n=Yr(t),i=t.columns||1,r=yt(t.columnGap||0);return i===1?n.width:(n.width-r)/2}const cs=Tt([]),pi=Tt(1),us=Tt(1),Ot=Tt({format:os.A4,margins:Ir,orientation:"portrait",columns:1,columnGap:10}),Yi=Tt(100);Vr(Ot,t=>Ur(t));Vr(Ot,t=>Yr(t));Vr(Ot,t=>as(t));const fs=Tt(16),Mr=Tt("Arial"),zr=Tt(1.5),Tr=Tt(0),Lr=Tt(12),Wn=[8,9,10,11,12,14,16,18,20,24,28,32,36,48,72],Wo=["Arial","Times New Roman","Georgia","Verdana","Courier New","Trebuchet MS","Comic Sans MS","Impact","Palatino Linotype","Garamond"],No=[{value:1,label:"Single"},{value:1.15,label:"1.15"},{value:1.5,label:"1.5"},{value:2,label:"Double"},{value:2.5,label:"2.5"},{value:3,label:"Triple"}],Vo=[{value:-1,label:"Tight"},{value:0,label:"Normal"},{value:.5,label:"Wide"},{value:1,label:"Wider"},{value:2,label:"Widest"}],Xo=[{value:0,label:"None"},{value:6,label:"Small"},{value:12,label:"Medium"},{value:18,label:"Large"},{value:24,label:"Extra Large"}];var Uo=Ce('<div class="dropdown-menu heading-dropdown-menu svelte-1dqac8y"><button>Normal text</button> <button>Heading 1</button> <button>Heading 2</button> <button>Heading 3</button> <button>Heading 4</button> <div class="heading-divider svelte-1dqac8y"></div> <button>Quote</button></div>'),Yo=Ce("<option> </option>"),jo=Ce("<option> </option>"),Go=Ce("<button> </button>"),Ko=Ce("<button> </button>"),Zo=Ce("<button> </button>"),Qo=Ce('<div class="dropdown-menu spacing-menu svelte-1dqac8y"><div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Line Height</label> <div class="dropdown-options spacing-options svelte-1dqac8y"></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Letter Spacing</label> <div class="dropdown-options spacing-options svelte-1dqac8y"></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Paragraph Spacing</label> <div class="dropdown-options spacing-options svelte-1dqac8y"></div></div></div>'),Jo=Ce('<div class="dropdown-menu page-settings-menu svelte-1dqac8y"><div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Page Size</label> <div class="dropdown-options svelte-1dqac8y"><button>A4</button> <button>A5</button> <button>Letter</button> <button>Legal</button> <button>US Textbook</button></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Orientation</label> <div class="dropdown-options svelte-1dqac8y"><button><svg width="16" height="20" viewBox="0 0 16 20" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="14" height="18" rx="1"></rect></svg> Portrait</button> <button><svg width="20" height="16" viewBox="0 0 20 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="18" height="14" rx="1"></rect></svg> Landscape</button></div></div> <div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Margins</label> <div class="dropdown-options margins-options svelte-1dqac8y"><button><svg width="24" height="30" viewBox="0 0 24 30" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="22" height="28" rx="1"></rect><rect x="4" y="4" width="16" height="22" fill="#e0e0e0" stroke="none"></rect></svg> Normal</button> <button><svg width="24" height="30" viewBox="0 0 24 30" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="22" height="28" rx="1"></rect><rect x="2" y="2" width="20" height="26" fill="#e0e0e0" stroke="none"></rect></svg> Narrow</button> <button><svg width="24" height="30" viewBox="0 0 24 30" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="22" height="28" rx="1"></rect><rect x="6" y="6" width="12" height="18" fill="#e0e0e0" stroke="none"></rect></svg> Wide</button></div></div></div>'),ea=Ce('<div class="dropdown-menu columns-menu svelte-1dqac8y"><div class="dropdown-section svelte-1dqac8y"><label class="dropdown-label svelte-1dqac8y">Columns</label> <div class="dropdown-options columns-options svelte-1dqac8y"><button><svg width="32" height="40" viewBox="0 0 32 40" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="30" height="38" rx="1"></rect><rect x="4" y="4" width="24" height="32" fill="#e0e0e0" stroke="none"></rect></svg> One</button> <button><svg width="32" height="40" viewBox="0 0 32 40" fill="none" stroke="currentColor" stroke-width="1"><rect x="1" y="1" width="30" height="38" rx="1"></rect><rect x="4" y="4" width="11" height="32" fill="#e0e0e0" stroke="none"></rect><rect x="17" y="4" width="11" height="32" fill="#e0e0e0" stroke="none"></rect></svg> Two</button></div></div></div>'),ta=Ce('<div class="toolbar svelte-1dqac8y"><div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Undo (Ctrl+Z)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Redo (Ctrl+Y)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><div class="dropdown-wrapper svelte-1dqac8y"><button title="Text style"><span class="heading-btn-label svelte-1dqac8y"> </span> <svg class="dropdown-arrow svelte-1dqac8y" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"></path></svg></button> <!></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><select class="toolbar-select font-family-select svelte-1dqac8y" title="Font family"></select> <button class="toolbar-btn font-size-btn svelte-1dqac8y" title="Decrease font size"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M5.12 14L7.5 7.67 9.87 14H5.12zM6.5 5L1 19h2.25l1.12-3h6.25l1.12 3H14L8.5 5h-2z"></path><path d="M18 7h-4v2h4v-2z"></path></svg></button> <select class="toolbar-select font-size-select svelte-1dqac8y" title="Font size"></select> <button class="toolbar-btn font-size-btn svelte-1dqac8y" title="Increase font size"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M5.12 14L7.5 7.67 9.87 14H5.12zM6.5 5L1 19h2.25l1.12-3h6.25l1.12 3H14L8.5 5h-2z"></path><path d="M20 9h-2v2h-2v2h2v2h2v-2h2v-2h-2V9z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Bold (Ctrl+B)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Italic (Ctrl+I)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Underline (Ctrl+U)"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Strikethrough"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"></path></svg></button> <div class="color-picker-wrapper svelte-1dqac8y"><input type="color" class="color-input svelte-1dqac8y" value="#000000" title="Text color"/> <svg class="color-icon svelte-1dqac8y" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11 2L5.5 16h2.25l1.12-3h6.25l1.12 3h2.25L13 2h-2zm-1.38 9L12 4.67 14.38 11H9.62z"></path><rect x="5" y="18" width="14" height="3" fill="currentColor"></rect></svg></div> <div class="color-picker-wrapper svelte-1dqac8y"><input type="color" class="color-input svelte-1dqac8y" value="#FFFF00" title="Highlight color"/> <svg class="color-icon svelte-1dqac8y" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z"></path><rect x="4" y="18" width="14" height="3" fill="#FFFF00"></rect></svg></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Align left"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Align center"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Align right"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Justify"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zM3 3v2h18V3H3z"></path></svg></button> <div class="dropdown-wrapper svelte-1dqac8y"><button title="Line and paragraph spacing"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M6 7h2.5L5 3.5 1.5 7H4v10H1.5L5 20.5 8.5 17H6V7zm4-2v2h12V5H10zm0 14h12v-2H10v2zm0-6h12v-2H10v2z"></path></svg></button> <!></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Bulleted list"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"></path></svg></button> <button class="toolbar-btn svelte-1dqac8y" title="Numbered list"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Insert image"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group page-controls svelte-1dqac8y"><div class="dropdown-wrapper svelte-1dqac8y"><button title="Page settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"></path></svg></button> <!></div> <div class="dropdown-wrapper svelte-1dqac8y"><button title="Columns"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="7" height="16" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><rect x="13" y="4" width="7" height="16" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button> <!></div></div> <div class="toolbar-divider svelte-1dqac8y"></div> <div class="toolbar-group zoom-controls svelte-1dqac8y"><button class="toolbar-btn svelte-1dqac8y" title="Zoom out"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"></path></svg></button> <select class="toolbar-select zoom-select svelte-1dqac8y"><option>50%</option><option>75%</option><option>100%</option><option>125%</option><option>150%</option><option>200%</option></select> <button class="toolbar-btn svelte-1dqac8y" title="Zoom in"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm.5-7H9v2H7v1h2v2h1v-2h2V9h-2z"></path></svg></button></div> <div class="toolbar-spacer svelte-1dqac8y"></div> <div class="toolbar-group page-info svelte-1dqac8y"><span class="page-indicator svelte-1dqac8y"> </span></div></div>');function na(t,n){Ji(n,!0);const i=()=>De(fs,"$fontSize",A),r=()=>De(Mr,"$fontFamily",A),a=()=>De(zr,"$lineHeight",A),o=()=>De(Tr,"$letterSpacing",A),g=()=>De(Lr,"$paragraphSpacing",A),v=()=>De(Ot,"$pageConfig",A),c=()=>De(Yi,"$zoomLevel",A),_=()=>De(pi,"$currentPage",A),C=()=>De(us,"$totalPages",A),[A,z]=Xr();let I=X(!1),E=X(!1),W=X(!1),h=X(!1),k=X("p");ss(()=>{const $=Z=>{Z.target.closest(".dropdown-wrapper")||(d(I,!1),d(E,!1),d(W,!1),d(h,!1))};return document.addEventListener("click",$),()=>document.removeEventListener("click",$)});const P={p:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",blockquote:"Quote"};function he($){d(k,$,!0),D("formatBlock",$),d(W,!1)}function _e($){Yi.update(Z=>Math.min(200,Math.max(25,Z+$)))}function Ie($){Yi.set($)}function Me($){Ot.update(Z=>({...Z,format:os[$]}))}function m($){const Z={default:Ir,narrow:pl,wide:gl};Ot.update(se=>({...se,margins:Z[$]}))}function H($){Ot.update(Z=>({...Z,columns:$}))}function D($,Z){n.onFormat($,Z)}function j($){D("fontSize",$.toString())}function Ii(){const $=Wn.indexOf(i());$<Wn.length-1&&j(Wn[$+1])}function Ft(){const $=Wn.indexOf(i());$>0&&j(Wn[$-1])}function Mi($){Mr.set($)}var ei=ta(),Cn=L(ei),ht=L(Cn);ht.__click=()=>D("undo");var mt=S(ht,2);mt.__click=()=>D("redo");var In=S(Cn,4),ti=L(In),an=L(ti);let Ne;an.__click=()=>{d(W,!e(W)),d(I,!1),d(E,!1)};var Mn=L(an),zn=L(Mn),lr=S(an,2);{var cn=$=>{var Z=Uo();Z.__click=qn=>qn.stopPropagation();var se=L(Z);let Ge;se.__click=()=>he("p");var xe=S(se,2);let ot;xe.__click=()=>he("h1");var Ee=S(xe,2);let at;Ee.__click=()=>he("h2");var Te=S(Ee,2);let Oe;Te.__click=()=>he("h3");var pe=S(Te,2);let Ae;pe.__click=()=>he("h4");var tt=S(pe,4);let vn;tt.__click=()=>he("blockquote"),Qe(()=>{Ge=J(se,1,"heading-option style-p svelte-1dqac8y",null,Ge,{selected:e(k)==="p"}),ot=J(xe,1,"heading-option style-h1 svelte-1dqac8y",null,ot,{selected:e(k)==="h1"}),at=J(Ee,1,"heading-option style-h2 svelte-1dqac8y",null,at,{selected:e(k)==="h2"}),Oe=J(Te,1,"heading-option style-h3 svelte-1dqac8y",null,Oe,{selected:e(k)==="h3"}),Ae=J(pe,1,"heading-option style-h4 svelte-1dqac8y",null,Ae,{selected:e(k)==="h4"}),vn=J(tt,1,"heading-option style-blockquote svelte-1dqac8y",null,vn,{selected:e(k)==="blockquote"})}),Se($,Z)};At(lr,$=>{e(W)&&$(cn)})}var Ve=S(In,4),te=L(Ve);te.__change=$=>Mi($.currentTarget.value),rn(te,21,()=>Wo,pn,($,Z)=>{var se=Yo(),Ge=L(se),xe={};Qe(()=>{is(se,`font-family: ${e(Z)??""}`),Nt(Ge,e(Z)),xe!==(xe=e(Z))&&(se.value=(se.__value=e(Z))??"")}),Se($,se)});var Fe;pr(te);var vt=S(te,2);vt.__click=Ft;var ce=S(vt,2);ce.__change=$=>j(parseInt($.currentTarget.value)),rn(ce,21,()=>Wn,pn,($,Z)=>{var se=jo(),Ge=L(se),xe={};Qe(()=>{Nt(Ge,e(Z)),xe!==(xe=e(Z))&&(se.value=(se.__value=e(Z))??"")}),Se($,se)});var ze;pr(ce);var me=S(ce,2);me.__click=Ii;var Xe=S(Ve,4),we=L(Xe);we.__click=()=>D("bold");var N=S(we,2);N.__click=()=>D("italic");var wt=S(N,2);wt.__click=()=>D("underline");var Tn=S(wt,2);Tn.__click=()=>D("strikeThrough");var Kt=S(Tn,2),un=L(Kt);un.__change=$=>D("foreColor",$.currentTarget.value);var zi=S(Kt,2),Ti=L(zi);Ti.__change=$=>D("hiliteColor",$.currentTarget.value);var xt=S(Xe,4),Ln=L(xt);Ln.__click=()=>D("justifyLeft");var et=S(Ln,2);et.__click=()=>D("justifyCenter");var Lt=S(et,2);Lt.__click=()=>D("justifyRight");var ni=S(Lt,2);ni.__click=()=>D("justifyFull");var Li=S(ni,2),$e=L(Li);let Zt;$e.__click=()=>{d(h,!e(h)),d(I,!1),d(E,!1),d(W,!1)};var Et=S($e,2);{var Ei=$=>{var Z=Qo();Z.__click=Te=>Te.stopPropagation();var se=L(Z),Ge=S(L(se),2);rn(Ge,21,()=>No,pn,(Te,Oe)=>{var pe=Go();let Ae;pe.__click=()=>zr.set(e(Oe).value);var tt=L(pe);Qe(()=>{Ae=J(pe,1,"dropdown-option spacing-option svelte-1dqac8y",null,Ae,{selected:a()===e(Oe).value}),Nt(tt,e(Oe).label)}),Se(Te,pe)});var xe=S(se,2),ot=S(L(xe),2);rn(ot,21,()=>Vo,pn,(Te,Oe)=>{var pe=Ko();let Ae;pe.__click=()=>Tr.set(e(Oe).value);var tt=L(pe);Qe(()=>{Ae=J(pe,1,"dropdown-option spacing-option svelte-1dqac8y",null,Ae,{selected:o()===e(Oe).value}),Nt(tt,e(Oe).label)}),Se(Te,pe)});var Ee=S(xe,2),at=S(L(Ee),2);rn(at,21,()=>Xo,pn,(Te,Oe)=>{var pe=Zo();let Ae;pe.__click=()=>Lr.set(e(Oe).value);var tt=L(pe);Qe(()=>{Ae=J(pe,1,"dropdown-option spacing-option svelte-1dqac8y",null,Ae,{selected:g()===e(Oe).value}),Nt(tt,e(Oe).label)}),Se(Te,pe)}),Se($,Z)};At(Et,$=>{e(h)&&$(Ei)})}var ii=S(xt,4),fn=L(ii);fn.__click=()=>D("insertUnorderedList");var En=S(fn,2);En.__click=()=>D("insertOrderedList");var dn=S(ii,4),K=L(dn);K.__click=()=>D("insertImage");var hn=S(dn,4),$t=L(hn),ri=L($t);let li;ri.__click=()=>{d(I,!e(I)),d(E,!1)};var sr=S(ri,2);{var ke=$=>{var Z=Jo();Z.__click=Qt=>Qt.stopPropagation();var se=L(Z),Ge=S(L(se),2),xe=L(Ge);let ot;xe.__click=()=>Me("A4");var Ee=S(xe,2);let at;Ee.__click=()=>Me("A5");var Te=S(Ee,2);let Oe;Te.__click=()=>Me("LETTER");var pe=S(Te,2);let Ae;pe.__click=()=>Me("LEGAL");var tt=S(pe,2);let vn;tt.__click=()=>Me("TEXTBOOK");var qn=S(se,2),fr=S(L(qn),2),ci=L(fr);let Rn;ci.__click=()=>Ot.update(Qt=>({...Qt,orientation:"portrait"}));var qi=S(ci,2);let Ri;qi.__click=()=>Ot.update(Qt=>({...Qt,orientation:"landscape"}));var dr=S(qn,2),hr=S(L(dr),2),Fn=L(hr);let Fi;Fn.__click=()=>m("default");var ui=S(Fn,2);let $i;ui.__click=()=>m("narrow");var Di=S(ui,2);let Bi;Di.__click=()=>m("wide"),Qe(()=>{ot=J(xe,1,"dropdown-option svelte-1dqac8y",null,ot,{selected:v().format.name==="A4"}),at=J(Ee,1,"dropdown-option svelte-1dqac8y",null,at,{selected:v().format.name==="A5"}),Oe=J(Te,1,"dropdown-option svelte-1dqac8y",null,Oe,{selected:v().format.name==="Letter"}),Ae=J(pe,1,"dropdown-option svelte-1dqac8y",null,Ae,{selected:v().format.name==="Legal"}),vn=J(tt,1,"dropdown-option svelte-1dqac8y",null,vn,{selected:v().format.name==="US Textbook"}),Rn=J(ci,1,"dropdown-option orientation-option svelte-1dqac8y",null,Rn,{selected:v().orientation==="portrait"}),Ri=J(qi,1,"dropdown-option orientation-option svelte-1dqac8y",null,Ri,{selected:v().orientation==="landscape"}),Fi=J(Fn,1,"dropdown-option margin-option svelte-1dqac8y",null,Fi,{selected:v().margins===Ir}),$i=J(ui,1,"dropdown-option margin-option svelte-1dqac8y",null,$i,{selected:v().margins===pl}),Bi=J(Di,1,"dropdown-option margin-option svelte-1dqac8y",null,Bi,{selected:v().margins===gl})}),Se($,Z)};At(sr,$=>{e(I)&&$(ke)})}var or=S($t,2),kt=L(or);let si;kt.__click=()=>{d(E,!e(E)),d(I,!1)};var ar=S(kt,2);{var On=$=>{var Z=ea();Z.__click=Te=>Te.stopPropagation();var se=L(Z),Ge=S(L(se),2),xe=L(Ge);let ot;xe.__click=()=>{H(1),d(E,!1)};var Ee=S(xe,2);let at;Ee.__click=()=>{H(2),d(E,!1)},Qe(()=>{ot=J(xe,1,"dropdown-option column-option svelte-1dqac8y",null,ot,{selected:v().columns===1}),at=J(Ee,1,"dropdown-option column-option svelte-1dqac8y",null,at,{selected:v().columns===2})}),Se($,Z)};At(ar,$=>{e(E)&&$(On)})}var Pn=S(hn,4),ve=L(Pn);ve.__click=()=>_e(-10);var Dt=S(ve,2);Dt.__change=$=>Ie(parseInt($.currentTarget.value));var Hn=L(Dt);Hn.value=Hn.__value="50";var oi=S(Hn);oi.value=oi.__value="75";var ai=S(oi);ai.value=ai.__value="100";var St=S(ai);St.value=St.__value="125";var An=S(St);An.value=An.__value="150";var Oi=S(An);Oi.value=Oi.__value="200";var Pi;pr(Dt);var cr=S(Dt,2);cr.__click=()=>_e(10);var ur=S(Pn,4),Hi=L(ur),Ai=L(Hi);Qe(()=>{Ne=J(an,1,"toolbar-btn heading-dropdown-btn svelte-1dqac8y",null,Ne,{active:e(W)}),Nt(zn,P[e(k)]),Fe!==(Fe=r())&&(te.value=(te.__value=r())??"",Ui(te,r())),ze!==(ze=i())&&(ce.value=(ce.__value=i())??"",Ui(ce,i())),Zt=J($e,1,"toolbar-btn svelte-1dqac8y",null,Zt,{active:e(h)}),li=J(ri,1,"toolbar-btn svelte-1dqac8y",null,li,{active:e(I)}),si=J(kt,1,"toolbar-btn svelte-1dqac8y",null,si,{active:e(E)}),Pi!==(Pi=c())&&(Dt.value=(Dt.__value=c())??"",Ui(Dt,c())),Nt(Ai,`Page ${_()??""} of ${C()??""}`)}),Se(t,ei),er(),z()}Wr(["click","change"]);const Nn="ï¿¼",_l="ï¿½";function Mt(){return{align:"left",listType:"none",blockType:"p",indent:0}}var ia=Ce("<canvas></canvas>"),ra=Ce('<div class="popup-overlay svelte-1h8xysy"><div class="popup-dialog svelte-1h8xysy"><div class="popup-header svelte-1h8xysy"><h3 class="svelte-1h8xysy">Insert Image</h3> <button class="popup-close svelte-1h8xysy">&times;</button></div> <div class="popup-content svelte-1h8xysy"><div class="input-section svelte-1h8xysy"><label for="image-url" class="svelte-1h8xysy">Image URL</label> <div class="url-input-row svelte-1h8xysy"><input id="image-url" type="text" placeholder="https://example.com/image.jpg" class="svelte-1h8xysy"/> <button class="svelte-1h8xysy">Insert</button></div></div> <div class="divider svelte-1h8xysy"><span class="svelte-1h8xysy">or</span></div>  <div><svg width="48" height="48" viewBox="0 0 24 24" fill="#9aa0a6"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg> <p class="svelte-1h8xysy">Drag and drop an image here</p> <p class="small svelte-1h8xysy">or click to select from your computer</p></div> <input id="file-input" type="file" accept="image/*" class="file-input svelte-1h8xysy"/> <p class="tip svelte-1h8xysy">Tip: You can also paste an image directly in the editor (Ctrl+V)</p></div></div></div>'),la=Ce('<div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">Horizontal Position</div> <div class="image-options-buttons svelte-1h8xysy"><button title="Align left"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="2" y="6" width="10" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button> <button title="Center"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="7" y="6" width="10" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button> <button title="Align right"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="12" y="6" width="10" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect></svg></button></div></div>'),sa=Ce('<div class="image-options-overlay svelte-1h8xysy"><div class="image-options-popup svelte-1h8xysy"><div class="image-options-header svelte-1h8xysy"><span>Layout Options</span> <button class="popup-close svelte-1h8xysy">&times;</button></div> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">In Line with Text</div> <div class="image-options-buttons svelte-1h8xysy"><button title="In line with text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><line x1="2" y1="8" x2="8" y2="8" stroke="currentColor" stroke-width="1.5"></line><rect x="9" y="5" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="16" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="14" x2="22" y2="14" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="18" x2="22" y2="18" stroke="currentColor" stroke-width="1.5"></line></svg> <span>In Line</span></button></div></div> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">With Text Wrapping</div> <div class="image-options-buttons wrap-buttons svelte-1h8xysy"><button title="Square - text wraps in a square around the image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="2" y="4" width="8" height="8" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="12" y1="5" x2="22" y2="5" stroke="currentColor" stroke-width="1.5"></line><line x1="12" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="12" y1="11" x2="22" y2="11" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="15" x2="22" y2="15" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="19" x2="22" y2="19" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Square</span></button> <button title="Tight - text wraps tightly around the image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M3 5 L9 5 L9 11 L3 11 Z" stroke="currentColor" stroke-width="1.5" fill="none"></path><line x1="11" y1="5" x2="21" y2="5" stroke="currentColor" stroke-width="1.5"></line><line x1="11" y1="8" x2="21" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="11" y1="11" x2="21" y2="11" stroke="currentColor" stroke-width="1.5"></line><line x1="3" y1="14" x2="21" y2="14" stroke="currentColor" stroke-width="1.5"></line><line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Tight</span></button> <button title="Through - text flows through the image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M4 4 L10 4 L10 10 L4 10 Z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-dasharray="2,1"></path><line x1="12" y1="5" x2="20" y2="5" stroke="currentColor" stroke-width="1.5"></line><line x1="12" y1="9" x2="20" y2="9" stroke="currentColor" stroke-width="1.5"></line><line x1="4" y1="14" x2="20" y2="14" stroke="currentColor" stroke-width="1.5"></line><line x1="4" y1="18" x2="20" y2="18" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Through</span></button> <button title="Top and Bottom - text above and below only"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><line x1="2" y1="4" x2="22" y2="4" stroke="currentColor" stroke-width="1.5"></line><rect x="6" y="8" width="12" height="8" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="2" y1="20" x2="22" y2="20" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Top/Bottom</span></button> <button title="Behind Text - image appears behind text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><rect x="6" y="6" width="12" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="none" opacity="0.5"></rect><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor" stroke-width="1.5"></line></svg> <span>Behind</span></button> <button title="In Front of Text - image appears in front of text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor" stroke-width="1.5" opacity="0.5"></line><line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5" opacity="0.5"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor" stroke-width="1.5" opacity="0.5"></line><rect x="6" y="6" width="12" height="12" rx="1" stroke="currentColor" stroke-width="1.5" fill="white"></rect></svg> <span>In Front</span></button></div></div> <!> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">Position</div> <div class="position-radio-group svelte-1h8xysy"><label class="radio-option svelte-1h8xysy"><input type="radio" name="positionMode" class="svelte-1h8xysy"/> <span>Move with text</span></label> <label class="radio-option svelte-1h8xysy"><input type="radio" name="positionMode" class="svelte-1h8xysy"/> <span>Fix position on page</span></label></div></div> <div class="image-options-section svelte-1h8xysy"><div class="section-label svelte-1h8xysy">Edit</div> <div class="image-options-buttons svelte-1h8xysy"><button class="layout-btn svelte-1h8xysy" title="Crop image"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"></path></svg> <span>Crop</span></button> <button class="layout-btn svelte-1h8xysy" title="Reset crop"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="svelte-1h8xysy"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></svg> <span>Reset</span></button></div></div> <button class="delete-image-btn svelte-1h8xysy"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg> Delete Image</button></div></div>'),oa=Ce('<div class="crop-mode-bar svelte-1h8xysy"><span>Crop Mode - Drag handles to adjust crop area</span> <div class="crop-mode-buttons svelte-1h8xysy"><button class="crop-btn done svelte-1h8xysy">Done</button> <button class="crop-btn reset svelte-1h8xysy">Reset</button> <button class="crop-btn cancel svelte-1h8xysy">Cancel</button></div></div>'),aa=Ce('<div class="editor-wrapper svelte-1h8xysy"><!> <canvas class="measure-canvas svelte-1h8xysy"></canvas>  <textarea class="hidden-input svelte-1h8xysy" autocomplete="off"></textarea> <div class="editor-container svelte-1h8xysy"><div class="canvas-container svelte-1h8xysy"></div></div> <div class="page-indicator svelte-1h8xysy"> </div> <!> <!> <!></div>');function ca(t,n){Ji(n,!0);const i=()=>De(fs,"$fontSizeStore",C),r=()=>De(Mr,"$fontFamilyStore",C),a=()=>De(zr,"$lineHeightStore",C),o=()=>De(Tr,"$letterSpacingStore",C),g=()=>De(Lr,"$paragraphSpacingStore",C),v=()=>De(Ot,"$pageConfig",C),c=()=>De(Yi,"$zoomLevel",C),_=()=>De(pi,"$currentPage",C),[C,A]=Xr();let z,I,E,W,h=X(ft([""])),k=X(ft([Mt()])),P=X(ft([])),he=new Map,_e=X(!1),Ie=X(""),Me=X(!1),m=X(0),H=X(0),D=X(null),j=X(null),Ii=ye(i),Ft=ye(r),Mi=ye(a),ei=ye(o),Cn=ye(g),ht=X(!1),mt=X(!1),In=X(!1),ti=X(!1),an=ye(()=>Ur(v())),Ne=ye(()=>Yr(v())),Mn=ye(()=>e(an).height*c()/100),zn=ye(()=>e(an).width*c()/100),lr=ye(()=>e(Ne).height*c()/100),cn=ye(()=>e(Ne).width*c()/100),Ve=ye(()=>yt(v().margins.top)*c()/100),te=ye(()=>yt(v().margins.left)*c()/100),Fe=ye(()=>v().columns||1),vt=ye(()=>yt(v().columnGap||10)*c()/100),ce=ye(()=>as(v())*c()/100),ze=ye(()=>e(Ii)*c()/100),me=ye(()=>e(ze)*e(Mi)),Xe=ye(()=>Math.floor(e(lr)/e(me))),we=ye(()=>e(Xe)*e(Fe)),N=X(null),wt=X(!1),Tn=X(ft({x:0,y:0})),Kt=X(!1),un=X(null),zi=X(0),Ti=X(0),xt=X(0),Ln=X(0),et=X(!1),Lt=X(null),ni=X(0),Li=X(0),$e=X(ft({top:0,right:0,bottom:0,left:0})),Zt=X(ft({top:0,right:0,bottom:0,left:0})),Et=X(!1),Ei=X(0),ii=X(0),fn=X(0),En=X(0),dn=X(ft([])),K=X(ft([])),hn=ye(()=>Math.max(1,Math.ceil(e(K).length/e(we)))),$t=[];function ri(){return`${e(mt)?"italic ":""}${e(ht)?"bold ":""}${e(ze)}px ${e(Ft)}`}function li(l,s){if(!W)return l.length*e(ze)*.5;const p=W.getContext("2d");if(!p)return l.length*e(ze)*.5;let u=e(ze),f=e(ht)?"bold ":"",b=e(mt)?"italic ":"";if(s){const F=s.fontSize?s.fontSize*c()/100:e(ze);switch(s.blockType){case"h1":u=F*2,f="bold ";break;case"h2":u=F*1.5,f="bold ";break;case"h3":u=F*1.17,f="bold ";break;case"h4":u=F,f="bold ";break;case"blockquote":u=F,b="italic ";break;default:u=F}}p.font=`${b}${f}${u}px ${e(Ft)}`;const O=p.measureText(l).width,w=e(ei)*c()/100;return O+(l.length>0?(l.length-1)*w:0)}function sr(l,s,p,u){const f=e(k)[l]||Mt(),b=f.fontSize?f.fontSize*c()/100:e(ze);let O=b;switch(f.blockType){case"h1":O=b*2;break;case"h2":O=b*1.5;break;case"h3":O=b*1.17;break}const w=f.listType!=="none"?O*1.5:0,F=u?u.width+10:0,U=(e(ce)>0?e(ce):e(cn)>0?e(cn):500)-w-F;if(!s)return[{paraIndex:l,startOffset:0,endOffset:0,text:"",meta:f,listNumber:p,floatReduction:u}];const R=[];let x=0;for(;x<s.length;){const M=s.substring(x);if(li(M,f)<=U){R.push({paraIndex:l,startOffset:x,endOffset:s.length,text:M,meta:f,listNumber:R.length===0?p:void 0,floatReduction:u});break}let B=x,ee=x;for(let q=x+1;q<=s.length;q++){const V=s.substring(x,q),y=li(V,f);if(q>x&&s[q-1]===" "&&(ee=q),y>U){ee>x?B=ee:B=Math.max(x+1,q-1);break}B=q}for(B<=x&&(B=x+1),R.push({paraIndex:l,startOffset:x,endOffset:B,text:s.substring(x,B),meta:f,listNumber:R.length===0?p:void 0,floatReduction:u}),x=B;x<s.length&&s[x]===" ";)x++}return R}function ke(){const l=[],s=[];let p=0;const u=f=>f==="square"||f==="tight"||f==="through";for(let f=0;f<e(h).length;f++){const b=e(h)[f];if(b.startsWith(Nn)){const O=b.substring(1),w=e(P).find(F=>F.id===O);if(w&&u(w.wrapStyle)){const F=w.width*c()/100,Q=w.height*c()/100,U=Math.ceil(Q/e(me));if(w.y!==void 0){const R=e(Ii)*e(Mi),x=Math.floor(w.y/R);let M;if(w.horizontalAlign==="right")M="right";else if(w.horizontalAlign==="center"){const B=e(Ne).width/2;M=(w.x??0)+w.width/2<B?"left":"right"}else M="left";s.push({id:O,startLine:x,endLine:x+U,width:F,side:M})}}}}for(let f=0;f<e(h).length;f++){const b=e(k)[f]||Mt(),O=e(h)[f];if(O===_l){const x=l.length%e(we),M=x===0?0:e(we)-x;l.push({paraIndex:f,startOffset:0,endOffset:1,text:"",meta:b,isPageBreak:!0});for(let B=1;B<M;B++)l.push({paraIndex:f,startOffset:0,endOffset:1,text:"",meta:b,isPageBreak:!0});continue}if(O.startsWith(Nn)){const R=O.substring(1),x=e(P).find(M=>M.id===R);if(x){const M=x.width*c()/100,B=x.height*c()/100,ee=Math.ceil(B/e(me));if(u(x.wrapStyle)){if(x.y===void 0){const q=l.length;if(!s.find(y=>y.id===R)){let y;if(x.horizontalAlign==="right")y="right";else if(x.horizontalAlign==="center"){const T=e(Ne).width/2;y=(x.x??0)+x.width/2<T?"left":"right"}else y="left";s.push({id:R,startLine:q,endLine:q+ee,width:M,side:y})}}l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:ee})}else if(x.wrapStyle==="inline"){l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:ee});for(let q=1;q<ee;q++)l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:0})}else if(x.wrapStyle==="top-bottom"){l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:ee});for(let q=1;q<ee;q++)l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:0})}else if(x.wrapStyle==="behind"||x.wrapStyle==="in-front")l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:0});else{l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R,imageHeight:ee});for(let q=1;q<ee;q++)l.push({paraIndex:f,startOffset:0,endOffset:O.length,text:"",meta:b,isImage:!0,imageId:R})}}continue}let w;b.listType==="numbered"?(p++,w=p):(b.listType==="bullet"&&(w=void 0),p=0);const F=l.length;let Q;for(const R of s)if(F>=R.startLine&&F<R.endLine){Q={side:R.side,width:R.width};break}const U=sr(f,O,w,Q);for(let R=0;R<U.length;R++){const x=l.length;let M;for(const B of s)if(x>=B.startLine&&x<B.endLine){M={side:B.side,width:B.width};break}U[R].floatReduction=M,R===U.length-1&&(U[R].isLastLineOfParagraph=!0),l.push(U[R])}}d(dn,s,!0),d(K,l,!0),us.set(e(hn)),or()}function or(){const l=[];for(let s=0;s<e(h).length;s++){const u=(e(k)[s]||Mt()).blockType;if(u.startsWith("h")){const f=parseInt(u[1]);f>=1&&f<=4&&l.push({id:`heading-${s}`,text:e(h)[s],level:f,paraIndex:s})}}cs.set(l)}function kt(l,s){for(let u=0;u<e(K).length;u++){const f=e(K)[u];if(f.paraIndex===l&&s>=f.startOffset&&s<=f.endOffset)return{line:u,col:s-f.startOffset}}const p=e(K).length-1;return{line:p,col:e(K)[p]?.text.length||0}}function si(l,s){if(l<0||l>=e(K).length)return{para:e(h).length-1,offset:e(h)[e(h).length-1].length};const p=e(K)[l];return{para:p.paraIndex,offset:p.startOffset+Math.min(s,p.text.length)}}function ar(l){if(l<0||l>=e(h).length)return;d(m,l,!0),d(H,0),d(D,null),d(j,null);const s=kt(e(m),e(H)),p=Math.floor(s.line/e(we))+1;pi.set(p),An(),E?.focus(),ve()}ss(()=>{E?.focus(),requestAnimationFrame(()=>{ke(),ve()});const l=u=>{!z?.contains(document.activeElement)&&document.activeElement!==E||Ge(u)},s=u=>{e(Kt)?qn(u.clientX,u.clientY):e(et)&&e(Lt)?dr(u.clientX,u.clientY):e(Et)&&ui(u.clientX,u.clientY)},p=()=>{e(Kt)&&fr(),e(Lt)&&hr(),e(Et)&&$i()};return document.addEventListener("paste",l),document.addEventListener("mousemove",s),document.addEventListener("mouseup",p),()=>{document.removeEventListener("paste",l),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",p)}}),xr(()=>{e(h)&&c()&&v()&&e(cn)>0&&ke()}),xr(()=>{e(K).length>0&&e(m)!==void 0&&ve()});function On(l,s,p,u,f,b){const O=s.width*c()/100,w=s.cropTop||0,F=s.cropRight||0,Q=s.cropBottom||0,U=s.cropLeft||0,R=U/100*p.naturalWidth,x=w/100*p.naturalHeight,M=(100-U-F)/100*p.naturalWidth,B=(100-w-Q)/100*p.naturalHeight,ee=M/B,q=O,V=O/ee;if(s.wrapStyle==="behind"&&(l.globalAlpha=.5),l.drawImage(p,R,x,M,B,u,f,q,V),l.globalAlpha=1,e(N)===s.id){l.strokeStyle=e(Et)?"#4caf50":"#1a73e8",l.lineWidth=2,l.setLineDash([]),l.strokeRect(u-2,f-2,q+4,V+4);const y=8;l.fillStyle=e(et)?"#ff9800":e(Et)?"#4caf50":"#1a73e8",l.fillRect(u-y/2,f-y/2,y,y),l.fillRect(u+q-y/2,f-y/2,y,y),l.fillRect(u-y/2,f+V-y/2,y,y),l.fillRect(u+q-y/2,f+V-y/2,y,y),l.fillRect(u+q/2-y/2,f-y/2,y,y),l.fillRect(u+q/2-y/2,f+V-y/2,y,y),l.fillRect(u-y/2,f+V/2-y/2,y,y),l.fillRect(u+q-y/2,f+V/2-y/2,y,y),e(Et)&&(l.fillStyle="rgba(76, 175, 80, 0.2)",l.fillRect(u,f,q,V)),e(et)&&(l.strokeStyle="#ff9800",l.lineWidth=2,l.setLineDash([5,5]),l.strokeRect(u,f,q,V),l.setLineDash([]))}else l.strokeStyle="#e0e0e0",l.lineWidth=1,l.setLineDash([]),l.strokeRect(u,f,q,V)}function Pn(l,s,p,u){const f=l.width*c()/100,b=e(K)[s],O=l.wrapStyle==="inline";if(!O&&l.x!==void 0&&l.y!==void 0){const B=e(Ne).height,ee=Math.floor(l.y/B);if(ee===p){const q=l.y-ee*B,V=e(te)+l.x*c()/100,y=e(Ve)+q*c()/100;return{x:V,y,visible:!0}}return{x:0,y:0,visible:!1}}const w=s-u;if(w<0||w>=e(we))return{x:0,y:0,visible:!1};const F=e(Fe)>1?Math.floor(w/e(Xe)):0,Q=e(Fe)>1?w%e(Xe):w,U=F*(e(ce)+e(vt)),R=e(Ve)+Q*e(me);let x,M;if(O&&b?.meta){const B=b.meta.align;B==="center"?M="center":B==="right"?M="right":M="left"}else M=l.horizontalAlign||"left";return M==="center"?x=e(te)+U+(e(ce)-f)/2:M==="right"?x=e(te)+U+e(ce)-f:x=e(te)+U,{x,y:R,visible:!0}}function ve(){const l=e(hn);for(let s=0;s<l;s++){const p=$t[s];if(!p)continue;const u=p.getContext("2d");if(!u)continue;const f=window.devicePixelRatio||1;p.width=e(zn)*f,p.height=e(Mn)*f,p.style.width=`${e(zn)}px`,p.style.height=`${e(Mn)}px`,u.scale(f,f),u.fillStyle="white",u.fillRect(0,0,e(zn),e(Mn)),u.font=ri(),u.fillStyle="#202124",u.textBaseline="top";const b=s*e(we),O=Math.min(b+e(we),e(K).length),w=kt(e(m),e(H));let F=null,Q=null;if(e(D)&&e(j)){const x=kt(e(D).para,e(D).offset),M=kt(e(j).para,e(j).offset);x.line<M.line||x.line===M.line&&x.col<=M.col?(F=x,Q=M):(F=M,Q=x)}for(const x of e(K)){if(!x.isImage||!x.imageId||!x.imageHeight)continue;const M=e(P).find(V=>V.id===x.imageId);if(!M||M.wrapStyle!=="behind")continue;const B=he.get(M.id);if(!B)continue;const ee=e(K).indexOf(x),q=Pn(M,ee,s,b);q.visible&&On(u,M,B,q.x,q.y)}for(const x of e(dn)){const M=e(P).find(T=>T.id===x.id);if(!M)continue;const B=he.get(M.id);if(!B)continue;const ee=M.width*c()/100;let q,V,y=!1;if(M.x!==void 0&&M.y!==void 0){const T=e(Ne).height,Y=Math.floor(M.y/T);if(Y===s){const ue=M.y-Y*T;q=e(te)+M.x*c()/100,V=e(Ve)+ue*c()/100,y=!0}}else{const T=x.startLine-b;if(T>=0&&T<e(we)){const Y=e(Fe)>1?Math.floor(T/e(Xe)):0,ue=e(Fe)>1?T%e(Xe):T,be=Y*(e(ce)+e(vt));V=e(Ve)+ue*e(me),q=x.side==="left"?e(te)+be:e(te)+be+e(ce)-ee,y=!0}}y&&On(u,M,B,q,V)}for(let x=b;x<O;x++){const M=e(K)[x];if(!M.isImage||!M.imageId||!M.imageHeight)continue;const B=e(P).find(V=>V.id===M.imageId);if(!B||B.wrapStyle!=="inline"&&B.wrapStyle!=="top-bottom")continue;const ee=he.get(B.id);if(!ee)continue;const q=Pn(B,x,s,b);q.visible&&On(u,B,ee,q.x,q.y)}const U=e(Cn)*c()/100;let R=0;for(let x=b;x<O;x++){const M=x-b,B=e(Fe)>1?Math.floor(M/e(Xe)):0,ee=e(Fe)>1?M%e(Xe):M,q=B*(e(ce)+e(vt)),V=e(K)[x],y=e(Ve)+ee*e(me)+R;if(V.isLastLineOfParagraph&&(R+=U),V.isImage||V.isPageBreak)continue;const T=V.text,Y=V.meta,ue=Y.listType!=="none"?e(ze)*1.5:0,be=V.floatReduction&&V.floatReduction.side==="left"?V.floatReduction.width+10:0,ge=e(te)+q+ue+be,fe=Y.fontSize?Y.fontSize*c()/100:e(ze);let ne=fe,Le=e(ht)?"bold ":"",nt=e(mt)?"italic ":"";switch(Y.blockType){case"h1":ne=fe*2,Le="bold ";break;case"h2":ne=fe*1.5,Le="bold ";break;case"h3":ne=fe*1.17,Le="bold ";break;case"h4":Le="bold ";break;case"blockquote":nt="italic ";break}const Pe=`${nt}${Le}${ne}px ${e(Ft)}`;u.font=Pe;const Be=u.measureText(T).width,Ct=V.floatReduction?V.floatReduction.width+10:0,Ke=e(ce)-ue-Ct;let G=ge,le=0;const qe=T.split(" "),$n=V.endOffset>=e(h)[V.paraIndex].length;switch(Y.align){case"center":G=ge+(Ke-Be)/2;break;case"right":G=ge+Ke-Be;break;case"justify":!$n&&qe.length>1&&T.trim().length>0&&(le=(Ke-Be)/(qe.length-1));break}if(F&&Q&&x>=F.line&&x<=Q.line){u.fillStyle="#b4d7ff";const re=x===F.line?F.col:0,de=x===Q.line?Q.col:T.length,ct=G+u.measureText(T.substring(0,re)).width,Ze=u.measureText(T.substring(re,de)).width||5;u.fillRect(ct,y,Ze,e(me))}if(V.startOffset===0&&Y.listType!=="none")if(u.fillStyle="#202124",Y.listType==="bullet"){const re=e(te)+q+e(ze)*.5,de=y+e(me)/2;u.beginPath(),u.arc(re,de,e(ze)*.15,0,Math.PI*2),u.fill()}else Y.listType==="numbered"&&V.listNumber&&(u.font=`${e(ze)}px ${e(Ft)}`,u.textAlign="right",u.fillText(`${V.listNumber}.`,e(te)+q+e(ze)*1.2,y+(e(me)-e(ze))/2),u.textAlign="left",u.font=Pe);Y.blockType==="blockquote"&&V.startOffset===0&&(u.fillStyle="#ccc",u.fillRect(e(te)+q,y,3,e(me))),u.fillStyle=Y.textColor||"#202124",u.font=Pe;const It=y+(e(me)-ne)/2,Re=e(ei)*c()/100,it=(re,de)=>{if(Re===0)return u.fillText(re,de,It),u.measureText(re).width;{let ct=de;for(let Ze=0;Ze<re.length;Ze++)u.fillText(re[Ze],ct,It),ct+=u.measureText(re[Ze]).width+Re;return ct-de-Re}};if(le>0&&Y.align==="justify"){let re=G;for(let de=0;de<qe.length;de++)it(qe[de],re),re+=u.measureText(qe[de]).width+qe[de].length*Re,de<qe.length-1&&(re+=u.measureText(" ").width+le)}else it(T,G);const Bt=le>0?Ke:Be;if(e(In)&&T.length>0){const re=y+e(me)-4;u.strokeStyle="#202124",u.lineWidth=1,u.beginPath(),u.moveTo(G,re),u.lineTo(G+Bt,re),u.stroke()}if(e(ti)&&T.length>0){const re=y+e(me)/2;u.strokeStyle="#202124",u.lineWidth=1,u.beginPath(),u.moveTo(G,re),u.lineTo(G+Bt,re),u.stroke()}if(x===w.line&&!e(D)){let re=G;if(le>0&&Y.align==="justify"){const de=T.substring(0,w.col),Ze=de.split(" ").length-1;re=G+u.measureText(de).width+Ze*le}else re=G+u.measureText(T.substring(0,w.col)).width;u.fillStyle="#000",u.fillRect(re,y+2,2,e(me)-4)}}for(const x of e(K)){if(!x.isImage||!x.imageId||!x.imageHeight)continue;const M=e(P).find(V=>V.id===x.imageId);if(!M||M.wrapStyle!=="in-front")continue;const B=he.get(M.id);if(!B)continue;const ee=e(K).indexOf(x),q=Pn(M,ee,s,b);q.visible&&On(u,M,B,q.x,q.y)}u.fillStyle="#999",u.font=`10px ${e(Ft)}`,u.textAlign="center",u.fillText(`${s+1}`,e(zn)/2,e(Mn)-20),u.textAlign="left"}}function Dt(l){const s=l.key;if(e(N)&&(s==="Delete"||s==="Backspace")){l.preventDefault(),ot();return}if(e(N)&&s!=="Delete"&&s!=="Backspace"&&(d(N,null),ve()),l.altKey&&s==="Enter"){l.preventDefault(),oi();return}if(l.ctrlKey||l.metaKey)switch(s.toLowerCase()){case"b":l.preventDefault(),d(ht,!e(ht)),ke();return;case"i":l.preventDefault(),d(mt,!e(mt)),ke();return;case"a":l.preventDefault(),d(D,{para:0,offset:0},!0),d(j,{para:e(h).length-1,offset:e(h)[e(h).length-1].length},!0);return;case"c":case"x":if(e(D)&&e(j)){const b=ai();navigator.clipboard.writeText(b),s.toLowerCase()==="x"&&St()}l.preventDefault();return;case"v":l.preventDefault(),navigator.clipboard.readText().then(b=>{e(D)&&St(),Hn(b)});return}const p=kt(e(m),e(H));switch(l.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(s)?e(D)||d(D,{para:e(m),offset:e(H)},!0):!l.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(s)&&(d(D,null),d(j,null)),s){case"ArrowLeft":l.preventDefault(),e(H)>0?tn(H,-1):e(m)>0&&(tn(m,-1),d(H,e(h)[e(m)].length,!0));break;case"ArrowRight":l.preventDefault(),e(H)<e(h)[e(m)].length?tn(H):e(m)<e(h).length-1&&(tn(m),d(H,0));break;case"ArrowUp":if(l.preventDefault(),p.line>0){const b=si(p.line-1,p.col);d(m,b.para,!0),d(H,b.offset,!0)}break;case"ArrowDown":if(l.preventDefault(),p.line<e(K).length-1){const b=si(p.line+1,p.col);d(m,b.para,!0),d(H,b.offset,!0)}break;case"Home":l.preventDefault();{const b=e(K)[p.line];d(H,b.startOffset,!0)}break;case"End":l.preventDefault();{const b=e(K)[p.line];d(H,b.endOffset,!0)}break;case"Backspace":if(l.preventDefault(),e(D)&&e(j))St();else if(e(H)>0)e(h)[e(m)]=e(h)[e(m)].substring(0,e(H)-1)+e(h)[e(m)].substring(e(H)),tn(H,-1),ke();else if(e(m)>0)if(e(h)[e(m)-1].startsWith(Nn)){const b=e(h)[e(m)-1].substring(1);d(N,b,!0),ve()}else{const b=e(h)[e(m)-1].length;e(h)[e(m)-1]+=e(h)[e(m)],d(h,[...e(h).slice(0,e(m)),...e(h).slice(e(m)+1)],!0),d(k,[...e(k).slice(0,e(m)),...e(k).slice(e(m)+1)],!0),tn(m,-1),d(H,b,!0),ke()}break;case"Delete":if(l.preventDefault(),e(D)&&e(j))St();else if(e(H)<e(h)[e(m)].length)e(h)[e(m)]=e(h)[e(m)].substring(0,e(H))+e(h)[e(m)].substring(e(H)+1),ke();else if(e(m)<e(h).length-1)if(e(h)[e(m)+1].startsWith(Nn)){const b=e(h)[e(m)+1].substring(1);d(N,b,!0),ve()}else e(h)[e(m)]+=e(h)[e(m)+1],d(h,[...e(h).slice(0,e(m)+1),...e(h).slice(e(m)+2)],!0),d(k,[...e(k).slice(0,e(m)+1),...e(k).slice(e(m)+2)],!0),ke();break;case"Enter":l.preventDefault(),e(D)&&e(j)&&St();{const b=e(h)[e(m)].substring(0,e(H)),O=e(h)[e(m)].substring(e(H));e(h)[e(m)]=b,d(h,[...e(h).slice(0,e(m)+1),O,...e(h).slice(e(m)+1)],!0);const w=e(k)[e(m)]||Mt(),F=w.blockType.startsWith("h")?"p":w.blockType;d(k,[...e(k).slice(0,e(m)+1),{...w,blockType:F},...e(k).slice(e(m)+1)],!0),tn(m),d(H,0),ke()}break;default:s.length===1&&(l.preventDefault(),e(D)&&e(j)&&St(),Hn(s))}l.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(s)&&d(j,{para:e(m),offset:e(H)},!0);const u=kt(e(m),e(H)),f=Math.floor(u.line/e(we))+1;pi.set(f),An()}function Hn(l){const s=l.split(/\r?\n/);if(s.length===1)e(h)[e(m)]=e(h)[e(m)].substring(0,e(H))+l+e(h)[e(m)].substring(e(H)),d(H,e(H)+l.length);else{const p=e(h)[e(m)].substring(0,e(H)),u=e(h)[e(m)].substring(e(H)),f=e(k)[e(m)]||Mt();e(h)[e(m)]=p+s[0];const b=s.slice(1,-1),O=s[s.length-1]+u;d(h,[...e(h).slice(0,e(m)+1),...b,O,...e(h).slice(e(m)+1)],!0);const w=s.slice(1).map(()=>({...f}));d(k,[...e(k).slice(0,e(m)+1),...w,...e(k).slice(e(m)+1)],!0),d(m,e(m)+(s.length-1)),d(H,s[s.length-1].length,!0)}ke()}function oi(){e(D)&&e(j)&&St();const l=e(h)[e(m)].substring(0,e(H)),s=e(h)[e(m)].substring(e(H));e(h)[e(m)]=l,d(h,[...e(h).slice(0,e(m)+1),_l,s,...e(h).slice(e(m)+1)],!0);const p=e(k)[e(m)]||Mt();d(k,[...e(k).slice(0,e(m)+1),{...Mt()},{...p},...e(k).slice(e(m)+1)],!0),d(m,e(m)+2),d(H,0),ke(),ve()}function ai(){if(!e(D)||!e(j))return"";let l=e(D),s=e(j);if((l.para>s.para||l.para===s.para&&l.offset>s.offset)&&([l,s]=[s,l]),l.para===s.para)return e(h)[l.para].substring(l.offset,s.offset);let p=e(h)[l.para].substring(l.offset);for(let u=l.para+1;u<s.para;u++)p+=`
`+e(h)[u];return p+=`
`+e(h)[s.para].substring(0,s.offset),p}function St(){if(!e(D)||!e(j))return;let l=e(D),s=e(j);if((l.para>s.para||l.para===s.para&&l.offset>s.offset)&&([l,s]=[s,l]),l.para===s.para)e(h)[l.para]=e(h)[l.para].substring(0,l.offset)+e(h)[l.para].substring(s.offset);else{const p=e(h)[l.para].substring(0,l.offset)+e(h)[s.para].substring(s.offset);d(h,[...e(h).slice(0,l.para),p,...e(h).slice(s.para+1)],!0),d(k,[...e(k).slice(0,l.para+1),...e(k).slice(s.para+1)],!0)}d(m,l.para,!0),d(H,l.offset,!0),d(D,null),d(j,null),ke()}function An(){const l=kt(e(m),e(H)),s=Math.floor(l.line/e(we));I?.children[s]?.scrollIntoView({behavior:"smooth",block:"nearest"})}function Oi(l,s){const p=$t[s];if(!p)return;const u=p.getBoundingClientRect(),f=l.clientX-u.left,b=l.clientY-u.top;if(e(N)&&!e(et)){const y=Ae();if(y&&y.pageIndex===s){const T=tt(f,b,y);if(T){l.preventDefault(),vn(T,l.clientX,l.clientY);return}if(f>=y.x&&f<=y.x+y.width&&b>=y.y&&b<=y.y+y.height){l.preventDefault(),Fi(l.clientX,l.clientY);return}}}if(e(N)&&e(et)){const y=Ae();if(y&&y.pageIndex===s){const T=tt(f,b,y);if(T){l.preventDefault(),Ri(T,l.clientX,l.clientY);return}}}let O=0;e(Fe)>1&&f-e(te)>=e(ce)+e(vt)&&(O=1);const w=s*e(we),F=Math.min(w+e(we),e(K).length),Q=e(Cn)*c()/100,U=b-e(Ve);let R=-1,x=0;for(let y=w;y<F;y++){const T=y-w;if((e(Fe)>1?Math.floor(T/e(Xe)):0)!==O){const ne=e(K)[y];ne&&ne.isLastLineOfParagraph&&(x+=Q);continue}const be=(e(Fe)>1?T%e(Xe):T)*e(me)+x,ge=be+e(me);if(U>=be&&U<ge){R=y;break}const fe=e(K)[y];fe&&fe.isLastLineOfParagraph&&(x+=Q)}R===-1&&U>=0&&(R=F-1);for(const y of e(dn)){const T=e(P).find(Y=>Y.id===y.id);if(T){const Y=T.width*c()/100,ue=T.height*c()/100;let be,ge,fe=!1;if(T.x!==void 0&&T.y!==void 0){const ne=e(Ne).height,Le=Math.floor(T.y/ne);if(Le===s){const nt=T.y-Le*ne;be=e(te)+T.x*c()/100,ge=e(Ve)+nt*c()/100,fe=!0}}else{const ne=y.startLine-s*e(we);if(ne>=0&&ne<e(we)){const Le=e(Fe)>1?Math.floor(ne/e(Xe)):0,nt=e(Fe)>1?ne%e(Xe):ne,Pe=Le*(e(ce)+e(vt));ge=e(Ve)+nt*e(me),be=y.side==="left"?e(te)+Pe:e(te)+Pe+e(ce)-Y,fe=!0}}if(fe&&f>=be&&f<=be+Y&&b>=ge&&b<=ge+ue){d(N,T.id,!0),d(D,null),d(j,null),Oe(l.clientX,l.clientY),E?.focus(),ve();return}}}if(R>=0&&R<e(K).length){const y=e(K)[R];if(y.isImage&&y.imageId){const T=e(P).find(ue=>ue.id===y.imageId);if(T&&(T.wrapStyle==="inline"||T.wrapStyle==="top-bottom"||T.wrapStyle==="behind"||T.wrapStyle==="in-front")){const ue=T.width*c()/100,be=T.height*c()/100;let ge;const fe=O*(e(ce)+e(vt));T.horizontalAlign==="center"?ge=e(te)+fe+(e(ce)-ue)/2:T.horizontalAlign==="right"?ge=e(te)+fe+e(ce)-ue:ge=e(te)+fe;let ne=R;for(;ne>0&&e(K)[ne-1].imageId===y.imageId;)ne--;const Le=e(Ve)+(ne-s*e(we))*e(me);if(f>=ge&&f<=ge+ue&&b>=Le&&b<=Le+be){d(N,T.id,!0),d(D,null),d(j,null),Oe(l.clientX,l.clientY),E?.focus(),ve();return}}}}if(e(et)&&Rn(),d(N,null),d(wt,!1),R>=0&&R<e(K).length){const y=e(K)[R];if(y.isImage)d(m,y.paraIndex+1),d(H,0),e(m)>=e(h).length&&(d(m,e(h).length-1),d(H,e(h)[e(m)].length,!0));else{const T=O*(e(ce)+e(vt)),Y=y.meta,ue=Y.listType!=="none"?e(ze)*1.5:0,be=y.floatReduction&&y.floatReduction.side==="left"?y.floatReduction.width+10:0,ge=e(te)+T+ue+be,fe=Y.fontSize?Y.fontSize*c()/100:e(ze);let ne=fe;switch(Y.blockType){case"h1":ne=fe*2;break;case"h2":ne=fe*1.5;break;case"h3":ne=fe*1.17;break}const Le=y.floatReduction?y.floatReduction.width+10:0,nt=e(ce)-ue-Le,Pe=W?.getContext("2d");if(Pe){const le=["h1","h2","h3","h4"].includes(Y.blockType)||e(ht)?"bold ":"",qe=Y.blockType==="blockquote"||e(mt)?"italic ":"";Pe.font=`${qe}${le}${ne}px ${e(Ft)}`}const Be=Pe?Pe.measureText(y.text).width:y.text.length*ne*.5;let Ct=ge;Y.align==="center"?Ct=ge+(nt-Be)/2:Y.align==="right"&&(Ct=ge+nt-Be);let Ke=0,G=Ct;for(let le=0;le<=y.text.length;le++){const qe=le<y.text.length&&Pe?Pe.measureText(y.text[le]).width:0;if(G+qe/2>=f){Ke=le;break}G+=qe,Ke=le+1}Ke=Math.min(Ke,y.text.length),d(m,y.paraIndex,!0),d(H,y.startOffset+Ke)}}else if(R<0){const y=s*e(we);if(y<e(K).length){const T=e(K)[y];d(m,T.paraIndex,!0),d(H,T.startOffset,!0)}}else{const y=e(K).length-1;if(y>=0){const T=e(K)[y];d(m,T.paraIndex,!0),d(H,T.endOffset,!0)}}d(D,null),d(j,null);let M=!1;const B=e(m),ee=e(H),q=y=>{M=!0,e(D)||d(D,{para:B,offset:ee},!0);for(let T=0;T<$t.length;T++){const Y=$t[T];if(!Y)continue;const ue=Y.getBoundingClientRect();if(y.clientY>=ue.top&&y.clientY<=ue.bottom){const be=y.clientX-ue.left,ge=y.clientY-ue.top;let fe=0;e(Fe)>1&&be-e(te)>=e(ce)+e(vt)&&(fe=1);const ne=T*e(we),Le=Math.min(ne+e(we),e(K).length),nt=e(Cn)*c()/100,Pe=ge-e(Ve);let Be=-1,Ct=0;for(let G=ne;G<Le;G++){const le=G-ne;if((e(Fe)>1?Math.floor(le/e(Xe)):0)!==fe){const Bt=e(K)[G];Bt&&Bt.isLastLineOfParagraph&&(Ct+=nt);continue}const It=(e(Fe)>1?le%e(Xe):le)*e(me)+Ct,Re=It+e(me);if(Pe>=It&&Pe<Re){Be=G;break}const it=e(K)[G];it&&it.isLastLineOfParagraph&&(Ct+=nt)}Be===-1&&Pe>=0&&(Be=Le-1);const Ke=fe*(e(ce)+e(vt));if(Be>=0&&Be<e(K).length){const G=e(K)[Be],le=G.meta,qe=le.listType!=="none"?e(ze)*1.5:0,$n=G.floatReduction&&G.floatReduction.side==="left"?G.floatReduction.width+10:0,It=e(te)+Ke+qe+$n,Re=le.fontSize?le.fontSize*c()/100:e(ze);let it=Re;switch(le.blockType){case"h1":it=Re*2;break;case"h2":it=Re*1.5;break;case"h3":it=Re*1.17;break}const Bt=G.floatReduction?G.floatReduction.width+10:0,re=e(ce)-qe-Bt,de=W?.getContext("2d");if(de){const en=["h1","h2","h3","h4"].includes(le.blockType)||e(ht)?"bold ":"",Wi=le.blockType==="blockquote"||e(mt)?"italic ":"";de.font=`${Wi}${en}${it}px ${e(Ft)}`}const ct=de?de.measureText(G.text).width:G.text.length*it*.5;let Ze=It;le.align==="center"?Ze=It+(re-ct)/2:le.align==="right"&&(Ze=It+re-ct);let Jt=0,di=Ze;for(let en=0;en<=G.text.length;en++){const Wi=en<G.text.length&&de?de.measureText(G.text[en]).width:0;if(di+Wi/2>=be){Jt=en;break}di+=Wi,Jt=en+1}Jt=Math.min(Jt,G.text.length),d(m,G.paraIndex,!0),d(H,G.startOffset+Jt),d(j,{para:e(m),offset:e(H)},!0)}break}}},V=()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",V),(!M||e(D)&&e(j)&&e(D).para===e(j).para&&e(D).offset===e(j).offset)&&(d(D,null),d(j,null)),E?.focus(),ve()};window.addEventListener("mousemove",q),window.addEventListener("mouseup",V),pi.set(s+1),E?.focus(),ve()}function Pi(l,s){let p=e(m),u=e(m);switch(e(D)&&e(j)&&(p=Math.min(e(D).para,e(j).para),u=Math.max(e(D).para,e(j).para)),l){case"bold":d(ht,!e(ht));break;case"italic":d(mt,!e(mt));break;case"underline":d(In,!e(In));break;case"strikeThrough":d(ti,!e(ti));break;case"justifyLeft":for(let f=p;f<=u;f++)e(k)[f]={...e(k)[f],align:"left"};break;case"justifyCenter":for(let f=p;f<=u;f++)e(k)[f]={...e(k)[f],align:"center"};break;case"justifyRight":for(let f=p;f<=u;f++)e(k)[f]={...e(k)[f],align:"right"};break;case"justifyFull":for(let f=p;f<=u;f++)e(k)[f]={...e(k)[f],align:"justify"};break;case"insertUnorderedList":for(let f=p;f<=u;f++){const b=e(k)[f].listType;e(k)[f]={...e(k)[f],listType:b==="bullet"?"none":"bullet"}}break;case"insertOrderedList":for(let f=p;f<=u;f++){const b=e(k)[f].listType;e(k)[f]={...e(k)[f],listType:b==="numbered"?"none":"numbered"}}break;case"formatBlock":if(s){const f=s;for(let b=p;b<=u;b++)e(k)[b]={...e(k)[b],blockType:f}}break;case"fontSize":if(s){const f=parseInt(s);for(let b=p;b<=u;b++)e(k)[b]={...e(k)[b],fontSize:f}}break;case"foreColor":if(s)for(let f=p;f<=u;f++)e(k)[f]={...e(k)[f],textColor:s};break;case"undo":case"redo":break;case"insertImage":d(_e,!0);return}d(k,[...e(k)],!0),ke(),ve(),E?.focus()}function cr(){return"img-"+Date.now()+"-"+Math.random().toString(36).substring(2,11)}function ur(l){return new Promise((s,p)=>{const u=new Image;u.crossOrigin="anonymous",u.onload=()=>s(u),u.onerror=p,u.src=l})}async function Hi(l,s="inline"){try{const p=await ur(l),u=cr(),f=e(Ne).width*.8*c()/100;let b=p.naturalWidth,O=p.naturalHeight;if(b>f){const x=f/b;b=f,O=O*x}const w={id:u,src:l,width:b,height:O,naturalWidth:p.naturalWidth,naturalHeight:p.naturalHeight,wrapStyle:s,positionMode:"move-with-text",horizontalAlign:"left",cropTop:0,cropRight:0,cropBottom:0,cropLeft:0};d(P,[...e(P),w],!0),he.set(u,p);const F=e(h)[e(m)].substring(0,e(H)),Q=e(h)[e(m)].substring(e(H));e(h)[e(m)]=F;const U=Nn+u;d(h,[...e(h).slice(0,e(m)+1),U,Q,...e(h).slice(e(m)+1)],!0);const R=e(k)[e(m)]||Mt();d(k,[...e(k).slice(0,e(m)+1),{...Mt(),align:"center"},{...R},...e(k).slice(e(m)+1)],!0),d(m,e(m)+2),d(H,0),ke(),ve()}catch(p){console.error("Failed to load image:",p),alert("Failed to load image. Please check the URL.")}}function Ai(){e(Ie).trim()&&(Hi(e(Ie).trim()),d(Ie,""),d(_e,!1),E?.focus())}function $(l){l.preventDefault(),d(Me,!1);const s=l.dataTransfer?.files;s&&s.length>0&&se(s[0])}function Z(l){const s=l.target;s.files&&s.files.length>0&&se(s.files[0])}function se(l){if(!l.type.startsWith("image/")){alert("Please select an image file");return}const s=new FileReader;s.onload=p=>{const u=p.target?.result;Hi(u),d(_e,!1),E?.focus()},s.readAsDataURL(l)}function Ge(l){const s=l.clipboardData?.items;if(s){for(const p of s)if(p.type.startsWith("image/")){l.preventDefault();const u=p.getAsFile();u&&se(u);return}}}function xe(){d(_e,!1),d(Ie,""),d(Me,!1),E?.focus()}function ot(){if(!e(N))return;const l=e(h).findIndex(s=>s===Nn+e(N));l!==-1&&(d(P,e(P).filter(s=>s.id!==e(N)),!0),he.delete(e(N)),d(h,[...e(h).slice(0,l),...e(h).slice(l+1)],!0),d(k,[...e(k).slice(0,l),...e(k).slice(l+1)],!0),e(h).length===0&&(d(h,[""],!0),d(k,[Mt()],!0)),e(m)>=e(h).length?(d(m,e(h).length-1),d(H,e(h)[e(m)].length,!0)):e(m)>l&&tn(m,-1),d(N,null),d(wt,!1),ke(),ve())}function Ee(l){if(!e(N))return;const s=e(P).findIndex(u=>u.id===e(N));if(s===-1)return;const p={...e(P)[s],wrapStyle:l};(p.positionMode==="move-with-text"||l==="inline")&&(p.x=void 0,p.y=void 0,p.pageIndex=void 0),e(P)[s]=p,d(P,[...e(P)],!0),ke(),ve()}function at(l){if(!e(N))return;const s=e(P).findIndex(u=>u.id===e(N));if(s===-1)return;const p={...e(P)[s],positionMode:l};l==="move-with-text"&&(p.x=void 0,p.y=void 0,p.pageIndex=void 0),e(P)[s]=p,d(P,[...e(P)],!0),ke(),ve()}function Te(l){if(!e(N))return;const s=e(P).findIndex(p=>p.id===e(N));s!==-1&&(e(P)[s]={...e(P)[s],horizontalAlign:l},d(P,[...e(P)],!0),ke(),ve())}function Oe(l,s){d(Tn,{x:l,y:s},!0),d(wt,!0)}function pe(){d(wt,!1)}function Ae(){if(!e(N))return null;const l=e(P).find(y=>y.id===e(N));if(!l)return null;const s=he.get(l.id);if(!s)return null;const p=l.width*c()/100,u=l.cropTop||0,f=l.cropRight||0,b=l.cropBottom||0,w=(100-(l.cropLeft||0)-f)/100*s.naturalWidth,F=(100-u-b)/100*s.naturalHeight,Q=w/F,U=p,R=p/Q;if(l.x!==void 0&&l.y!==void 0){const y=e(Ne).height,T=Math.floor(l.y/y),Y=l.y-T*y,ue=e(te)+l.x*c()/100,be=e(Ve)+Y*c()/100;return{x:ue,y:be,width:U,height:R,pageIndex:T}}const x=e(K).findIndex(y=>y.imageId===e(N)&&y.isImage);if(x===-1)return null;const M=Math.floor(x/e(we)),B=x-M*e(we),ee=e(dn).find(y=>y.id===e(N));let q;ee?q=ee.side==="left"?e(te):e(te)+e(cn)-U:q=e(te)+(e(cn)-U)/2;const V=e(Ve)+B*e(me);return{x:q,y:V,width:U,height:R,pageIndex:M}}function tt(l,s,p){const{x:f,y:b,width:O,height:w}=p;if(l>=f-10&&l<=f+10&&s>=b-10&&s<=b+10)return"nw";if(l>=f+O-10&&l<=f+O+10&&s>=b-10&&s<=b+10)return"ne";if(l>=f-10&&l<=f+10&&s>=b+w-10&&s<=b+w+10)return"sw";if(l>=f+O-10&&l<=f+O+10&&s>=b+w-10&&s<=b+w+10)return"se";const F=f+O/2,Q=b+w/2;return l>=F-10&&l<=F+10&&s>=b-10&&s<=b+10?"n":l>=F-10&&l<=F+10&&s>=b+w-10&&s<=b+w+10?"s":l>=f-10&&l<=f+10&&s>=Q-10&&s<=Q+10?"w":l>=f+O-10&&l<=f+O+10&&s>=Q-10&&s<=Q+10?"e":null}function vn(l,s,p){if(!e(N)||!l)return;const u=e(P).find(f=>f.id===e(N));u&&(d(Kt,!0),d(un,l,!0),d(zi,s,!0),d(Ti,p,!0),d(xt,u.width,!0),d(Ln,u.height,!0),d(wt,!1))}function qn(l,s){if(!e(Kt)||!e(N)||!e(un))return;const p=e(P).findIndex(U=>U.id===e(N));if(p===-1)return;const u=e(P)[p],f=u.naturalWidth/u.naturalHeight,b=(l-e(zi))*(100/c()),O=(s-e(Ti))*(100/c());let w=e(xt),F=e(Ln);switch(e(un)){case"se":w=Math.max(50,e(xt)+b),F=w/f;break;case"sw":w=Math.max(50,e(xt)-b),F=w/f;break;case"ne":w=Math.max(50,e(xt)+b),F=w/f;break;case"nw":w=Math.max(50,e(xt)-b),F=w/f;break;case"e":w=Math.max(50,e(xt)+b),F=w/f;break;case"w":w=Math.max(50,e(xt)-b),F=w/f;break;case"n":case"s":F=Math.max(50,e(Ln)+(e(un)==="s"?O:-O)),w=F*f;break}const Q=e(Ne).width*.95;w>Q&&(w=Q,F=w/f),e(P)[p]={...u,width:w,height:F},d(P,[...e(P)],!0),ke(),ve()}function fr(){d(Kt,!1),d(un,null)}function ci(){if(!e(N))return;const l=e(P).find(s=>s.id===e(N));l&&d(Zt,{top:l.cropTop||0,right:l.cropRight||0,bottom:l.cropBottom||0,left:l.cropLeft||0},!0),d(et,!0),d(wt,!1),ve()}function Rn(){d(et,!1),d(Lt,null),ve()}function qi(){if(!e(N))return;const l=e(P).findIndex(s=>s.id===e(N));l!==-1&&(e(P)[l]={...e(P)[l],cropTop:e(Zt).top,cropRight:e(Zt).right,cropBottom:e(Zt).bottom,cropLeft:e(Zt).left},d(P,[...e(P)],!0)),Rn()}function Ri(l,s,p){if(!e(N)||!l)return;const u=e(P).find(f=>f.id===e(N));u&&(d(Lt,l,!0),d(ni,s,!0),d(Li,p,!0),d($e,{top:u.cropTop||0,right:u.cropRight||0,bottom:u.cropBottom||0,left:u.cropLeft||0},!0))}function dr(l,s){if(!e(et)||!e(N)||!e(Lt))return;const p=e(P).findIndex(F=>F.id===e(N));if(p===-1)return;const u=e(P)[p],f=Ae();if(!f)return;const b=(l-e(ni))/f.width*100,O=(s-e(Li))/f.height*100;let w={...e($e)};switch(e(Lt)){case"n":w.top=Math.max(0,Math.min(100-w.bottom-10,e($e).top+O));break;case"s":w.bottom=Math.max(0,Math.min(100-w.top-10,e($e).bottom-O));break;case"w":w.left=Math.max(0,Math.min(100-w.right-10,e($e).left+b));break;case"e":w.right=Math.max(0,Math.min(100-w.left-10,e($e).right-b));break;case"nw":w.top=Math.max(0,Math.min(100-w.bottom-10,e($e).top+O)),w.left=Math.max(0,Math.min(100-w.right-10,e($e).left+b));break;case"ne":w.top=Math.max(0,Math.min(100-w.bottom-10,e($e).top+O)),w.right=Math.max(0,Math.min(100-w.left-10,e($e).right-b));break;case"sw":w.bottom=Math.max(0,Math.min(100-w.top-10,e($e).bottom-O)),w.left=Math.max(0,Math.min(100-w.right-10,e($e).left+b));break;case"se":w.bottom=Math.max(0,Math.min(100-w.top-10,e($e).bottom-O)),w.right=Math.max(0,Math.min(100-w.left-10,e($e).right-b));break}e(P)[p]={...u,cropTop:w.top,cropRight:w.right,cropBottom:w.bottom,cropLeft:w.left},d(P,[...e(P)],!0),ve()}function hr(){d(Lt,null)}function Fn(){if(!e(N))return;const l=e(P).findIndex(s=>s.id===e(N));l!==-1&&(e(P)[l]={...e(P)[l],cropTop:0,cropRight:0,cropBottom:0,cropLeft:0},d(P,[...e(P)],!0),ve())}function Fi(l,s,p){if(!e(N))return;const u=e(P).find(f=>f.id===e(N));if(u&&u.wrapStyle!=="inline"){if(d(Et,!0),d(Ei,l,!0),d(ii,s,!0),u.x===void 0||u.y===void 0){const f=Ae();f?(d(fn,(f.x-e(te))*(100/c())),d(En,f.pageIndex*e(Ne).height+(f.y-e(Ve))*(100/c()))):(d(fn,0),d(En,0))}else d(fn,u.x,!0),d(En,u.y,!0);d(wt,!1)}}function ui(l,s){if(!e(Et)||!e(N))return;const p=e(P).findIndex(x=>x.id===e(N));if(p===-1)return;const u=e(P)[p],f=(l-e(Ei))*(100/c()),b=(s-e(ii))*(100/c());let O=e(fn)+f,w=e(En)+b;const F=e(Ne).width-u.width;O=Math.max(0,Math.min(F,O));const Q=e(Ne).height,U=Math.max(0,w),R=Math.floor(U/Q);e(P)[p]={...u,x:O,y:U,pageIndex:R},d(P,[...e(P)],!0),ke(),ve()}function $i(){d(Et,!1)}let Di=ye(()=>Array.from({length:e(hn)},(l,s)=>s));var Bi={navigateToParagraph:ar},Qt=aa(),jr=L(Qt);na(jr,{onFormat:Pi});var Gr=S(jr,2);Vn(Gr,l=>W=l,()=>W);var fi=S(Gr,2);fi.__keydown=Dt,rs(fi,"spellcheck",!1),Vn(fi,l=>E=l,()=>E);var vr=S(fi,2),Kr=L(vr);rn(Kr,20,()=>e(Di),l=>l,(l,s)=>{var p=ia();let u;p.__mousedown=f=>Oi(f,s),Vn(p,(f,b)=>$t[b]=f,f=>$t?.[f],()=>[s]),Qe(()=>u=J(p,1,"page-canvas svelte-1h8xysy",null,u,{active:_()===s+1})),Se(l,p)}),Vn(Kr,l=>I=l,()=>I),Vn(vr,l=>z=l,()=>z);var Zr=S(vr,2),ds=L(Zr),Qr=S(Zr,2);{var hs=l=>{var s=ra();s.__click=xe;var p=L(s);p.__click=M=>M.stopPropagation();var u=L(p),f=S(L(u),2);f.__click=xe;var b=S(u,2),O=L(b),w=S(L(O),2),F=L(w);F.__keydown=M=>M.key==="Enter"&&Ai();var Q=S(F,2);Q.__click=Ai;var U=S(O,4);let R;U.__click=()=>document.getElementById("file-input")?.click();var x=S(U,2);x.__change=Z,Qe(()=>R=J(U,1,"drop-zone svelte-1h8xysy",null,R,{"drag-over":e(Me)})),Ro(F,()=>e(Ie),M=>d(Ie,M)),Vi("dragover",U,M=>{M.preventDefault(),d(Me,!0)}),Vi("dragleave",U,()=>d(Me,!1)),Vi("drop",U,$),Se(l,s)};At(Qr,l=>{e(_e)&&l(hs)})}var Jr=S(Qr,2);{var vs=l=>{const s=ye(()=>e(P).find(Re=>Re.id===e(N)));var p=sa();p.__click=pe;var u=L(p);u.__click=Re=>Re.stopPropagation();var f=L(u),b=S(L(f),2);b.__click=pe;var O=S(f,2),w=S(L(O),2),F=L(w);let Q;F.__click=()=>Ee("inline");var U=S(O,2),R=S(L(U),2),x=L(R);let M;x.__click=()=>Ee("square");var B=S(x,2);let ee;B.__click=()=>Ee("tight");var q=S(B,2);let V;q.__click=()=>Ee("through");var y=S(q,2);let T;y.__click=()=>Ee("top-bottom");var Y=S(y,2);let ue;Y.__click=()=>Ee("behind");var be=S(Y,2);let ge;be.__click=()=>Ee("in-front");var fe=S(U,2);{var ne=Re=>{var it=la(),Bt=S(L(it),2),re=L(Bt);let de;re.__click=()=>Te("left");var ct=S(re,2);let Ze;ct.__click=()=>Te("center");var Jt=S(ct,2);let di;Jt.__click=()=>Te("right"),Qe(()=>{de=J(re,1,"layout-btn small svelte-1h8xysy",null,de,{active:e(s)?.horizontalAlign==="left"}),Ze=J(ct,1,"layout-btn small svelte-1h8xysy",null,Ze,{active:e(s)?.horizontalAlign==="center"}),di=J(Jt,1,"layout-btn small svelte-1h8xysy",null,di,{active:e(s)?.horizontalAlign==="right"})}),Se(Re,it)};At(fe,Re=>{e(s)?.wrapStyle!=="inline"&&Re(ne)})}var Le=S(fe,2),nt=S(L(Le),2),Pe=L(nt),Be=L(Pe);Be.__change=()=>at("move-with-text");var Ct=S(Pe,2),Ke=L(Ct);Ke.__change=()=>at("fixed-position");var G=S(Le,2),le=S(L(G),2),qe=L(le);qe.__click=ci;var $n=S(qe,2);$n.__click=Fn;var It=S(G,2);It.__click=ot,Qe(()=>{is(u,`left: ${e(Tn).x??""}px; top: ${e(Tn).y??""}px;`),Q=J(F,1,"layout-btn svelte-1h8xysy",null,Q,{active:e(s)?.wrapStyle==="inline"}),M=J(x,1,"layout-btn svelte-1h8xysy",null,M,{active:e(s)?.wrapStyle==="square"}),ee=J(B,1,"layout-btn svelte-1h8xysy",null,ee,{active:e(s)?.wrapStyle==="tight"}),V=J(q,1,"layout-btn svelte-1h8xysy",null,V,{active:e(s)?.wrapStyle==="through"}),T=J(y,1,"layout-btn svelte-1h8xysy",null,T,{active:e(s)?.wrapStyle==="top-bottom"}),ue=J(Y,1,"layout-btn svelte-1h8xysy",null,ue,{active:e(s)?.wrapStyle==="behind"}),ge=J(be,1,"layout-btn svelte-1h8xysy",null,ge,{active:e(s)?.wrapStyle==="in-front"}),dl(Be,e(s)?.positionMode==="move-with-text"),dl(Ke,e(s)?.positionMode==="fixed-position")}),Se(l,p)};At(Jr,l=>{e(wt)&&e(N)&&!e(et)&&l(vs)})}var ps=S(Jr,2);{var gs=l=>{var s=oa(),p=S(L(s),2),u=L(p);u.__click=Rn;var f=S(u,2);f.__click=Fn;var b=S(f,2);b.__click=qi,Se(l,s)};At(ps,l=>{e(et)&&e(N)&&l(gs)})}Qe(()=>Nt(ds,`Page ${_()??""} of ${e(hn)??""}`)),Vi("paste",fi,Ge),Se(t,Qt);var _s=er(Bi);return A(),_s}Wr(["keydown","mousedown","click","change"]);var ua=Ce('<ul class="heading-list nested svelte-1nhzsi7"></ul>'),fa=Ce('<li><button class="heading-link svelte-1nhzsi7"> </button> <!></li>'),da=Ce('<p class="empty-message svelte-1nhzsi7">No headings yet</p>'),ha=Ce('<ul class="heading-list svelte-1nhzsi7"></ul>'),va=Ce('<aside class="sidebar svelte-1nhzsi7"><div class="sidebar-header svelte-1nhzsi7"><h3 class="svelte-1nhzsi7">Document Outline</h3></div> <nav class="sidebar-nav svelte-1nhzsi7"><!></nav></aside>');function pa(t,n){Ji(n,!0);const i=()=>De(cs,"$headings",r),[r,a]=Xr(),o=(I,E=Xt)=>{var W=fa(),h=L(W);h.__click=()=>n.onNavigate(E().paraIndex);var k=L(h),P=S(h,2);{var he=_e=>{var Ie=ua();rn(Ie,21,()=>E().children,pn,(Me,m)=>{o(Me,()=>e(m))}),Se(_e,Ie)};At(P,_e=>{E().children.length>0&&_e(he)})}Qe(()=>{J(W,1,`heading-item level-${E().level??""}`,"svelte-1nhzsi7"),rs(h,"title",E().text),Nt(k,E().text||"(Empty heading)")}),Se(I,W)};function g(I){const E=[],W=[];for(const h of I){const k={...h,children:[]};for(;W.length>0&&W[W.length-1].level>=h.level;)W.pop();W.length===0?E.push(k):W[W.length-1].children.push(k),W.push(k)}return E}let v=ye(()=>g(i()));var c=va(),_=S(L(c),2),C=L(_);{var A=I=>{var E=da();Se(I,E)},z=I=>{var E=ha();rn(E,21,()=>e(v),pn,(W,h)=>{o(W,()=>e(h))}),Se(I,E)};At(C,I=>{e(v).length===0?I(A):I(z,!1)})}Se(t,c),er(),a()}Wr(["click"]);var ga=Ce('<main class="svelte-1n46o8q"><div class="app-layout svelte-1n46o8q"><!> <div class="editor-wrapper svelte-1n46o8q"><!></div></div></main>');function _a(t){let n=Fr();function i(c){e(n)?.navigateToParagraph(c)}var r=ga(),a=L(r),o=L(a);pa(o,{onNavigate:i});var g=S(o,2),v=L(g);Vn(ca(v,{$$legacy:!0}),c=>d(n,c),()=>e(n)),Se(t,r)}Co(_a,{target:document.getElementById("app")});
